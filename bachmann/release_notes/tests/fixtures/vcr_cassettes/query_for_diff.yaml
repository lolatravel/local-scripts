interactions:
- request:
    body: null
    headers: {}
    method: GET
    uri: https://api.github.com/repos/lolatravel/lola-server/compare/c0c43ba0c86d876cbd881e1242965116753b2702...3cb7e431258000ddfd648e650787e51ffe87760e
  response:
    body:
      string: '{"url":"https://api.github.com/repos/lolatravel/lola-server/compare/c0c43ba0c86d876cbd881e1242965116753b2702...3cb7e431258000ddfd648e650787e51ffe87760e","html_url":"https://github.com/lolatravel/lola-server/compare/c0c43ba0c86d876cbd881e1242965116753b2702...3cb7e431258000ddfd648e650787e51ffe87760e","permalink_url":"https://github.com/lolatravel/lola-server/compare/lolatravel:c0c43ba...lolatravel:3cb7e43","diff_url":"https://github.com/lolatravel/lola-server/compare/c0c43ba0c86d876cbd881e1242965116753b2702...3cb7e431258000ddfd648e650787e51ffe87760e.diff","patch_url":"https://github.com/lolatravel/lola-server/compare/c0c43ba0c86d876cbd881e1242965116753b2702...3cb7e431258000ddfd648e650787e51ffe87760e.patch","base_commit":{"sha":"c0c43ba0c86d876cbd881e1242965116753b2702","node_id":"MDY6Q29tbWl0Mzk2NDUxNDQ6YzBjNDNiYTBjODZkODc2Y2JkODgxZTEyNDI5NjUxMTY3NTNiMjcwMg==","commit":{"author":{"name":"mosmith89","email":"47039837+mosmith89@users.noreply.github.com","date":"2020-02-18T14:39:22Z"},"committer":{"name":"GitHub","email":"noreply@github.com","date":"2020-02-18T14:39:22Z"},"message":"FLY-271
        As a User i want Hotels omitted that dont have a specific lat long value stored
        (#6124)\n\n* Omit hotels that are missing a latitude and longitude\n\n* Omit
        hotels that are missing a latitude and longitude\n\n* Ran black\n\n* Made
        few changes from PR comments\n\n* Moved hotel_data = dict() up a few lines","tree":{"sha":"2e87cb835a0637e7de37ff9b5738a818dfcf812e","url":"https://api.github.com/repos/lolatravel/lola-server/git/trees/2e87cb835a0637e7de37ff9b5738a818dfcf812e"},"url":"https://api.github.com/repos/lolatravel/lola-server/git/commits/c0c43ba0c86d876cbd881e1242965116753b2702","comment_count":0,"verification":{"verified":true,"reason":"valid","signature":"-----BEGIN
        PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJeS/caCRBK7hj4Ov3rIwAAdHIIAIKPwJD/zbJV18xJV8vvlyix\nuwm1xb4+NT+JhfNTz6m7cYJkQqijSZwFQ4Iy19pdhlZi7wpkhfPSZH2D0+8nUA3D\nCYQBksHO6ra13IzXn5RuwC7EapFelo8YEDU6+Lwm/st7hMSoLgNVoMqqBRwi3ioF\nDXiUt+qC/z0Tz4UXm7jBaqOFJ1qbJ185Y6crXAd2lJ+DS0swntxNS6aU0rh9KEF0\n14/foSuAF76HjpkaXxYUUK3Yr+FMMVKveqff7oQ8taQApeSuMAiHPlXdeSoXk7kc\nkCq4Y/FotOSsptepPFsU1V3PjA6DXtYzcq2uPHbbOiu/1yZxsYaF1G+m+jpS5G4=\n=76oI\n-----END
        PGP SIGNATURE-----\n","payload":"tree 2e87cb835a0637e7de37ff9b5738a818dfcf812e\nparent
        e6debd85e6ba30b3151d2d6610399f16093f4c0c\nauthor mosmith89 <47039837+mosmith89@users.noreply.github.com>
        1582036762 -0500\ncommitter GitHub <noreply@github.com> 1582036762 +0000\n\nFLY-271
        As a User i want Hotels omitted that dont have a specific lat long value stored
        (#6124)\n\n* Omit hotels that are missing a latitude and longitude\n\n* Omit
        hotels that are missing a latitude and longitude\n\n* Ran black\n\n* Made
        few changes from PR comments\n\n* Moved hotel_data = dict() up a few lines\n"}},"url":"https://api.github.com/repos/lolatravel/lola-server/commits/c0c43ba0c86d876cbd881e1242965116753b2702","html_url":"https://github.com/lolatravel/lola-server/commit/c0c43ba0c86d876cbd881e1242965116753b2702","comments_url":"https://api.github.com/repos/lolatravel/lola-server/commits/c0c43ba0c86d876cbd881e1242965116753b2702/comments","author":{"login":"mosmith89","id":47039837,"node_id":"MDQ6VXNlcjQ3MDM5ODM3","avatar_url":"https://avatars3.githubusercontent.com/u/47039837?v=4","gravatar_id":"","url":"https://api.github.com/users/mosmith89","html_url":"https://github.com/mosmith89","followers_url":"https://api.github.com/users/mosmith89/followers","following_url":"https://api.github.com/users/mosmith89/following{/other_user}","gists_url":"https://api.github.com/users/mosmith89/gists{/gist_id}","starred_url":"https://api.github.com/users/mosmith89/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mosmith89/subscriptions","organizations_url":"https://api.github.com/users/mosmith89/orgs","repos_url":"https://api.github.com/users/mosmith89/repos","events_url":"https://api.github.com/users/mosmith89/events{/privacy}","received_events_url":"https://api.github.com/users/mosmith89/received_events","type":"User","site_admin":false},"committer":{"login":"web-flow","id":19864447,"node_id":"MDQ6VXNlcjE5ODY0NDQ3","avatar_url":"https://avatars3.githubusercontent.com/u/19864447?v=4","gravatar_id":"","url":"https://api.github.com/users/web-flow","html_url":"https://github.com/web-flow","followers_url":"https://api.github.com/users/web-flow/followers","following_url":"https://api.github.com/users/web-flow/following{/other_user}","gists_url":"https://api.github.com/users/web-flow/gists{/gist_id}","starred_url":"https://api.github.com/users/web-flow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/web-flow/subscriptions","organizations_url":"https://api.github.com/users/web-flow/orgs","repos_url":"https://api.github.com/users/web-flow/repos","events_url":"https://api.github.com/users/web-flow/events{/privacy}","received_events_url":"https://api.github.com/users/web-flow/received_events","type":"User","site_admin":false},"parents":[{"sha":"e6debd85e6ba30b3151d2d6610399f16093f4c0c","url":"https://api.github.com/repos/lolatravel/lola-server/commits/e6debd85e6ba30b3151d2d6610399f16093f4c0c","html_url":"https://github.com/lolatravel/lola-server/commit/e6debd85e6ba30b3151d2d6610399f16093f4c0c"}]},"merge_base_commit":{"sha":"c0c43ba0c86d876cbd881e1242965116753b2702","node_id":"MDY6Q29tbWl0Mzk2NDUxNDQ6YzBjNDNiYTBjODZkODc2Y2JkODgxZTEyNDI5NjUxMTY3NTNiMjcwMg==","commit":{"author":{"name":"mosmith89","email":"47039837+mosmith89@users.noreply.github.com","date":"2020-02-18T14:39:22Z"},"committer":{"name":"GitHub","email":"noreply@github.com","date":"2020-02-18T14:39:22Z"},"message":"FLY-271
        As a User i want Hotels omitted that dont have a specific lat long value stored
        (#6124)\n\n* Omit hotels that are missing a latitude and longitude\n\n* Omit
        hotels that are missing a latitude and longitude\n\n* Ran black\n\n* Made
        few changes from PR comments\n\n* Moved hotel_data = dict() up a few lines","tree":{"sha":"2e87cb835a0637e7de37ff9b5738a818dfcf812e","url":"https://api.github.com/repos/lolatravel/lola-server/git/trees/2e87cb835a0637e7de37ff9b5738a818dfcf812e"},"url":"https://api.github.com/repos/lolatravel/lola-server/git/commits/c0c43ba0c86d876cbd881e1242965116753b2702","comment_count":0,"verification":{"verified":true,"reason":"valid","signature":"-----BEGIN
        PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJeS/caCRBK7hj4Ov3rIwAAdHIIAIKPwJD/zbJV18xJV8vvlyix\nuwm1xb4+NT+JhfNTz6m7cYJkQqijSZwFQ4Iy19pdhlZi7wpkhfPSZH2D0+8nUA3D\nCYQBksHO6ra13IzXn5RuwC7EapFelo8YEDU6+Lwm/st7hMSoLgNVoMqqBRwi3ioF\nDXiUt+qC/z0Tz4UXm7jBaqOFJ1qbJ185Y6crXAd2lJ+DS0swntxNS6aU0rh9KEF0\n14/foSuAF76HjpkaXxYUUK3Yr+FMMVKveqff7oQ8taQApeSuMAiHPlXdeSoXk7kc\nkCq4Y/FotOSsptepPFsU1V3PjA6DXtYzcq2uPHbbOiu/1yZxsYaF1G+m+jpS5G4=\n=76oI\n-----END
        PGP SIGNATURE-----\n","payload":"tree 2e87cb835a0637e7de37ff9b5738a818dfcf812e\nparent
        e6debd85e6ba30b3151d2d6610399f16093f4c0c\nauthor mosmith89 <47039837+mosmith89@users.noreply.github.com>
        1582036762 -0500\ncommitter GitHub <noreply@github.com> 1582036762 +0000\n\nFLY-271
        As a User i want Hotels omitted that dont have a specific lat long value stored
        (#6124)\n\n* Omit hotels that are missing a latitude and longitude\n\n* Omit
        hotels that are missing a latitude and longitude\n\n* Ran black\n\n* Made
        few changes from PR comments\n\n* Moved hotel_data = dict() up a few lines\n"}},"url":"https://api.github.com/repos/lolatravel/lola-server/commits/c0c43ba0c86d876cbd881e1242965116753b2702","html_url":"https://github.com/lolatravel/lola-server/commit/c0c43ba0c86d876cbd881e1242965116753b2702","comments_url":"https://api.github.com/repos/lolatravel/lola-server/commits/c0c43ba0c86d876cbd881e1242965116753b2702/comments","author":{"login":"mosmith89","id":47039837,"node_id":"MDQ6VXNlcjQ3MDM5ODM3","avatar_url":"https://avatars3.githubusercontent.com/u/47039837?v=4","gravatar_id":"","url":"https://api.github.com/users/mosmith89","html_url":"https://github.com/mosmith89","followers_url":"https://api.github.com/users/mosmith89/followers","following_url":"https://api.github.com/users/mosmith89/following{/other_user}","gists_url":"https://api.github.com/users/mosmith89/gists{/gist_id}","starred_url":"https://api.github.com/users/mosmith89/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mosmith89/subscriptions","organizations_url":"https://api.github.com/users/mosmith89/orgs","repos_url":"https://api.github.com/users/mosmith89/repos","events_url":"https://api.github.com/users/mosmith89/events{/privacy}","received_events_url":"https://api.github.com/users/mosmith89/received_events","type":"User","site_admin":false},"committer":{"login":"web-flow","id":19864447,"node_id":"MDQ6VXNlcjE5ODY0NDQ3","avatar_url":"https://avatars3.githubusercontent.com/u/19864447?v=4","gravatar_id":"","url":"https://api.github.com/users/web-flow","html_url":"https://github.com/web-flow","followers_url":"https://api.github.com/users/web-flow/followers","following_url":"https://api.github.com/users/web-flow/following{/other_user}","gists_url":"https://api.github.com/users/web-flow/gists{/gist_id}","starred_url":"https://api.github.com/users/web-flow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/web-flow/subscriptions","organizations_url":"https://api.github.com/users/web-flow/orgs","repos_url":"https://api.github.com/users/web-flow/repos","events_url":"https://api.github.com/users/web-flow/events{/privacy}","received_events_url":"https://api.github.com/users/web-flow/received_events","type":"User","site_admin":false},"parents":[{"sha":"e6debd85e6ba30b3151d2d6610399f16093f4c0c","url":"https://api.github.com/repos/lolatravel/lola-server/commits/e6debd85e6ba30b3151d2d6610399f16093f4c0c","html_url":"https://github.com/lolatravel/lola-server/commit/e6debd85e6ba30b3151d2d6610399f16093f4c0c"}]},"status":"ahead","ahead_by":5,"behind_by":0,"total_commits":5,"commits":[{"sha":"c82d34c03ac21f60a838da8ab6daaf5113e0a060","node_id":"MDY6Q29tbWl0Mzk2NDUxNDQ6YzgyZDM0YzAzYWMyMWY2MGE4MzhkYThhYjZkYWFmNTExM2UwYTA2MA==","commit":{"author":{"name":"Joseph
        Kaming-Thanassi","email":"josephkamingthanassi@gmail.com","date":"2020-02-18T15:07:10Z"},"committer":{"name":"GitHub","email":"noreply@github.com","date":"2020-02-18T15:07:10Z"},"message":"[FLY-342]
        Add birthmonth node on traveler profile (#6126)\n\n* added birthmonth field\n\n*
        blackened files\n\n* added tests for new queries\n\n* blackened files","tree":{"sha":"6ca43018abd4834f7207f43445343bf97f98929d","url":"https://api.github.com/repos/lolatravel/lola-server/git/trees/6ca43018abd4834f7207f43445343bf97f98929d"},"url":"https://api.github.com/repos/lolatravel/lola-server/git/commits/c82d34c03ac21f60a838da8ab6daaf5113e0a060","comment_count":0,"verification":{"verified":true,"reason":"valid","signature":"-----BEGIN
        PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJeS/2eCRBK7hj4Ov3rIwAAdHIIADdntoWNUlDVYgc3/YDa5b1s\nGPQJoT+PKJZla1ePJgKEeGDkpqLvqOTn8z0vfIi3KSKidb9EVinu0cgw0GZetGGh\nXlIrzUwh/9pmoKVM1XQEB9U4+836ZUhjy9H+67ggRuTx0LjisUM6ircJxcZKV1SI\nT3DIbe8kVloIHDwpiiNitT4Lj32hkVbBTMzpZ1ZbsKFzqcvyYuLMbGsLpOLblOXR\ngXc+WiI650FOS90T6B/1PacPlKkCyfebGJxGzOkLAQbn2x7SGNIFUFADtX03QKeH\n2FJ0VQ/5pqbdmTrwEPUJn3LEWIWFvH8eS3eHWk+d/dVLToESiEA0aTvROfCoYW0=\n=rMJk\n-----END
        PGP SIGNATURE-----\n","payload":"tree 6ca43018abd4834f7207f43445343bf97f98929d\nparent
        c0c43ba0c86d876cbd881e1242965116753b2702\nauthor Joseph Kaming-Thanassi <josephkamingthanassi@gmail.com>
        1582038430 -0500\ncommitter GitHub <noreply@github.com> 1582038430 +0000\n\n[FLY-342]
        Add birthmonth node on traveler profile (#6126)\n\n* added birthmonth field\n\n*
        blackened files\n\n* added tests for new queries\n\n* blackened files\n"}},"url":"https://api.github.com/repos/lolatravel/lola-server/commits/c82d34c03ac21f60a838da8ab6daaf5113e0a060","html_url":"https://github.com/lolatravel/lola-server/commit/c82d34c03ac21f60a838da8ab6daaf5113e0a060","comments_url":"https://api.github.com/repos/lolatravel/lola-server/commits/c82d34c03ac21f60a838da8ab6daaf5113e0a060/comments","author":{"login":"JKThanassi","id":10533698,"node_id":"MDQ6VXNlcjEwNTMzNjk4","avatar_url":"https://avatars2.githubusercontent.com/u/10533698?v=4","gravatar_id":"","url":"https://api.github.com/users/JKThanassi","html_url":"https://github.com/JKThanassi","followers_url":"https://api.github.com/users/JKThanassi/followers","following_url":"https://api.github.com/users/JKThanassi/following{/other_user}","gists_url":"https://api.github.com/users/JKThanassi/gists{/gist_id}","starred_url":"https://api.github.com/users/JKThanassi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JKThanassi/subscriptions","organizations_url":"https://api.github.com/users/JKThanassi/orgs","repos_url":"https://api.github.com/users/JKThanassi/repos","events_url":"https://api.github.com/users/JKThanassi/events{/privacy}","received_events_url":"https://api.github.com/users/JKThanassi/received_events","type":"User","site_admin":false},"committer":{"login":"web-flow","id":19864447,"node_id":"MDQ6VXNlcjE5ODY0NDQ3","avatar_url":"https://avatars3.githubusercontent.com/u/19864447?v=4","gravatar_id":"","url":"https://api.github.com/users/web-flow","html_url":"https://github.com/web-flow","followers_url":"https://api.github.com/users/web-flow/followers","following_url":"https://api.github.com/users/web-flow/following{/other_user}","gists_url":"https://api.github.com/users/web-flow/gists{/gist_id}","starred_url":"https://api.github.com/users/web-flow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/web-flow/subscriptions","organizations_url":"https://api.github.com/users/web-flow/orgs","repos_url":"https://api.github.com/users/web-flow/repos","events_url":"https://api.github.com/users/web-flow/events{/privacy}","received_events_url":"https://api.github.com/users/web-flow/received_events","type":"User","site_admin":false},"parents":[{"sha":"c0c43ba0c86d876cbd881e1242965116753b2702","url":"https://api.github.com/repos/lolatravel/lola-server/commits/c0c43ba0c86d876cbd881e1242965116753b2702","html_url":"https://github.com/lolatravel/lola-server/commit/c0c43ba0c86d876cbd881e1242965116753b2702"}]},{"sha":"2bcbe2041f0ba169087a443a4d6d6841830de258","node_id":"MDY6Q29tbWl0Mzk2NDUxNDQ6MmJjYmUyMDQxZjBiYTE2OTA4N2E0NDNhNGQ2ZDY4NDE4MzBkZTI1OA==","commit":{"author":{"name":"Tiger","email":"32103740+maxvoltage@users.noreply.github.com","date":"2020-02-18T16:14:17Z"},"committer":{"name":"GitHub","email":"noreply@github.com","date":"2020-02-18T16:14:17Z"},"message":"[ST-671]
        post waiver to slack not task (#6128)","tree":{"sha":"215f92db12dfc096524686c12124513b14d2b48e","url":"https://api.github.com/repos/lolatravel/lola-server/git/trees/215f92db12dfc096524686c12124513b14d2b48e"},"url":"https://api.github.com/repos/lolatravel/lola-server/git/commits/2bcbe2041f0ba169087a443a4d6d6841830de258","comment_count":0,"verification":{"verified":true,"reason":"valid","signature":"-----BEGIN
        PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJeTA1ZCRBK7hj4Ov3rIwAAdHIIAHoJU+6LE8b5WDi/uMGwBPIq\nuoq+7dvXHdNvlwDtaHqmQ01XBh62Btr8+icdEQSIa6/uutNREhruT4MFrgh0QWBP\n5J1be9gkqoHMflOeY/DfiR551+rc3eV2Pond4uVper6zfG2XIYtzjiK69ngtsZl1\nz8+0NPUJ/PrGc2tdXCgppx89Nd+hQSZ2K+yuK17KLV6XkcnM79B2yXzoRzukEaVK\nYBjT2Qr5cclkdgaUcwc7kQgrxlJkkSGgp51NA6ISopJUPjjh9apLdCSJG9QRuo8B\nWXhaKQOLJVYc0xUNkPkdlQGWTgVtVVwL/F7PEUkfTkep7fvmtVtVXjDPyyYUXho=\n=LS98\n-----END
        PGP SIGNATURE-----\n","payload":"tree 215f92db12dfc096524686c12124513b14d2b48e\nparent
        c82d34c03ac21f60a838da8ab6daaf5113e0a060\nauthor Tiger <32103740+maxvoltage@users.noreply.github.com>
        1582042457 -0500\ncommitter GitHub <noreply@github.com> 1582042457 +0000\n\n[ST-671]
        post waiver to slack not task (#6128)\n\n"}},"url":"https://api.github.com/repos/lolatravel/lola-server/commits/2bcbe2041f0ba169087a443a4d6d6841830de258","html_url":"https://github.com/lolatravel/lola-server/commit/2bcbe2041f0ba169087a443a4d6d6841830de258","comments_url":"https://api.github.com/repos/lolatravel/lola-server/commits/2bcbe2041f0ba169087a443a4d6d6841830de258/comments","author":{"login":"maxvoltage","id":32103740,"node_id":"MDQ6VXNlcjMyMTAzNzQw","avatar_url":"https://avatars0.githubusercontent.com/u/32103740?v=4","gravatar_id":"","url":"https://api.github.com/users/maxvoltage","html_url":"https://github.com/maxvoltage","followers_url":"https://api.github.com/users/maxvoltage/followers","following_url":"https://api.github.com/users/maxvoltage/following{/other_user}","gists_url":"https://api.github.com/users/maxvoltage/gists{/gist_id}","starred_url":"https://api.github.com/users/maxvoltage/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maxvoltage/subscriptions","organizations_url":"https://api.github.com/users/maxvoltage/orgs","repos_url":"https://api.github.com/users/maxvoltage/repos","events_url":"https://api.github.com/users/maxvoltage/events{/privacy}","received_events_url":"https://api.github.com/users/maxvoltage/received_events","type":"User","site_admin":false},"committer":{"login":"web-flow","id":19864447,"node_id":"MDQ6VXNlcjE5ODY0NDQ3","avatar_url":"https://avatars3.githubusercontent.com/u/19864447?v=4","gravatar_id":"","url":"https://api.github.com/users/web-flow","html_url":"https://github.com/web-flow","followers_url":"https://api.github.com/users/web-flow/followers","following_url":"https://api.github.com/users/web-flow/following{/other_user}","gists_url":"https://api.github.com/users/web-flow/gists{/gist_id}","starred_url":"https://api.github.com/users/web-flow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/web-flow/subscriptions","organizations_url":"https://api.github.com/users/web-flow/orgs","repos_url":"https://api.github.com/users/web-flow/repos","events_url":"https://api.github.com/users/web-flow/events{/privacy}","received_events_url":"https://api.github.com/users/web-flow/received_events","type":"User","site_admin":false},"parents":[{"sha":"c82d34c03ac21f60a838da8ab6daaf5113e0a060","url":"https://api.github.com/repos/lolatravel/lola-server/commits/c82d34c03ac21f60a838da8ab6daaf5113e0a060","html_url":"https://github.com/lolatravel/lola-server/commit/c82d34c03ac21f60a838da8ab6daaf5113e0a060"}]},{"sha":"76ea18261da72f67727cf58a24aed2a5b91d5144","node_id":"MDY6Q29tbWl0Mzk2NDUxNDQ6NzZlYTE4MjYxZGE3MmY2NzcyN2NmNThhMjRhZWQyYTViOTFkNTE0NA==","commit":{"author":{"name":"mmcmahon","email":"matt.mcmahon@lola.com","date":"2020-02-18T17:08:46Z"},"committer":{"name":"mmcmahon","email":"matt.mcmahon@lola.com","date":"2020-02-18T17:48:54Z"},"message":"PLAT-337
        bugsnag logconfig fix\n\nIf bugsnag was turned on, the log config would crash\n\nblack
        formatting","tree":{"sha":"c846abaffdd5732322512274d5ee7bcd9c3d7ca9","url":"https://api.github.com/repos/lolatravel/lola-server/git/trees/c846abaffdd5732322512274d5ee7bcd9c3d7ca9"},"url":"https://api.github.com/repos/lolatravel/lola-server/git/commits/76ea18261da72f67727cf58a24aed2a5b91d5144","comment_count":0,"verification":{"verified":true,"reason":"valid","signature":"-----BEGIN
        PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEenDborWu/bnaqazODx9afZPtjxgFAl5MI4YACgkQDx9afZPt\njxgPog//dtIQbKgDozokIxymjHN9XfX6UxXszwE9X595SFQ+wEHjZ/3N5bUeB4OR\nZ98TXWN2He9pbjmtTXMh9VdyQlUdbTEqEPaTjF5PPuPwHAymsw+tTlF0yig5rIIv\nOoE9hhydPzFNDxmNe+NoGp5UaoYDVWGc3d2bowerPt+sAqO0VVaYI4GWR7EEqER1\n5st+uL9ovQgE5J9zlScrP4KDRBFU5HMt7vvT4tAL+BXnZsXwi7xkaYbDmJon/iB9\ncgQ3C8NubB0hITpwucuqMdk+q972yVj94Vb3L1OkrlLbWXNV2yWQ3asgjUdYvtQN\nkHZnphwOwjX4Ju/s1QaK6OK/a0y8y6vGx2DCaXhJrNVPkhr6+AOPonTU96GhIYnO\nrCfA3DiK/cTrq9JuDQUP0An11CyXfGze3OWivZ5U2Kx8GYb0TMVhVZAerbKliRzY\n0oMMmOEjQUfQwL282FOzsh/nbP+W4ExocKVasgVxMVvj5LQneqvsB1JDiyOATB+0\n53d52kgVbWZHb3H2v+FQsQHbsre4ZDU7slxmgII1cjOI9zgpAfzs/qmVnKanem/J\nnGNP+9ht0aKirGm/PXkcen9bniyjmQnBGGJoL1JA+5OY0EfK3ZRAZi4KevKRp8tH\noPM8RVBTcfpJTRJOpgjZAx9/A9NfLao+DTFNayrHmJtCN/yUoyc=\n=FohW\n-----END
        PGP SIGNATURE-----","payload":"tree c846abaffdd5732322512274d5ee7bcd9c3d7ca9\nparent
        2bcbe2041f0ba169087a443a4d6d6841830de258\nauthor mmcmahon <matt.mcmahon@lola.com>
        1582045726 -0500\ncommitter mmcmahon <matt.mcmahon@lola.com> 1582048134 -0500\n\nPLAT-337
        bugsnag logconfig fix\n\nIf bugsnag was turned on, the log config would crash\n\nblack
        formatting\n"}},"url":"https://api.github.com/repos/lolatravel/lola-server/commits/76ea18261da72f67727cf58a24aed2a5b91d5144","html_url":"https://github.com/lolatravel/lola-server/commit/76ea18261da72f67727cf58a24aed2a5b91d5144","comments_url":"https://api.github.com/repos/lolatravel/lola-server/commits/76ea18261da72f67727cf58a24aed2a5b91d5144/comments","author":{"login":"mmcmahon","id":383659,"node_id":"MDQ6VXNlcjM4MzY1OQ==","avatar_url":"https://avatars3.githubusercontent.com/u/383659?v=4","gravatar_id":"","url":"https://api.github.com/users/mmcmahon","html_url":"https://github.com/mmcmahon","followers_url":"https://api.github.com/users/mmcmahon/followers","following_url":"https://api.github.com/users/mmcmahon/following{/other_user}","gists_url":"https://api.github.com/users/mmcmahon/gists{/gist_id}","starred_url":"https://api.github.com/users/mmcmahon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mmcmahon/subscriptions","organizations_url":"https://api.github.com/users/mmcmahon/orgs","repos_url":"https://api.github.com/users/mmcmahon/repos","events_url":"https://api.github.com/users/mmcmahon/events{/privacy}","received_events_url":"https://api.github.com/users/mmcmahon/received_events","type":"User","site_admin":false},"committer":{"login":"mmcmahon","id":383659,"node_id":"MDQ6VXNlcjM4MzY1OQ==","avatar_url":"https://avatars3.githubusercontent.com/u/383659?v=4","gravatar_id":"","url":"https://api.github.com/users/mmcmahon","html_url":"https://github.com/mmcmahon","followers_url":"https://api.github.com/users/mmcmahon/followers","following_url":"https://api.github.com/users/mmcmahon/following{/other_user}","gists_url":"https://api.github.com/users/mmcmahon/gists{/gist_id}","starred_url":"https://api.github.com/users/mmcmahon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mmcmahon/subscriptions","organizations_url":"https://api.github.com/users/mmcmahon/orgs","repos_url":"https://api.github.com/users/mmcmahon/repos","events_url":"https://api.github.com/users/mmcmahon/events{/privacy}","received_events_url":"https://api.github.com/users/mmcmahon/received_events","type":"User","site_admin":false},"parents":[{"sha":"2bcbe2041f0ba169087a443a4d6d6841830de258","url":"https://api.github.com/repos/lolatravel/lola-server/commits/2bcbe2041f0ba169087a443a4d6d6841830de258","html_url":"https://github.com/lolatravel/lola-server/commit/2bcbe2041f0ba169087a443a4d6d6841830de258"}]},{"sha":"3047b60969d231f7e79217de479acbdb1c76c744","node_id":"MDY6Q29tbWl0Mzk2NDUxNDQ6MzA0N2I2MDk2OWQyMzFmN2U3OTIxN2RlNDc5YWNiZGIxYzc2Yzc0NA==","commit":{"author":{"name":"mmcmahon","email":"matt.mcmahon@lola.com","date":"2020-02-18T18:33:52Z"},"committer":{"name":"GitHub","email":"noreply@github.com","date":"2020-02-18T18:33:52Z"},"message":"Merge
        pull request #6130 from lolatravel/feature/20200218/PLAT-337-bugsnag_config_error\n\nPLAT-337
        bugsnag logconfig fix","tree":{"sha":"c846abaffdd5732322512274d5ee7bcd9c3d7ca9","url":"https://api.github.com/repos/lolatravel/lola-server/git/trees/c846abaffdd5732322512274d5ee7bcd9c3d7ca9"},"url":"https://api.github.com/repos/lolatravel/lola-server/git/commits/3047b60969d231f7e79217de479acbdb1c76c744","comment_count":0,"verification":{"verified":true,"reason":"valid","signature":"-----BEGIN
        PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJeTC4QCRBK7hj4Ov3rIwAAdHIIADgFLaU50u4pN/Cu9TW8K7pr\nLUTqXdCs8USzBa0EkhHm3F0xaSrjgALU8DoOrtifKmQaPgei2wIVJ1W8NwkXZ50x\n5GFuBQbsVUqDZoXt7c2CQMs0wSrvBeQLcBozlNjV5vQdtDLeVD9UoNI6cfVqtsog\n4qrBjqOLlkSWT9WDdgcIzCxh8OUhVKSXMTbj6lJeayl5bwSzT5Fx1/onSIK5OiVn\nn4CaR0VLAmAkrKz/Tc9JIg176UwdKOZpdHXkLrOf3Sy9zXOMwbdNjW3azqMFnWer\nP56/YFJMvCeLT4/uFc2kRNKau9QBC0qhx0gntxrBXU94a/qii9Aq609L4TkX3LE=\n=Ravu\n-----END
        PGP SIGNATURE-----\n","payload":"tree c846abaffdd5732322512274d5ee7bcd9c3d7ca9\nparent
        2bcbe2041f0ba169087a443a4d6d6841830de258\nparent 76ea18261da72f67727cf58a24aed2a5b91d5144\nauthor
        mmcmahon <matt.mcmahon@lola.com> 1582050832 -0500\ncommitter GitHub <noreply@github.com>
        1582050832 -0500\n\nMerge pull request #6130 from lolatravel/feature/20200218/PLAT-337-bugsnag_config_error\n\nPLAT-337
        bugsnag logconfig fix"}},"url":"https://api.github.com/repos/lolatravel/lola-server/commits/3047b60969d231f7e79217de479acbdb1c76c744","html_url":"https://github.com/lolatravel/lola-server/commit/3047b60969d231f7e79217de479acbdb1c76c744","comments_url":"https://api.github.com/repos/lolatravel/lola-server/commits/3047b60969d231f7e79217de479acbdb1c76c744/comments","author":{"login":"mmcmahon","id":383659,"node_id":"MDQ6VXNlcjM4MzY1OQ==","avatar_url":"https://avatars3.githubusercontent.com/u/383659?v=4","gravatar_id":"","url":"https://api.github.com/users/mmcmahon","html_url":"https://github.com/mmcmahon","followers_url":"https://api.github.com/users/mmcmahon/followers","following_url":"https://api.github.com/users/mmcmahon/following{/other_user}","gists_url":"https://api.github.com/users/mmcmahon/gists{/gist_id}","starred_url":"https://api.github.com/users/mmcmahon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mmcmahon/subscriptions","organizations_url":"https://api.github.com/users/mmcmahon/orgs","repos_url":"https://api.github.com/users/mmcmahon/repos","events_url":"https://api.github.com/users/mmcmahon/events{/privacy}","received_events_url":"https://api.github.com/users/mmcmahon/received_events","type":"User","site_admin":false},"committer":{"login":"web-flow","id":19864447,"node_id":"MDQ6VXNlcjE5ODY0NDQ3","avatar_url":"https://avatars3.githubusercontent.com/u/19864447?v=4","gravatar_id":"","url":"https://api.github.com/users/web-flow","html_url":"https://github.com/web-flow","followers_url":"https://api.github.com/users/web-flow/followers","following_url":"https://api.github.com/users/web-flow/following{/other_user}","gists_url":"https://api.github.com/users/web-flow/gists{/gist_id}","starred_url":"https://api.github.com/users/web-flow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/web-flow/subscriptions","organizations_url":"https://api.github.com/users/web-flow/orgs","repos_url":"https://api.github.com/users/web-flow/repos","events_url":"https://api.github.com/users/web-flow/events{/privacy}","received_events_url":"https://api.github.com/users/web-flow/received_events","type":"User","site_admin":false},"parents":[{"sha":"2bcbe2041f0ba169087a443a4d6d6841830de258","url":"https://api.github.com/repos/lolatravel/lola-server/commits/2bcbe2041f0ba169087a443a4d6d6841830de258","html_url":"https://github.com/lolatravel/lola-server/commit/2bcbe2041f0ba169087a443a4d6d6841830de258"},{"sha":"76ea18261da72f67727cf58a24aed2a5b91d5144","url":"https://api.github.com/repos/lolatravel/lola-server/commits/76ea18261da72f67727cf58a24aed2a5b91d5144","html_url":"https://github.com/lolatravel/lola-server/commit/76ea18261da72f67727cf58a24aed2a5b91d5144"}]},{"sha":"3cb7e431258000ddfd648e650787e51ffe87760e","node_id":"MDY6Q29tbWl0Mzk2NDUxNDQ6M2NiN2U0MzEyNTgwMDBkZGZkNjQ4ZTY1MDc4N2U1MWZmZTg3NzYwZQ==","commit":{"author":{"name":"Jeremy
        Dormitzer","email":"jeremydormitzer@lola.com","date":"2020-02-18T18:55:06Z"},"committer":{"name":"GitHub","email":"noreply@github.com","date":"2020-02-18T18:55:06Z"},"message":"[PLAT-338]
        Use the current timestamp for random id values (#6132)\n\n* Use the current
        timestamp for random id values\n\n* Use current timestamp and random id list
        to prevent milli-collisions","tree":{"sha":"8f2b0756a98c2fcd761f09e9fa000ffbd2ca5da5","url":"https://api.github.com/repos/lolatravel/lola-server/git/trees/8f2b0756a98c2fcd761f09e9fa000ffbd2ca5da5"},"url":"https://api.github.com/repos/lolatravel/lola-server/git/commits/3cb7e431258000ddfd648e650787e51ffe87760e","comment_count":0,"verification":{"verified":true,"reason":"valid","signature":"-----BEGIN
        PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJeTDMKCRBK7hj4Ov3rIwAAdHIIAEdXp1ZD6A1CZmqVTUpCh3m6\nGGTpEWeCCgJsq9Gd/Ej2BxU7BmAf/TmOT0neB8YXuCWISrrsH6SWGfD3gj9+zgH7\n7MBpfdauO5OFFHKGhmYNkM7/MCCHO6e03lGlCk2K//7d6YLj04o+Xxpt8VHIkZth\nd+1/mUfIGO3dRgeWhGW7NU1bi3GsA5pTlbPbmAr6yfkxLmggCMOpUvSv14/GeerA\naAb1llbrFPOxtSotsJVu9a1QzktcNP8+631UKtvt1/vjgJ2/3/2Q6ZIF9X2YZAD+\nHucImexflFR6q9A7/KduXVqWYuAp2f7qpy0/D6vdx/AvurK62evhi09Au6zosvs=\n=SO3k\n-----END
        PGP SIGNATURE-----\n","payload":"tree 8f2b0756a98c2fcd761f09e9fa000ffbd2ca5da5\nparent
        3047b60969d231f7e79217de479acbdb1c76c744\nauthor Jeremy Dormitzer <jeremydormitzer@lola.com>
        1582052106 -0500\ncommitter GitHub <noreply@github.com> 1582052106 +0000\n\n[PLAT-338]
        Use the current timestamp for random id values (#6132)\n\n* Use the current
        timestamp for random id values\n\n* Use current timestamp and random id list
        to prevent milli-collisions\n"}},"url":"https://api.github.com/repos/lolatravel/lola-server/commits/3cb7e431258000ddfd648e650787e51ffe87760e","html_url":"https://github.com/lolatravel/lola-server/commit/3cb7e431258000ddfd648e650787e51ffe87760e","comments_url":"https://api.github.com/repos/lolatravel/lola-server/commits/3cb7e431258000ddfd648e650787e51ffe87760e/comments","author":{"login":"jdormit","id":6351890,"node_id":"MDQ6VXNlcjYzNTE4OTA=","avatar_url":"https://avatars1.githubusercontent.com/u/6351890?v=4","gravatar_id":"","url":"https://api.github.com/users/jdormit","html_url":"https://github.com/jdormit","followers_url":"https://api.github.com/users/jdormit/followers","following_url":"https://api.github.com/users/jdormit/following{/other_user}","gists_url":"https://api.github.com/users/jdormit/gists{/gist_id}","starred_url":"https://api.github.com/users/jdormit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdormit/subscriptions","organizations_url":"https://api.github.com/users/jdormit/orgs","repos_url":"https://api.github.com/users/jdormit/repos","events_url":"https://api.github.com/users/jdormit/events{/privacy}","received_events_url":"https://api.github.com/users/jdormit/received_events","type":"User","site_admin":false},"committer":{"login":"web-flow","id":19864447,"node_id":"MDQ6VXNlcjE5ODY0NDQ3","avatar_url":"https://avatars3.githubusercontent.com/u/19864447?v=4","gravatar_id":"","url":"https://api.github.com/users/web-flow","html_url":"https://github.com/web-flow","followers_url":"https://api.github.com/users/web-flow/followers","following_url":"https://api.github.com/users/web-flow/following{/other_user}","gists_url":"https://api.github.com/users/web-flow/gists{/gist_id}","starred_url":"https://api.github.com/users/web-flow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/web-flow/subscriptions","organizations_url":"https://api.github.com/users/web-flow/orgs","repos_url":"https://api.github.com/users/web-flow/repos","events_url":"https://api.github.com/users/web-flow/events{/privacy}","received_events_url":"https://api.github.com/users/web-flow/received_events","type":"User","site_admin":false},"parents":[{"sha":"3047b60969d231f7e79217de479acbdb1c76c744","url":"https://api.github.com/repos/lolatravel/lola-server/commits/3047b60969d231f7e79217de479acbdb1c76c744","html_url":"https://github.com/lolatravel/lola-server/commit/3047b60969d231f7e79217de479acbdb1c76c744"}]}],"files":[{"sha":"e9affacd44154a61d4a8b0088064bc69bd8355bf","filename":"lola_logging/bugsnag_handler.py","status":"renamed","additions":4,"deletions":6,"changes":10,"blob_url":"https://github.com/lolatravel/lola-server/blob/3cb7e431258000ddfd648e650787e51ffe87760e/lola_logging/bugsnag_handler.py","raw_url":"https://github.com/lolatravel/lola-server/raw/3cb7e431258000ddfd648e650787e51ffe87760e/lola_logging/bugsnag_handler.py","contents_url":"https://api.github.com/repos/lolatravel/lola-server/contents/lola_logging/bugsnag_handler.py?ref=3cb7e431258000ddfd648e650787e51ffe87760e","patch":"@@
        -23,15 +23,13 @@ def add_handler_config(handlers=None):\n         :return:\n         \"\"\"\n         handlers
        = handlers or {}\n-        if not Configuration.BUGSNAG_API_KEY:\n-            return\n-        handlers.update(\n-            {\n-                \"class\":
        \"logging.bugsang_handler.LolaBugsnagHandler\",\n+        if Configuration.BUGSNAG_API_KEY:\n+            handlers[\"bugsnag\"]
        = {\n+                \"class\": \"lola_logging.bugsnag_handler.LolaBugsnagHandler\",\n                 \"formatter\":
        \"standard\",\n                 \"level\": \"ERROR\",\n             }\n-        )\n+        return
        handlers\n \n     def __init__(self):\n         bugsnag_config = BugsnagConfiguration()","previous_filename":"lola_logging/bugsang_handler.py"},{"sha":"87583fa4eed6ebdfa963378c64b2faabbad9b026","filename":"lola_logging/config.py","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/lolatravel/lola-server/blob/3cb7e431258000ddfd648e650787e51ffe87760e/lola_logging/config.py","raw_url":"https://github.com/lolatravel/lola-server/raw/3cb7e431258000ddfd648e650787e51ffe87760e/lola_logging/config.py","contents_url":"https://api.github.com/repos/lolatravel/lola-server/contents/lola_logging/config.py?ref=3cb7e431258000ddfd648e650787e51ffe87760e","patch":"@@
        -39,7 +39,7 @@ def config(env):\n         }\n         default_handlers.append(\"console\")\n
        \n-        LolaBugsnagHandler.add_handler_config(lola_handlers)\n+        lola_handlers
        = LolaBugsnagHandler.add_handler_config(lola_handlers)\n         all_handlers
        = lola_handlers.keys()\n \n         # configure python loggers"},{"sha":"e063b8457bda5e4b1c3f256f9af76af65daeb64e","filename":"server/services/console/lumo/special_alert_bot.py","status":"modified","additions":0,"deletions":3,"changes":3,"blob_url":"https://github.com/lolatravel/lola-server/blob/3cb7e431258000ddfd648e650787e51ffe87760e/server/services/console/lumo/special_alert_bot.py","raw_url":"https://github.com/lolatravel/lola-server/raw/3cb7e431258000ddfd648e650787e51ffe87760e/server/services/console/lumo/special_alert_bot.py","contents_url":"https://api.github.com/repos/lolatravel/lola-server/contents/server/services/console/lumo/special_alert_bot.py?ref=3cb7e431258000ddfd648e650787e51ffe87760e","patch":"@@
        -3,8 +3,6 @@\n import structlog\n from random import randint\n \n-from server.worker
        import console_bot_queue\n-from server.worker.celery_config import lola_task\n
        from lola.utils.injection import injector\n from lola.utils.config import
        LolaEnv\n \n@@ -13,7 +11,6 @@\n WAIVER_BOOKING_LIST_ENDPOINT = \"/api/console/v1/download/waiver\"\n
        \n \n-@lola_task(console_bot_queue)\n def post_waiver_to_slack(booking_id,
        waiver):\n     log = logger.bind(booking_id=booking_id, waiver_id=waiver.id)\n
        "},{"sha":"27d1d533dee8bfb8396b9f3342c470f7b48d9c32","filename":"server/services/graphql/nodes/traveler_profile.py","status":"modified","additions":13,"deletions":2,"changes":15,"blob_url":"https://github.com/lolatravel/lola-server/blob/3cb7e431258000ddfd648e650787e51ffe87760e/server/services/graphql/nodes/traveler_profile.py","raw_url":"https://github.com/lolatravel/lola-server/raw/3cb7e431258000ddfd648e650787e51ffe87760e/server/services/graphql/nodes/traveler_profile.py","contents_url":"https://api.github.com/repos/lolatravel/lola-server/contents/server/services/graphql/nodes/traveler_profile.py?ref=3cb7e431258000ddfd648e650787e51ffe87760e","patch":"@@
        -65,6 +65,10 @@ class TravelerProfileFields(object):\n         description=\"The
        birth year of the traveler specified on their travel ID.\"\n     )\n \n+    birthmonth
        = Int(\n+        description=\"The birth month of the traveler specified on
        their travel ID\"\n+    )\n+\n     phone = String(description=\"An alternative
        phone number for this profile.\")\n     confirmation_email = String(\n         description=\"An
        alternative email to send booking confirmations to.\"\n@@ -190,7 +194,8 @@
        class TravelerProfile(ObjectType, TravelerProfileFields):\n     )\n \n     is_under_25
        = Boolean(\n-        description=\"whether or not the traveler is under 25.
        This is based on month and year only\"\n+        description=\"whether or
        not the traveler is under 25. This is based on month and year only\",\n+        deprecation_reason=\"Use
        the birthmonth and birthyear fields to do age calculation on the frontend\",\n     )\n
        \n     can_edit = Boolean(description=\"The current user has access to edit
        this profile\")\n@@ -213,7 +218,6 @@ class TravelerProfile(ObjectType, TravelerProfileFields):\n     resolve_middle_name
        = resolve_if_editable_by_user()\n     resolve_last_name = resolve_if_editable_by_user()\n     resolve_birthdate
        = resolve_if_editable_by_user()\n-    resolve_birthyear = resolve_if_editable_by_user()\n     resolve_phone
        = resolve_if_editable_by_user()\n     resolve_confirmation_email = resolve_if_editable_by_user()\n     resolve_passport_expiration
        = resolve_if_editable_by_user()\n@@ -334,6 +338,13 @@ def resolve_is_under_25(source,
        info):\n             source.birthdate.month, source.birthdate.year\n         )\n
        \n+    def resolve_birthmonth(source, info):\n+        return source.birthdate.month\n+\n+    def
        resolve_birthyear(source, info):\n+        # not using source.birthyear because
        it is an unused column in the DB\n+        return source.birthdate.year\n+\n     @lola_inject(ulp_by_tp_loader=UserLoyaltyProgramsByTravelerProfileLoader)\n     def
        resolve_loyalty_programs(source, info, ids=None, ulp_by_tp_loader=None):\n         def
        filter_by_id(ulps):"},{"sha":"ec456e8b915ffb06fe5ad41f00381f703e629016","filename":"server/web/rest/console/v1/webhook/lumo_alert.py","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/lolatravel/lola-server/blob/3cb7e431258000ddfd648e650787e51ffe87760e/server/web/rest/console/v1/webhook/lumo_alert.py","raw_url":"https://github.com/lolatravel/lola-server/raw/3cb7e431258000ddfd648e650787e51ffe87760e/server/web/rest/console/v1/webhook/lumo_alert.py","contents_url":"https://api.github.com/repos/lolatravel/lola-server/contents/server/web/rest/console/v1/webhook/lumo_alert.py?ref=3cb7e431258000ddfd648e650787e51ffe87760e","patch":"@@
        -92,7 +92,7 @@ def lumo_alert():\n                     waiver = save_special_alert(alert,
        overwrite)\n                     assoc = save_association(booking_id, waiver,
        overwrite)\n                 if assoc:\n-                    post_waiver_to_slack.delay(booking_id,
        waiver)\n+                    post_waiver_to_slack(booking_id, waiver)\n         LUMO_REQUEST_COUNTER.labels(\n             status=\"success\",
        message=\"success\", alert_type=alert_type\n         ).inc()"},{"sha":"f0d801330348872edee7ffa93b766ab38a441f9f","filename":"tests/helpers/general_utils.py","status":"modified","additions":4,"deletions":2,"changes":6,"blob_url":"https://github.com/lolatravel/lola-server/blob/3cb7e431258000ddfd648e650787e51ffe87760e/tests/helpers/general_utils.py","raw_url":"https://github.com/lolatravel/lola-server/raw/3cb7e431258000ddfd648e650787e51ffe87760e/tests/helpers/general_utils.py","contents_url":"https://api.github.com/repos/lolatravel/lola-server/contents/tests/helpers/general_utils.py?ref=3cb7e431258000ddfd648e650787e51ffe87760e","patch":"@@
        -1,16 +1,18 @@\n from __future__ import absolute_import\n+\n+import time\n
        import random\n from functools import wraps\n \n from nose.tools import nottest\n
        \n-_id_repository = range(1, 100001)\n+_id_repository = list(range(1, 100001))\n
        random.shuffle(_id_repository)\n \n \n @nottest\n def get_unused_int():\n-    return
        _id_repository.pop()\n+    return int(round(time.time() * 1000)) + _id_repository.pop()\n
        \n \n @nottest"},{"sha":"2b6aeeaf4002b145c4240e6fc9b81a60dd0ff2c5","filename":"tests/server/services/graphql/queries/test_traveler_profile.py","status":"modified","additions":128,"deletions":0,"changes":128,"blob_url":"https://github.com/lolatravel/lola-server/blob/3cb7e431258000ddfd648e650787e51ffe87760e/tests/server/services/graphql/queries/test_traveler_profile.py","raw_url":"https://github.com/lolatravel/lola-server/raw/3cb7e431258000ddfd648e650787e51ffe87760e/tests/server/services/graphql/queries/test_traveler_profile.py","contents_url":"https://api.github.com/repos/lolatravel/lola-server/contents/tests/server/services/graphql/queries/test_traveler_profile.py?ref=3cb7e431258000ddfd648e650787e51ffe87760e","patch":"@@
        -83,6 +83,27 @@ def _traveler_profile_query(id, user_id=None):\n     }\n \n
        \n+def _birthmonth_query(id, user_id=None):\n+    query_params = (\n+        ''id:
        \"{}\", user_id: \"{}\"''.format(id, user_id)\n+        if user_id\n+        else
        \"id: {}\".format(id)\n+    )\n+\n+    return {\n+        \"query\": \"\"\"\n+      query
        TestGetTravelerProfile {{\n+        traveler_profile({}) {{\n+          birthmonth,\n+          birthyear\n+        }}\n+      }}\n+    \"\"\".format(\n+            query_params\n+        )\n+    }\n+\n+\n
        def _u25_query(id, user_id=None):\n     query_params = (\n         ''id: \"{}\",
        user_id: \"{}\"''.format(id, user_id)\n@@ -570,6 +591,113 @@ def test_traveler_profile_query():\n     )\n
        \n \n+@with_setup(setup_mocks, teardown_mocks)\n+def test_birthmonth_birthyear_nodes():\n+    (\n+        group,\n+        user_agent,\n+        user_admin,\n+        user_employee_with_traveler_profile_1,\n+        user_employee_with_traveler_profile_2,\n+        user_employee_no_related_profile,\n+        user_not_in_group,\n+    )
        = build_user_and_group_scaffold()\n+\n+    tp_over_25_birthdate = (datetime.utcnow()
        - timedelta(days=400 * 365)).date()\n+\n+    with authenticated_user(user_employee_with_traveler_profile_2):\n+        result,
        errors = execute_query(\n+            _create_traveler_profile_mutation(\n+                user_employee_with_traveler_profile_2.id,\n+                profile_name=\"traveler_profile_two\",\n+                first_name=\"Traveler\",\n+                middle_name=\"Profile\",\n+                last_name=\"Two\",\n+                gender=Gender.FEMALE,\n+                phone=\"+16172331980\",\n+                birthdate=tp_over_25_birthdate,\n+                confirmation_email=\"traveler_one@mail.com\",\n+                is_owning_user=True,\n+                passport_country=ISOCountryCode.US,\n+                passport_expiration=tp_over_25_birthdate,\n+                passport_number=\"12345\",\n+                redress_number=\"1234567\",\n+                known_traveler_number=\"aktn\",\n+            )\n+        )\n+        assert_equals(result.errors,
        None)\n+\n+    traveler_profile_2 = result.data[\"create_traveler_profile\"][\"traveler_profile\"]\n+\n+    traveler_profile_2_json
        = {\n+        \"traveler_profile\": {\n+            \"birthmonth\": tp_over_25_birthdate.month,\n+            \"birthyear\":
        tp_over_25_birthdate.year,\n+        }\n+    }\n+\n+    # Ensure that when
        users attempt to query for traveler profiles, they only get traveler profiles
        that\n+    # belong to the queried user.  Also ensure that users in group
        can access traveler profiles of other users\n+    # in that group.\n+\n+    #
        This check and the next are for a user that is in group, but doesn''t have
        a TP.  They should be able to access TPs\n+    # for other users that are
        in group.\n+    with authenticated_user(user_employee_no_related_profile):\n+        result,
        errors = execute_query(\n+            _birthmonth_query(\n+                traveler_profile_2[\"id\"],\n+                user_id=user_employee_with_traveler_profile_2.id,\n+            )\n+        )\n+\n+    assert_equals(None,
        result.errors)\n+    assert_norm_dict_equal(traveler_profile_2_json, result.data)\n+\n+    #
        Ensure that a user that is not in that group, can not access a user''s TP\n+    with
        authenticated_user(user_not_in_group):\n+        result, errors = execute_query(\n+            _birthmonth_query(\n+                traveler_profile_2[\"id\"],\n+                user_id=user_employee_with_traveler_profile_2.id,\n+            )\n+        )\n+    assert_equals(None,
        result.errors)\n+    assert_norm_dict_equal({\"traveler_profile\": None},
        result.data)\n+\n+    # Admins should be able to see all info for a travel
        that is in group, including any and all PII\n+    with authenticated_user(user_admin):\n+        result,
        errors = execute_query(\n+            _birthmonth_query(\n+                traveler_profile_2[\"id\"],\n+                user_id=user_employee_with_traveler_profile_2.id,\n+            )\n+        )\n+    assert_equals(None,
        result.errors)\n+    assert_norm_dict_equal(traveler_profile_2_json, result.data)\n+\n+    #
        Agents (aka wombats) should be able to see all info (including PII) for any
        user.\n+    with authenticated_user(user_agent):\n+        result, errors
        = execute_query(\n+            _birthmonth_query(\n+                traveler_profile_2[\"id\"],\n+                user_id=user_employee_with_traveler_profile_2.id,\n+            )\n+        )\n+    assert_equals(None,
        result.errors)\n+    assert_norm_dict_equal(traveler_profile_2_json, result.data)\n+\n+    #
        A user who is looking for their own traveler profile should be able to see
        everything (including PII)\n+    with authenticated_user(user_employee_with_traveler_profile_1):\n+        result,
        errors = execute_query(\n+            _birthmonth_query(\n+                traveler_profile_2[\"id\"],\n+                user_id=user_employee_with_traveler_profile_2.id,\n+            )\n+        )\n+    assert_equals(None,
        result.errors)\n+    assert_norm_dict_equal(traveler_profile_2_json, result.data)\n+\n+\n
        @with_setup(setup_mocks, teardown_mocks)\n def test_traveler_profiles_query():\n     assert_dict_equal.__self__.maxDiff
        = 5000"}]}'
    headers:
      Access-Control-Allow-Origin: '*'
      Access-Control-Expose-Headers: ETag, Link, Location, Retry-After, X-GitHub-OTP,
        X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset, X-OAuth-Scopes,
        X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type, Deprecation,
        Sunset
      Cache-Control: private, max-age=60, s-maxage=60
      Content-Encoding: gzip
      Content-Security-Policy: default-src 'none'
      Content-Type: application/json; charset=utf-8
      Date: Thu, 05 Mar 2020 13:39:58 GMT
      ETag: W/"0d335ce1b8b79a2d551d9df4a28a01fe"
      Last-Modified: Tue, 18 Feb 2020 18:55:06 GMT
      Referrer-Policy: origin-when-cross-origin, strict-origin-when-cross-origin
      Server: GitHub.com
      Status: 200 OK
      Strict-Transport-Security: max-age=31536000; includeSubdomains; preload
      Transfer-Encoding: chunked
      Vary: Accept-Encoding, Accept, X-Requested-With
      X-Accepted-OAuth-Scopes: ''
      X-Content-Type-Options: nosniff
      X-Frame-Options: deny
      X-GitHub-Media-Type: github.v3; format=json
      X-GitHub-Request-Id: C591:776C:3D61AF:94F070:5E61012D
      X-OAuth-Scopes: repo
      X-RateLimit-Limit: '5000'
      X-RateLimit-Remaining: '4841'
      X-RateLimit-Reset: '1583418082'
      X-XSS-Protection: 1; mode=block
    status:
      code: 200
      message: OK
    url: https://api.github.com/repos/lolatravel/lola-server/compare/c0c43ba0c86d876cbd881e1242965116753b2702...3cb7e431258000ddfd648e650787e51ffe87760e
version: 1
