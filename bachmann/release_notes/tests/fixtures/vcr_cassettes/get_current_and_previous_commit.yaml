interactions:
- request:
    body: null
    headers:
      Accept:
      - application/json
      Content-Type:
      - application/json
      User-Agent:
      - Swagger-Codegen/10.0.1/python
    method: GET
    uri: https://api.pkc.lola.com/apis/apps/v1/namespaces/core-services/replicasets?labelSelector=app%3Dlola-server&watch=False
  response:
    body:
      string: '{"kind":"ReplicaSetList","apiVersion":"apps/v1","metadata":{"selfLink":"/apis/apps/v1/namespaces/core-services/replicasets","resourceVersion":"104866553"},"items":[{"metadata":{"name":"lola-server-bop-worker-65cd6bbbc9","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-bop-worker-65cd6bbbc9","uid":"bfbee656-604f-4e3e-9806-2df1a3f22e5c","resourceVersion":"102503703","generation":4,"creationTimestamp":"2020-02-27T17:15:31Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"65cd6bbbc9","worker":"celery"},"annotations":{"deployment.kubernetes.io/desired-replicas":"2","deployment.kubernetes.io/max-replicas":"3","deployment.kubernetes.io/revision":"92","sumologic.com/sourceCategory":"/prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-bop-worker","uid":"025fdba9-9818-4334-80de-d22a1dc23198","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":0,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"65cd6bbbc9"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"65cd6bbbc9","worker":"celery"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"/prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}},{"name":"prometheus-metrics-db","emptyDir":{}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:49c24ed","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"bop-worker","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:49c24ed","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        python bin/start_celery_worker.py -n travel_worker@%h -P gevent --concurrency
        1 -Q lola.bop"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"varlogbus","mountPath":"/var/log/bus"},{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"},{"name":"metrics-sidecar","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:49c24ed","command":["/bin/bash"],"args":["-c","gunicorn
        -c server/web/gunicorn_metrics.conf.py bin.start_metric_web:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7400,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"1Gi"},"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"livenessProbe":{"httpGet":{"path":"/metrics","port":"http","scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"affinity":{"podAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":55,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}}]},"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["harrison"]}]},"topologyKey":"kubernetes.io/hostname"}}]}},"schedulerName":"default-scheduler"}}},"status":{"replicas":0,"observedGeneration":4}},{"metadata":{"name":"lola-server-bop-worker-69c84b6859","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-bop-worker-69c84b6859","uid":"f8b5f35c-e8f8-4359-bfa1-ea904422ba69","resourceVersion":"104513480","generation":4,"creationTimestamp":"2020-03-04T15:34:43Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"69c84b6859","worker":"celery"},"annotations":{"deployment.kubernetes.io/desired-replicas":"2","deployment.kubernetes.io/max-replicas":"3","deployment.kubernetes.io/revision":"96","sumologic.com/sourceCategory":"/prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-bop-worker","uid":"025fdba9-9818-4334-80de-d22a1dc23198","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":0,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"69c84b6859"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"69c84b6859","worker":"celery"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"/prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}},{"name":"prometheus-metrics-db","emptyDir":{}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:8bb1c4a","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"bop-worker","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:8bb1c4a","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        python bin/start_celery_worker.py -n travel_worker@%h -P gevent --concurrency
        1 -Q lola.bop"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"varlogbus","mountPath":"/var/log/bus"},{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"},{"name":"metrics-sidecar","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:8bb1c4a","command":["/bin/bash"],"args":["-c","gunicorn
        -c server/web/gunicorn_metrics.conf.py bin.start_metric_web:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7400,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"1Gi"},"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"livenessProbe":{"httpGet":{"path":"/metrics","port":"http","scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"affinity":{"podAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":55,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}}]},"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["harrison"]}]},"topologyKey":"kubernetes.io/hostname"}}]}},"schedulerName":"default-scheduler"}}},"status":{"replicas":0,"observedGeneration":4}},{"metadata":{"name":"lola-server-bop-worker-6d64cd9b78","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-bop-worker-6d64cd9b78","uid":"f1f6dc33-3404-49bd-b350-0f40530045d2","resourceVersion":"104513707","generation":2,"creationTimestamp":"2020-03-04T17:08:32Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"6d64cd9b78","worker":"celery"},"annotations":{"deployment.kubernetes.io/desired-replicas":"2","deployment.kubernetes.io/max-replicas":"3","deployment.kubernetes.io/revision":"97","sumologic.com/sourceCategory":"prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-bop-worker","uid":"025fdba9-9818-4334-80de-d22a1dc23198","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":2,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"6d64cd9b78"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"6d64cd9b78","worker":"celery"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}},{"name":"prometheus-metrics-db","emptyDir":{}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:5427252","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"bop-worker","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:5427252","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        python bin/start_celery_worker.py -n travel_worker@%h -P gevent --concurrency
        1 -Q lola.bop"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"varlogbus","mountPath":"/var/log/bus"},{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"},{"name":"metrics-sidecar","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:5427252","command":["/bin/bash"],"args":["-c","gunicorn
        -c server/web/gunicorn_metrics.conf.py bin.start_metric_web:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7400,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"1Gi"},"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"livenessProbe":{"httpGet":{"path":"/metrics","port":"http","scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"affinity":{"podAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":55,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}}]},"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["harrison"]}]},"topologyKey":"kubernetes.io/hostname"}}]}},"schedulerName":"default-scheduler"}}},"status":{"replicas":2,"fullyLabeledReplicas":2,"readyReplicas":2,"availableReplicas":2,"observedGeneration":2}},{"metadata":{"name":"lola-server-bop-worker-77bd6cf9b8","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-bop-worker-77bd6cf9b8","uid":"6fe0600f-9023-4723-a020-ab302c57bf36","resourceVersion":"104077297","generation":4,"creationTimestamp":"2020-03-02T16:34:46Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"77bd6cf9b8","worker":"celery"},"annotations":{"deployment.kubernetes.io/desired-replicas":"2","deployment.kubernetes.io/max-replicas":"3","deployment.kubernetes.io/revision":"94","sumologic.com/sourceCategory":"/prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-bop-worker","uid":"025fdba9-9818-4334-80de-d22a1dc23198","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":0,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"77bd6cf9b8"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"77bd6cf9b8","worker":"celery"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"/prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}},{"name":"prometheus-metrics-db","emptyDir":{}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:ce6dfae","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"bop-worker","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:ce6dfae","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        python bin/start_celery_worker.py -n travel_worker@%h -P gevent --concurrency
        1 -Q lola.bop"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"varlogbus","mountPath":"/var/log/bus"},{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"},{"name":"metrics-sidecar","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:ce6dfae","command":["/bin/bash"],"args":["-c","gunicorn
        -c server/web/gunicorn_metrics.conf.py bin.start_metric_web:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7400,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"1Gi"},"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"livenessProbe":{"httpGet":{"path":"/metrics","port":"http","scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"affinity":{"podAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":55,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}}]},"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["harrison"]}]},"topologyKey":"kubernetes.io/hostname"}}]}},"schedulerName":"default-scheduler"}}},"status":{"replicas":0,"observedGeneration":4}},{"metadata":{"name":"lola-server-bop-worker-7d64bbd6d6","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-bop-worker-7d64bbd6d6","uid":"69eab605-5423-4a74-9683-be42bfbb1eb6","resourceVersion":"104484779","generation":4,"creationTimestamp":"2020-03-03T15:24:39Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"7d64bbd6d6","worker":"celery"},"annotations":{"deployment.kubernetes.io/desired-replicas":"2","deployment.kubernetes.io/max-replicas":"3","deployment.kubernetes.io/revision":"95","sumologic.com/sourceCategory":"/prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-bop-worker","uid":"025fdba9-9818-4334-80de-d22a1dc23198","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":0,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"7d64bbd6d6"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"7d64bbd6d6","worker":"celery"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"/prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}},{"name":"prometheus-metrics-db","emptyDir":{}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:ddb3eea","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"bop-worker","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:ddb3eea","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        python bin/start_celery_worker.py -n travel_worker@%h -P gevent --concurrency
        1 -Q lola.bop"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"varlogbus","mountPath":"/var/log/bus"},{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"},{"name":"metrics-sidecar","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:ddb3eea","command":["/bin/bash"],"args":["-c","gunicorn
        -c server/web/gunicorn_metrics.conf.py bin.start_metric_web:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7400,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"1Gi"},"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"livenessProbe":{"httpGet":{"path":"/metrics","port":"http","scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"affinity":{"podAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":55,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}}]},"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["harrison"]}]},"topologyKey":"kubernetes.io/hostname"}}]}},"schedulerName":"default-scheduler"}}},"status":{"replicas":0,"observedGeneration":4}},{"metadata":{"name":"lola-server-bop-worker-8647d6678","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-bop-worker-8647d6678","uid":"030d9a94-79e5-4c05-a531-6630c65c6f29","resourceVersion":"103696378","generation":4,"creationTimestamp":"2020-02-28T15:49:28Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"8647d6678","worker":"celery"},"annotations":{"deployment.kubernetes.io/desired-replicas":"2","deployment.kubernetes.io/max-replicas":"3","deployment.kubernetes.io/revision":"93","sumologic.com/sourceCategory":"/prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-bop-worker","uid":"025fdba9-9818-4334-80de-d22a1dc23198","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":0,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"8647d6678"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"8647d6678","worker":"celery"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"/prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}},{"name":"prometheus-metrics-db","emptyDir":{}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:12fb472","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"bop-worker","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:12fb472","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        python bin/start_celery_worker.py -n travel_worker@%h -P gevent --concurrency
        1 -Q lola.bop"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"varlogbus","mountPath":"/var/log/bus"},{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"},{"name":"metrics-sidecar","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:12fb472","command":["/bin/bash"],"args":["-c","gunicorn
        -c server/web/gunicorn_metrics.conf.py bin.start_metric_web:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7400,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"1Gi"},"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"livenessProbe":{"httpGet":{"path":"/metrics","port":"http","scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"affinity":{"podAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":55,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}}]},"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["harrison"]}]},"topologyKey":"kubernetes.io/hostname"}}]}},"schedulerName":"default-scheduler"}}},"status":{"replicas":0,"observedGeneration":4}},{"metadata":{"name":"lola-server-celery-worker-55b6b94bdd","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-celery-worker-55b6b94bdd","uid":"38c92b65-3054-4daf-b8b3-f06d214e1896","resourceVersion":"104484761","generation":4,"creationTimestamp":"2020-03-03T15:24:39Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"55b6b94bdd","worker":"celery"},"annotations":{"deployment.kubernetes.io/desired-replicas":"2","deployment.kubernetes.io/max-replicas":"3","deployment.kubernetes.io/revision":"95","sumologic.com/sourceCategory":"/prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-celery-worker","uid":"6fdf0fa8-e188-4812-b634-f1b51866cce8","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":0,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"55b6b94bdd"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"55b6b94bdd","worker":"celery"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"/prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}},{"name":"prometheus-metrics-db","emptyDir":{}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:ddb3eea","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"celery-worker","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:ddb3eea","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        python bin/start_celery_worker.py -n celery_worker@%h -P gevent --concurrency
        20 -Q lola.messaging,lola.images,lola.elasticindex"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"varlogbus","mountPath":"/var/log/bus"},{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"},{"name":"metrics-sidecar","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:ddb3eea","command":["/bin/bash"],"args":["-c","gunicorn
        -c server/web/gunicorn_metrics.conf.py bin.start_metric_web:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7400,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"1Gi"},"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"livenessProbe":{"httpGet":{"path":"/metrics","port":"http","scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"affinity":{"podAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":55,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}}]},"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["harrison"]}]},"topologyKey":"kubernetes.io/hostname"}}]}},"schedulerName":"default-scheduler"}}},"status":{"replicas":0,"observedGeneration":4}},{"metadata":{"name":"lola-server-celery-worker-5fc98cb96c","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-celery-worker-5fc98cb96c","uid":"4faecd57-b486-4cb3-90df-b10a38ff3052","resourceVersion":"102503565","generation":4,"creationTimestamp":"2020-02-27T17:15:31Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"5fc98cb96c","worker":"celery"},"annotations":{"deployment.kubernetes.io/desired-replicas":"2","deployment.kubernetes.io/max-replicas":"3","deployment.kubernetes.io/revision":"92","sumologic.com/sourceCategory":"/prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-celery-worker","uid":"6fdf0fa8-e188-4812-b634-f1b51866cce8","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":0,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"5fc98cb96c"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"5fc98cb96c","worker":"celery"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"/prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}},{"name":"prometheus-metrics-db","emptyDir":{}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:49c24ed","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"celery-worker","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:49c24ed","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        python bin/start_celery_worker.py -n celery_worker@%h -P gevent --concurrency
        20 -Q lola.messaging,lola.images,lola.elasticindex"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"varlogbus","mountPath":"/var/log/bus"},{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"},{"name":"metrics-sidecar","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:49c24ed","command":["/bin/bash"],"args":["-c","gunicorn
        -c server/web/gunicorn_metrics.conf.py bin.start_metric_web:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7400,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"1Gi"},"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"livenessProbe":{"httpGet":{"path":"/metrics","port":"http","scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"affinity":{"podAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":55,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}}]},"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["harrison"]}]},"topologyKey":"kubernetes.io/hostname"}}]}},"schedulerName":"default-scheduler"}}},"status":{"replicas":0,"observedGeneration":4}},{"metadata":{"name":"lola-server-celery-worker-6ff966b5bc","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-celery-worker-6ff966b5bc","uid":"a2e75117-aed9-40a6-86c4-428ba55dcfb0","resourceVersion":"104513525","generation":4,"creationTimestamp":"2020-03-04T15:34:43Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"6ff966b5bc","worker":"celery"},"annotations":{"deployment.kubernetes.io/desired-replicas":"2","deployment.kubernetes.io/max-replicas":"3","deployment.kubernetes.io/revision":"96","sumologic.com/sourceCategory":"/prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-celery-worker","uid":"6fdf0fa8-e188-4812-b634-f1b51866cce8","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":0,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"6ff966b5bc"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"6ff966b5bc","worker":"celery"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"/prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}},{"name":"prometheus-metrics-db","emptyDir":{}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:8bb1c4a","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"celery-worker","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:8bb1c4a","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        python bin/start_celery_worker.py -n celery_worker@%h -P gevent --concurrency
        20 -Q lola.messaging,lola.images,lola.elasticindex"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"varlogbus","mountPath":"/var/log/bus"},{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"},{"name":"metrics-sidecar","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:8bb1c4a","command":["/bin/bash"],"args":["-c","gunicorn
        -c server/web/gunicorn_metrics.conf.py bin.start_metric_web:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7400,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"1Gi"},"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"livenessProbe":{"httpGet":{"path":"/metrics","port":"http","scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"affinity":{"podAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":55,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}}]},"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["harrison"]}]},"topologyKey":"kubernetes.io/hostname"}}]}},"schedulerName":"default-scheduler"}}},"status":{"replicas":0,"observedGeneration":4}},{"metadata":{"name":"lola-server-celery-worker-7b86fb9b74","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-celery-worker-7b86fb9b74","uid":"dfcae98d-f865-4c82-9d15-8f79566a272c","resourceVersion":"104513680","generation":2,"creationTimestamp":"2020-03-04T17:08:33Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"7b86fb9b74","worker":"celery"},"annotations":{"deployment.kubernetes.io/desired-replicas":"2","deployment.kubernetes.io/max-replicas":"3","deployment.kubernetes.io/revision":"97","sumologic.com/sourceCategory":"prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-celery-worker","uid":"6fdf0fa8-e188-4812-b634-f1b51866cce8","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":2,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"7b86fb9b74"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"7b86fb9b74","worker":"celery"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}},{"name":"prometheus-metrics-db","emptyDir":{}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:5427252","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"celery-worker","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:5427252","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        python bin/start_celery_worker.py -n celery_worker@%h -P gevent --concurrency
        20 -Q lola.messaging,lola.images,lola.elasticindex"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"varlogbus","mountPath":"/var/log/bus"},{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"},{"name":"metrics-sidecar","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:5427252","command":["/bin/bash"],"args":["-c","gunicorn
        -c server/web/gunicorn_metrics.conf.py bin.start_metric_web:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7400,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"1Gi"},"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"livenessProbe":{"httpGet":{"path":"/metrics","port":"http","scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"affinity":{"podAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":55,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}}]},"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["harrison"]}]},"topologyKey":"kubernetes.io/hostname"}}]}},"schedulerName":"default-scheduler"}}},"status":{"replicas":2,"fullyLabeledReplicas":2,"readyReplicas":2,"availableReplicas":2,"observedGeneration":2}},{"metadata":{"name":"lola-server-celery-worker-84d5696b4","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-celery-worker-84d5696b4","uid":"15c9e9cf-4df7-4a9a-a4f7-3fde3f626994","resourceVersion":"103696281","generation":4,"creationTimestamp":"2020-02-28T15:49:28Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"84d5696b4","worker":"celery"},"annotations":{"deployment.kubernetes.io/desired-replicas":"2","deployment.kubernetes.io/max-replicas":"3","deployment.kubernetes.io/revision":"93","sumologic.com/sourceCategory":"/prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-celery-worker","uid":"6fdf0fa8-e188-4812-b634-f1b51866cce8","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":0,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"84d5696b4"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"84d5696b4","worker":"celery"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"/prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}},{"name":"prometheus-metrics-db","emptyDir":{}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:12fb472","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"celery-worker","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:12fb472","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        python bin/start_celery_worker.py -n celery_worker@%h -P gevent --concurrency
        20 -Q lola.messaging,lola.images,lola.elasticindex"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"varlogbus","mountPath":"/var/log/bus"},{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"},{"name":"metrics-sidecar","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:12fb472","command":["/bin/bash"],"args":["-c","gunicorn
        -c server/web/gunicorn_metrics.conf.py bin.start_metric_web:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7400,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"1Gi"},"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"livenessProbe":{"httpGet":{"path":"/metrics","port":"http","scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"affinity":{"podAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":55,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}}]},"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["harrison"]}]},"topologyKey":"kubernetes.io/hostname"}}]}},"schedulerName":"default-scheduler"}}},"status":{"replicas":0,"observedGeneration":4}},{"metadata":{"name":"lola-server-celery-worker-f46d7b5b6","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-celery-worker-f46d7b5b6","uid":"655f2b1e-3f7d-45cb-a27c-be5ff873ad99","resourceVersion":"104077377","generation":4,"creationTimestamp":"2020-03-02T16:34:46Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"f46d7b5b6","worker":"celery"},"annotations":{"deployment.kubernetes.io/desired-replicas":"2","deployment.kubernetes.io/max-replicas":"3","deployment.kubernetes.io/revision":"94","sumologic.com/sourceCategory":"/prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-celery-worker","uid":"6fdf0fa8-e188-4812-b634-f1b51866cce8","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":0,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"f46d7b5b6"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"f46d7b5b6","worker":"celery"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"/prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}},{"name":"prometheus-metrics-db","emptyDir":{}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:ce6dfae","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"celery-worker","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:ce6dfae","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        python bin/start_celery_worker.py -n celery_worker@%h -P gevent --concurrency
        20 -Q lola.messaging,lola.images,lola.elasticindex"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"varlogbus","mountPath":"/var/log/bus"},{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"},{"name":"metrics-sidecar","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:ce6dfae","command":["/bin/bash"],"args":["-c","gunicorn
        -c server/web/gunicorn_metrics.conf.py bin.start_metric_web:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7400,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"1Gi"},"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"livenessProbe":{"httpGet":{"path":"/metrics","port":"http","scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"affinity":{"podAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":55,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}}]},"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["harrison"]}]},"topologyKey":"kubernetes.io/hostname"}}]}},"schedulerName":"default-scheduler"}}},"status":{"replicas":0,"observedGeneration":4}},{"metadata":{"name":"lola-server-low-priority-worker-5597dbcc94","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-low-priority-worker-5597dbcc94","uid":"d6c740b5-bd4f-416e-ab97-d99bfa0acd8f","resourceVersion":"103696472","generation":6,"creationTimestamp":"2020-02-28T15:49:28Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"5597dbcc94","worker":"celery"},"annotations":{"deployment.kubernetes.io/desired-replicas":"3","deployment.kubernetes.io/max-replicas":"4","deployment.kubernetes.io/revision":"93","sumologic.com/sourceCategory":"/prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-low-priority-worker","uid":"88f12e40-fc38-4e5a-bffc-6e107ccfe317","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":0,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"5597dbcc94"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"5597dbcc94","worker":"celery"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"/prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}},{"name":"prometheus-metrics-db","emptyDir":{}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:12fb472","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"low-priority-worker","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:12fb472","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        python bin/start_celery_worker.py -n low_priority_worker@%h -P gevent --concurrency
        20 -Q lola.www,lola.social,lola.noteindex,lola.recommendations,lola.booking_bot,lola.reprice_bookings
        --lola-scheduler --lola-maintenance"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"2Gi"},"requests":{"memory":"1Gi"}},"volumeMounts":[{"name":"varlogbus","mountPath":"/var/log/bus"},{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"},{"name":"metrics-sidecar","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:12fb472","command":["/bin/bash"],"args":["-c","gunicorn
        -c server/web/gunicorn_metrics.conf.py bin.start_metric_web:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7400,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"1Gi"},"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"livenessProbe":{"httpGet":{"path":"/metrics","port":"http","scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"affinity":{"podAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":55,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}}]},"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["harrison"]}]},"topologyKey":"kubernetes.io/hostname"}}]}},"schedulerName":"default-scheduler"}}},"status":{"replicas":0,"observedGeneration":6}},{"metadata":{"name":"lola-server-low-priority-worker-66488b66b8","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-low-priority-worker-66488b66b8","uid":"f4de57fb-df17-4409-b9ae-d87016358eae","resourceVersion":"104077511","generation":6,"creationTimestamp":"2020-03-02T16:34:46Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"66488b66b8","worker":"celery"},"annotations":{"deployment.kubernetes.io/desired-replicas":"3","deployment.kubernetes.io/max-replicas":"4","deployment.kubernetes.io/revision":"94","sumologic.com/sourceCategory":"/prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-low-priority-worker","uid":"88f12e40-fc38-4e5a-bffc-6e107ccfe317","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":0,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"66488b66b8"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"66488b66b8","worker":"celery"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"/prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}},{"name":"prometheus-metrics-db","emptyDir":{}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:ce6dfae","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"low-priority-worker","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:ce6dfae","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        python bin/start_celery_worker.py -n low_priority_worker@%h -P gevent --concurrency
        20 -Q lola.www,lola.social,lola.noteindex,lola.recommendations,lola.booking_bot,lola.reprice_bookings
        --lola-scheduler --lola-maintenance"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"2Gi"},"requests":{"memory":"1Gi"}},"volumeMounts":[{"name":"varlogbus","mountPath":"/var/log/bus"},{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"},{"name":"metrics-sidecar","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:ce6dfae","command":["/bin/bash"],"args":["-c","gunicorn
        -c server/web/gunicorn_metrics.conf.py bin.start_metric_web:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7400,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"1Gi"},"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"livenessProbe":{"httpGet":{"path":"/metrics","port":"http","scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"affinity":{"podAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":55,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}}]},"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["harrison"]}]},"topologyKey":"kubernetes.io/hostname"}}]}},"schedulerName":"default-scheduler"}}},"status":{"replicas":0,"observedGeneration":6}},{"metadata":{"name":"lola-server-low-priority-worker-6f5b8fd794","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-low-priority-worker-6f5b8fd794","uid":"4ae12c95-26a1-4f5a-8c00-59b4a6c4887c","resourceVersion":"104484870","generation":6,"creationTimestamp":"2020-03-03T15:24:39Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"6f5b8fd794","worker":"celery"},"annotations":{"deployment.kubernetes.io/desired-replicas":"3","deployment.kubernetes.io/max-replicas":"4","deployment.kubernetes.io/revision":"95","sumologic.com/sourceCategory":"/prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-low-priority-worker","uid":"88f12e40-fc38-4e5a-bffc-6e107ccfe317","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":0,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"6f5b8fd794"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"6f5b8fd794","worker":"celery"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"/prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}},{"name":"prometheus-metrics-db","emptyDir":{}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:ddb3eea","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"low-priority-worker","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:ddb3eea","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        python bin/start_celery_worker.py -n low_priority_worker@%h -P gevent --concurrency
        20 -Q lola.www,lola.social,lola.noteindex,lola.recommendations,lola.booking_bot,lola.reprice_bookings
        --lola-scheduler --lola-maintenance"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"2Gi"},"requests":{"memory":"1Gi"}},"volumeMounts":[{"name":"varlogbus","mountPath":"/var/log/bus"},{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"},{"name":"metrics-sidecar","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:ddb3eea","command":["/bin/bash"],"args":["-c","gunicorn
        -c server/web/gunicorn_metrics.conf.py bin.start_metric_web:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7400,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"1Gi"},"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"livenessProbe":{"httpGet":{"path":"/metrics","port":"http","scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"affinity":{"podAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":55,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}}]},"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["harrison"]}]},"topologyKey":"kubernetes.io/hostname"}}]}},"schedulerName":"default-scheduler"}}},"status":{"replicas":0,"observedGeneration":6}},{"metadata":{"name":"lola-server-low-priority-worker-7496766797","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-low-priority-worker-7496766797","uid":"e9c8768e-66c8-4bf3-bb05-cdfa1e5127d0","resourceVersion":"102503852","generation":6,"creationTimestamp":"2020-02-27T17:15:31Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"7496766797","worker":"celery"},"annotations":{"deployment.kubernetes.io/desired-replicas":"3","deployment.kubernetes.io/max-replicas":"4","deployment.kubernetes.io/revision":"92","sumologic.com/sourceCategory":"/prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-low-priority-worker","uid":"88f12e40-fc38-4e5a-bffc-6e107ccfe317","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":0,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"7496766797"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"7496766797","worker":"celery"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"/prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}},{"name":"prometheus-metrics-db","emptyDir":{}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:49c24ed","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"low-priority-worker","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:49c24ed","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        python bin/start_celery_worker.py -n low_priority_worker@%h -P gevent --concurrency
        20 -Q lola.www,lola.social,lola.noteindex,lola.recommendations,lola.booking_bot,lola.reprice_bookings
        --lola-scheduler --lola-maintenance"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"2Gi"},"requests":{"memory":"1Gi"}},"volumeMounts":[{"name":"varlogbus","mountPath":"/var/log/bus"},{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"},{"name":"metrics-sidecar","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:49c24ed","command":["/bin/bash"],"args":["-c","gunicorn
        -c server/web/gunicorn_metrics.conf.py bin.start_metric_web:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7400,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"1Gi"},"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"livenessProbe":{"httpGet":{"path":"/metrics","port":"http","scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"affinity":{"podAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":55,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}}]},"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["harrison"]}]},"topologyKey":"kubernetes.io/hostname"}}]}},"schedulerName":"default-scheduler"}}},"status":{"replicas":0,"observedGeneration":6}},{"metadata":{"name":"lola-server-low-priority-worker-cb88b4494","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-low-priority-worker-cb88b4494","uid":"78bc190b-8702-49a6-adaa-db1b1ee293b4","resourceVersion":"104513850","generation":3,"creationTimestamp":"2020-03-04T17:08:32Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"cb88b4494","worker":"celery"},"annotations":{"deployment.kubernetes.io/desired-replicas":"3","deployment.kubernetes.io/max-replicas":"4","deployment.kubernetes.io/revision":"97","sumologic.com/sourceCategory":"prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-low-priority-worker","uid":"88f12e40-fc38-4e5a-bffc-6e107ccfe317","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":3,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"cb88b4494"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"cb88b4494","worker":"celery"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}},{"name":"prometheus-metrics-db","emptyDir":{}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:5427252","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"low-priority-worker","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:5427252","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        python bin/start_celery_worker.py -n low_priority_worker@%h -P gevent --concurrency
        20 -Q lola.www,lola.social,lola.noteindex,lola.recommendations,lola.booking_bot,lola.reprice_bookings
        --lola-scheduler --lola-maintenance"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"2Gi"},"requests":{"memory":"1Gi"}},"volumeMounts":[{"name":"varlogbus","mountPath":"/var/log/bus"},{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"},{"name":"metrics-sidecar","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:5427252","command":["/bin/bash"],"args":["-c","gunicorn
        -c server/web/gunicorn_metrics.conf.py bin.start_metric_web:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7400,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"1Gi"},"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"livenessProbe":{"httpGet":{"path":"/metrics","port":"http","scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"affinity":{"podAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":55,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}}]},"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["harrison"]}]},"topologyKey":"kubernetes.io/hostname"}}]}},"schedulerName":"default-scheduler"}}},"status":{"replicas":3,"fullyLabeledReplicas":3,"readyReplicas":3,"availableReplicas":3,"observedGeneration":3}},{"metadata":{"name":"lola-server-low-priority-worker-dc5f8c86f","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-low-priority-worker-dc5f8c86f","uid":"934537d1-770c-4e92-b394-f23fd89be494","resourceVersion":"104513731","generation":6,"creationTimestamp":"2020-03-04T15:34:43Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"dc5f8c86f","worker":"celery"},"annotations":{"deployment.kubernetes.io/desired-replicas":"3","deployment.kubernetes.io/max-replicas":"4","deployment.kubernetes.io/revision":"96","sumologic.com/sourceCategory":"/prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-low-priority-worker","uid":"88f12e40-fc38-4e5a-bffc-6e107ccfe317","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":0,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"dc5f8c86f"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"dc5f8c86f","worker":"celery"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"/prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}},{"name":"prometheus-metrics-db","emptyDir":{}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:8bb1c4a","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"low-priority-worker","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:8bb1c4a","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        python bin/start_celery_worker.py -n low_priority_worker@%h -P gevent --concurrency
        20 -Q lola.www,lola.social,lola.noteindex,lola.recommendations,lola.booking_bot,lola.reprice_bookings
        --lola-scheduler --lola-maintenance"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"2Gi"},"requests":{"memory":"1Gi"}},"volumeMounts":[{"name":"varlogbus","mountPath":"/var/log/bus"},{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"},{"name":"metrics-sidecar","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:8bb1c4a","command":["/bin/bash"],"args":["-c","gunicorn
        -c server/web/gunicorn_metrics.conf.py bin.start_metric_web:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7400,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"1Gi"},"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"livenessProbe":{"httpGet":{"path":"/metrics","port":"http","scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"affinity":{"podAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":55,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}}]},"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["harrison"]}]},"topologyKey":"kubernetes.io/hostname"}}]}},"schedulerName":"default-scheduler"}}},"status":{"replicas":0,"observedGeneration":6}},{"metadata":{"name":"lola-server-onboarding-worker-68fb7d7958","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-onboarding-worker-68fb7d7958","uid":"18dfe70a-c2eb-4214-bf16-557ec3be0b49","resourceVersion":"104513753","generation":2,"creationTimestamp":"2020-03-04T17:08:32Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"68fb7d7958","worker":"celery"},"annotations":{"deployment.kubernetes.io/desired-replicas":"2","deployment.kubernetes.io/max-replicas":"3","deployment.kubernetes.io/revision":"97","sumologic.com/sourceCategory":"prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-onboarding-worker","uid":"322443cd-cef1-4262-aa34-275a9d723f7e","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":2,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"68fb7d7958"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"68fb7d7958","worker":"celery"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}},{"name":"prometheus-metrics-db","emptyDir":{}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:5427252","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"onboarding-worker","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:5427252","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        python bin/start_celery_worker.py -n onboarding_worker@%h -P gevent --concurrency
        20 -Q lola.onboarding"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"varlogbus","mountPath":"/var/log/bus"},{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"},{"name":"metrics-sidecar","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:5427252","command":["/bin/bash"],"args":["-c","gunicorn
        -c server/web/gunicorn_metrics.conf.py bin.start_metric_web:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7400,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"1Gi"},"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"livenessProbe":{"httpGet":{"path":"/metrics","port":"http","scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"affinity":{"podAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":55,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}}]},"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["harrison"]}]},"topologyKey":"kubernetes.io/hostname"}}]}},"schedulerName":"default-scheduler"}}},"status":{"replicas":2,"fullyLabeledReplicas":2,"readyReplicas":2,"availableReplicas":2,"observedGeneration":2}},{"metadata":{"name":"lola-server-onboarding-worker-6bcbdc976f","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-onboarding-worker-6bcbdc976f","uid":"d23fba37-218b-436d-8040-3bfbb4c751f1","resourceVersion":"104513514","generation":4,"creationTimestamp":"2020-03-04T15:34:43Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"6bcbdc976f","worker":"celery"},"annotations":{"deployment.kubernetes.io/desired-replicas":"2","deployment.kubernetes.io/max-replicas":"3","deployment.kubernetes.io/revision":"96","sumologic.com/sourceCategory":"/prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-onboarding-worker","uid":"322443cd-cef1-4262-aa34-275a9d723f7e","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":0,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"6bcbdc976f"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"6bcbdc976f","worker":"celery"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"/prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}},{"name":"prometheus-metrics-db","emptyDir":{}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:8bb1c4a","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"onboarding-worker","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:8bb1c4a","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        python bin/start_celery_worker.py -n onboarding_worker@%h -P gevent --concurrency
        20 -Q lola.onboarding"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"varlogbus","mountPath":"/var/log/bus"},{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"},{"name":"metrics-sidecar","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:8bb1c4a","command":["/bin/bash"],"args":["-c","gunicorn
        -c server/web/gunicorn_metrics.conf.py bin.start_metric_web:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7400,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"1Gi"},"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"livenessProbe":{"httpGet":{"path":"/metrics","port":"http","scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"affinity":{"podAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":55,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}}]},"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["harrison"]}]},"topologyKey":"kubernetes.io/hostname"}}]}},"schedulerName":"default-scheduler"}}},"status":{"replicas":0,"observedGeneration":4}},{"metadata":{"name":"lola-server-onboarding-worker-6cfcf4dbb6","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-onboarding-worker-6cfcf4dbb6","uid":"f392cb0e-f400-4eec-ae3d-ef7a655fb39c","resourceVersion":"103696314","generation":4,"creationTimestamp":"2020-02-28T15:49:28Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"6cfcf4dbb6","worker":"celery"},"annotations":{"deployment.kubernetes.io/desired-replicas":"2","deployment.kubernetes.io/max-replicas":"3","deployment.kubernetes.io/revision":"93","sumologic.com/sourceCategory":"/prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-onboarding-worker","uid":"322443cd-cef1-4262-aa34-275a9d723f7e","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":0,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"6cfcf4dbb6"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"6cfcf4dbb6","worker":"celery"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"/prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}},{"name":"prometheus-metrics-db","emptyDir":{}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:12fb472","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"onboarding-worker","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:12fb472","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        python bin/start_celery_worker.py -n onboarding_worker@%h -P gevent --concurrency
        20 -Q lola.onboarding"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"varlogbus","mountPath":"/var/log/bus"},{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"},{"name":"metrics-sidecar","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:12fb472","command":["/bin/bash"],"args":["-c","gunicorn
        -c server/web/gunicorn_metrics.conf.py bin.start_metric_web:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7400,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"1Gi"},"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"livenessProbe":{"httpGet":{"path":"/metrics","port":"http","scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"affinity":{"podAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":55,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}}]},"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["harrison"]}]},"topologyKey":"kubernetes.io/hostname"}}]}},"schedulerName":"default-scheduler"}}},"status":{"replicas":0,"observedGeneration":4}},{"metadata":{"name":"lola-server-onboarding-worker-7b8999d8cc","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-onboarding-worker-7b8999d8cc","uid":"c13761dc-4ce8-417f-ba7f-f2cf331e9e67","resourceVersion":"102503637","generation":4,"creationTimestamp":"2020-02-27T17:15:31Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"7b8999d8cc","worker":"celery"},"annotations":{"deployment.kubernetes.io/desired-replicas":"2","deployment.kubernetes.io/max-replicas":"3","deployment.kubernetes.io/revision":"92","sumologic.com/sourceCategory":"/prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-onboarding-worker","uid":"322443cd-cef1-4262-aa34-275a9d723f7e","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":0,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"7b8999d8cc"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"7b8999d8cc","worker":"celery"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"/prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}},{"name":"prometheus-metrics-db","emptyDir":{}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:49c24ed","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"onboarding-worker","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:49c24ed","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        python bin/start_celery_worker.py -n onboarding_worker@%h -P gevent --concurrency
        20 -Q lola.onboarding"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"varlogbus","mountPath":"/var/log/bus"},{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"},{"name":"metrics-sidecar","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:49c24ed","command":["/bin/bash"],"args":["-c","gunicorn
        -c server/web/gunicorn_metrics.conf.py bin.start_metric_web:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7400,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"1Gi"},"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"livenessProbe":{"httpGet":{"path":"/metrics","port":"http","scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"affinity":{"podAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":55,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}}]},"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["harrison"]}]},"topologyKey":"kubernetes.io/hostname"}}]}},"schedulerName":"default-scheduler"}}},"status":{"replicas":0,"observedGeneration":4}},{"metadata":{"name":"lola-server-onboarding-worker-86b8d58956","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-onboarding-worker-86b8d58956","uid":"125bfba7-94d8-44b3-93e6-123c42b72b48","resourceVersion":"104077309","generation":4,"creationTimestamp":"2020-03-02T16:34:46Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"86b8d58956","worker":"celery"},"annotations":{"deployment.kubernetes.io/desired-replicas":"2","deployment.kubernetes.io/max-replicas":"3","deployment.kubernetes.io/revision":"94","sumologic.com/sourceCategory":"/prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-onboarding-worker","uid":"322443cd-cef1-4262-aa34-275a9d723f7e","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":0,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"86b8d58956"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"86b8d58956","worker":"celery"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"/prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}},{"name":"prometheus-metrics-db","emptyDir":{}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:ce6dfae","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"onboarding-worker","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:ce6dfae","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        python bin/start_celery_worker.py -n onboarding_worker@%h -P gevent --concurrency
        20 -Q lola.onboarding"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"varlogbus","mountPath":"/var/log/bus"},{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"},{"name":"metrics-sidecar","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:ce6dfae","command":["/bin/bash"],"args":["-c","gunicorn
        -c server/web/gunicorn_metrics.conf.py bin.start_metric_web:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7400,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"1Gi"},"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"livenessProbe":{"httpGet":{"path":"/metrics","port":"http","scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"affinity":{"podAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":55,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}}]},"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["harrison"]}]},"topologyKey":"kubernetes.io/hostname"}}]}},"schedulerName":"default-scheduler"}}},"status":{"replicas":0,"observedGeneration":4}},{"metadata":{"name":"lola-server-onboarding-worker-fcfd4d67d","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-onboarding-worker-fcfd4d67d","uid":"045e9093-7c53-4d4d-a0ac-a4e5a531acbf","resourceVersion":"104484794","generation":4,"creationTimestamp":"2020-03-03T15:24:39Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"fcfd4d67d","worker":"celery"},"annotations":{"deployment.kubernetes.io/desired-replicas":"2","deployment.kubernetes.io/max-replicas":"3","deployment.kubernetes.io/revision":"95","sumologic.com/sourceCategory":"/prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-onboarding-worker","uid":"322443cd-cef1-4262-aa34-275a9d723f7e","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":0,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"fcfd4d67d"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"fcfd4d67d","worker":"celery"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"/prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}},{"name":"prometheus-metrics-db","emptyDir":{}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:ddb3eea","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"onboarding-worker","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:ddb3eea","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        python bin/start_celery_worker.py -n onboarding_worker@%h -P gevent --concurrency
        20 -Q lola.onboarding"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"varlogbus","mountPath":"/var/log/bus"},{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"},{"name":"metrics-sidecar","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:ddb3eea","command":["/bin/bash"],"args":["-c","gunicorn
        -c server/web/gunicorn_metrics.conf.py bin.start_metric_web:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7400,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"1Gi"},"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"livenessProbe":{"httpGet":{"path":"/metrics","port":"http","scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"affinity":{"podAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":55,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}}]},"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["harrison"]}]},"topologyKey":"kubernetes.io/hostname"}}]}},"schedulerName":"default-scheduler"}}},"status":{"replicas":0,"observedGeneration":4}},{"metadata":{"name":"lola-server-proxy-5f9797b48d","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-proxy-5f9797b48d","uid":"314e6588-6280-4a51-a001-0759bea56a04","resourceVersion":"102503600","generation":4,"creationTimestamp":"2020-02-27T17:15:31Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"5f9797b48d","worker":"proxy"},"annotations":{"deployment.kubernetes.io/desired-replicas":"2","deployment.kubernetes.io/max-replicas":"3","deployment.kubernetes.io/revision":"92","sumologic.com/sourceCategory":"/prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-proxy","uid":"3a215fff-e557-4351-ad6e-874eda8644f7","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":0,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"5f9797b48d"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"5f9797b48d","worker":"proxy"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"/prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:49c24ed","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"web","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:49c24ed","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        gunicorn --statsd-host=statsd-exporter.monitoring:9125 --statsd-prefix=lola-server-proxy.prod
        -c server/web/gunicorn.conf.py bin.start_provider_proxy:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7200,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"7Gi"},"requests":{"memory":"2Gi"}},"volumeMounts":[{"name":"varlogbus","mountPath":"/var/log/bus"}],"livenessProbe":{"httpGet":{"path":"/status","port":7200,"scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":45,"dnsPolicy":"ClusterFirst","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"replicas":0,"observedGeneration":4}},{"metadata":{"name":"lola-server-proxy-7c7c5bdbcb","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-proxy-7c7c5bdbcb","uid":"69185642-f917-4f09-95a0-96a7a3e0c0b2","resourceVersion":"104513500","generation":4,"creationTimestamp":"2020-03-04T15:34:43Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"7c7c5bdbcb","worker":"proxy"},"annotations":{"deployment.kubernetes.io/desired-replicas":"2","deployment.kubernetes.io/max-replicas":"3","deployment.kubernetes.io/revision":"96","sumologic.com/sourceCategory":"/prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-proxy","uid":"3a215fff-e557-4351-ad6e-874eda8644f7","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":0,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"7c7c5bdbcb"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"7c7c5bdbcb","worker":"proxy"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"/prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:8bb1c4a","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"web","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:8bb1c4a","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        gunicorn --statsd-host=statsd-exporter.monitoring:9125 --statsd-prefix=lola-server-proxy.prod
        -c server/web/gunicorn.conf.py bin.start_provider_proxy:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7200,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"7Gi"},"requests":{"memory":"2Gi"}},"volumeMounts":[{"name":"varlogbus","mountPath":"/var/log/bus"}],"livenessProbe":{"httpGet":{"path":"/status","port":7200,"scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":45,"dnsPolicy":"ClusterFirst","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"replicas":0,"observedGeneration":4}},{"metadata":{"name":"lola-server-proxy-7cf76945fd","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-proxy-7cf76945fd","uid":"fc7bd899-ec3a-4e44-b439-1c4bd93a19e3","resourceVersion":"103696200","generation":4,"creationTimestamp":"2020-02-28T15:49:28Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"7cf76945fd","worker":"proxy"},"annotations":{"deployment.kubernetes.io/desired-replicas":"2","deployment.kubernetes.io/max-replicas":"3","deployment.kubernetes.io/revision":"93","sumologic.com/sourceCategory":"/prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-proxy","uid":"3a215fff-e557-4351-ad6e-874eda8644f7","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":0,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"7cf76945fd"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"7cf76945fd","worker":"proxy"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"/prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:12fb472","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"web","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:12fb472","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        gunicorn --statsd-host=statsd-exporter.monitoring:9125 --statsd-prefix=lola-server-proxy.prod
        -c server/web/gunicorn.conf.py bin.start_provider_proxy:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7200,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"7Gi"},"requests":{"memory":"2Gi"}},"volumeMounts":[{"name":"varlogbus","mountPath":"/var/log/bus"}],"livenessProbe":{"httpGet":{"path":"/status","port":7200,"scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":45,"dnsPolicy":"ClusterFirst","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"replicas":0,"observedGeneration":4}},{"metadata":{"name":"lola-server-proxy-848ddc989d","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-proxy-848ddc989d","uid":"d1ebde82-5c84-4ef1-84a1-55bd808116de","resourceVersion":"104484612","generation":4,"creationTimestamp":"2020-03-03T15:24:39Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"848ddc989d","worker":"proxy"},"annotations":{"deployment.kubernetes.io/desired-replicas":"2","deployment.kubernetes.io/max-replicas":"3","deployment.kubernetes.io/revision":"95","sumologic.com/sourceCategory":"/prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-proxy","uid":"3a215fff-e557-4351-ad6e-874eda8644f7","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":0,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"848ddc989d"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"848ddc989d","worker":"proxy"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"/prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:ddb3eea","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"web","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:ddb3eea","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        gunicorn --statsd-host=statsd-exporter.monitoring:9125 --statsd-prefix=lola-server-proxy.prod
        -c server/web/gunicorn.conf.py bin.start_provider_proxy:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7200,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"7Gi"},"requests":{"memory":"2Gi"}},"volumeMounts":[{"name":"varlogbus","mountPath":"/var/log/bus"}],"livenessProbe":{"httpGet":{"path":"/status","port":7200,"scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":45,"dnsPolicy":"ClusterFirst","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"replicas":0,"observedGeneration":4}},{"metadata":{"name":"lola-server-proxy-86995c5c5d","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-proxy-86995c5c5d","uid":"f48c4c0e-5a5d-4ee9-8f5d-919e70774db0","resourceVersion":"104077215","generation":4,"creationTimestamp":"2020-03-02T16:34:46Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"86995c5c5d","worker":"proxy"},"annotations":{"deployment.kubernetes.io/desired-replicas":"2","deployment.kubernetes.io/max-replicas":"3","deployment.kubernetes.io/revision":"94","sumologic.com/sourceCategory":"/prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-proxy","uid":"3a215fff-e557-4351-ad6e-874eda8644f7","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":0,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"86995c5c5d"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"86995c5c5d","worker":"proxy"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"/prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:ce6dfae","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"web","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:ce6dfae","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        gunicorn --statsd-host=statsd-exporter.monitoring:9125 --statsd-prefix=lola-server-proxy.prod
        -c server/web/gunicorn.conf.py bin.start_provider_proxy:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7200,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"7Gi"},"requests":{"memory":"2Gi"}},"volumeMounts":[{"name":"varlogbus","mountPath":"/var/log/bus"}],"livenessProbe":{"httpGet":{"path":"/status","port":7200,"scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":45,"dnsPolicy":"ClusterFirst","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"replicas":0,"observedGeneration":4}},{"metadata":{"name":"lola-server-proxy-c7879c65c","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-proxy-c7879c65c","uid":"74c4b32f-90c1-42fe-8014-44593aaf6a22","resourceVersion":"104513759","generation":2,"creationTimestamp":"2020-03-04T17:08:32Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"c7879c65c","worker":"proxy"},"annotations":{"deployment.kubernetes.io/desired-replicas":"2","deployment.kubernetes.io/max-replicas":"3","deployment.kubernetes.io/revision":"97","sumologic.com/sourceCategory":"prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-proxy","uid":"3a215fff-e557-4351-ad6e-874eda8644f7","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":2,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"c7879c65c"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"c7879c65c","worker":"proxy"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:5427252","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"web","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:5427252","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        gunicorn --statsd-host=statsd-exporter.monitoring:9125 --statsd-prefix=lola-server-proxy.prod
        -c server/web/gunicorn.conf.py bin.start_provider_proxy:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7200,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"7Gi"},"requests":{"memory":"2Gi"}},"volumeMounts":[{"name":"varlogbus","mountPath":"/var/log/bus"}],"livenessProbe":{"httpGet":{"path":"/status","port":7200,"scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":45,"dnsPolicy":"ClusterFirst","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"replicas":2,"fullyLabeledReplicas":2,"readyReplicas":2,"availableReplicas":2,"observedGeneration":2}},{"metadata":{"name":"lola-server-southwest-ticketing-worker-54c768558c","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-southwest-ticketing-worker-54c768558c","uid":"35ad2f74-3db8-447c-bee8-33047bf7c173","resourceVersion":"104484589","generation":4,"creationTimestamp":"2020-03-03T15:24:39Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"54c768558c","worker":"celery"},"annotations":{"deployment.kubernetes.io/desired-replicas":"2","deployment.kubernetes.io/max-replicas":"3","deployment.kubernetes.io/revision":"95","sumologic.com/sourceCategory":"/prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-southwest-ticketing-worker","uid":"8007a9b8-7832-4bbb-86fb-02f498aad30e","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":0,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"54c768558c"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"54c768558c","worker":"celery"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"/prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}},{"name":"prometheus-metrics-db","emptyDir":{}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:ddb3eea","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"southwest-ticketing-worker","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:ddb3eea","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        python bin/start_celery_worker.py -n southwest_ticketing_worker@%h -P gevent
        --concurrency 20 -Q lola.southwest_ticketing"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"},{"name":"metrics-sidecar","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:ddb3eea","command":["/bin/bash"],"args":["-c","gunicorn
        -c server/web/gunicorn_metrics.conf.py bin.start_metric_web:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7400,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"1Gi"},"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"livenessProbe":{"httpGet":{"path":"/metrics","port":"http","scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"affinity":{"podAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":55,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}}]},"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["harrison"]}]},"topologyKey":"kubernetes.io/hostname"}}]}},"schedulerName":"default-scheduler"}}},"status":{"replicas":0,"observedGeneration":4}},{"metadata":{"name":"lola-server-southwest-ticketing-worker-5cbfdbc64b","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-southwest-ticketing-worker-5cbfdbc64b","uid":"25be3ebe-ee04-4dc0-ba9b-0089ea71b77f","resourceVersion":"102503651","generation":4,"creationTimestamp":"2020-02-27T17:15:31Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"5cbfdbc64b","worker":"celery"},"annotations":{"deployment.kubernetes.io/desired-replicas":"2","deployment.kubernetes.io/max-replicas":"3","deployment.kubernetes.io/revision":"92","sumologic.com/sourceCategory":"/prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-southwest-ticketing-worker","uid":"8007a9b8-7832-4bbb-86fb-02f498aad30e","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":0,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"5cbfdbc64b"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"5cbfdbc64b","worker":"celery"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"/prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}},{"name":"prometheus-metrics-db","emptyDir":{}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:49c24ed","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"southwest-ticketing-worker","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:49c24ed","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        python bin/start_celery_worker.py -n southwest_ticketing_worker@%h -P gevent
        --concurrency 20 -Q lola.southwest_ticketing"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"},{"name":"metrics-sidecar","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:49c24ed","command":["/bin/bash"],"args":["-c","gunicorn
        -c server/web/gunicorn_metrics.conf.py bin.start_metric_web:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7400,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"1Gi"},"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"livenessProbe":{"httpGet":{"path":"/metrics","port":"http","scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"affinity":{"podAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":55,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}}]},"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["harrison"]}]},"topologyKey":"kubernetes.io/hostname"}}]}},"schedulerName":"default-scheduler"}}},"status":{"replicas":0,"observedGeneration":4}},{"metadata":{"name":"lola-server-southwest-ticketing-worker-747ddccb5d","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-southwest-ticketing-worker-747ddccb5d","uid":"3f88d6f0-bf59-4194-bebb-e59aa795f33d","resourceVersion":"104513466","generation":4,"creationTimestamp":"2020-03-04T15:34:43Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"747ddccb5d","worker":"celery"},"annotations":{"deployment.kubernetes.io/desired-replicas":"2","deployment.kubernetes.io/max-replicas":"3","deployment.kubernetes.io/revision":"96","sumologic.com/sourceCategory":"/prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-southwest-ticketing-worker","uid":"8007a9b8-7832-4bbb-86fb-02f498aad30e","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":0,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"747ddccb5d"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"747ddccb5d","worker":"celery"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"/prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}},{"name":"prometheus-metrics-db","emptyDir":{}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:8bb1c4a","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"southwest-ticketing-worker","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:8bb1c4a","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        python bin/start_celery_worker.py -n southwest_ticketing_worker@%h -P gevent
        --concurrency 20 -Q lola.southwest_ticketing"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"},{"name":"metrics-sidecar","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:8bb1c4a","command":["/bin/bash"],"args":["-c","gunicorn
        -c server/web/gunicorn_metrics.conf.py bin.start_metric_web:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7400,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"1Gi"},"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"livenessProbe":{"httpGet":{"path":"/metrics","port":"http","scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"affinity":{"podAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":55,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}}]},"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["harrison"]}]},"topologyKey":"kubernetes.io/hostname"}}]}},"schedulerName":"default-scheduler"}}},"status":{"replicas":0,"observedGeneration":4}},{"metadata":{"name":"lola-server-southwest-ticketing-worker-85d57b4855","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-southwest-ticketing-worker-85d57b4855","uid":"d3500cb5-49f8-4870-ad7d-e61d2f68c553","resourceVersion":"104513669","generation":2,"creationTimestamp":"2020-03-04T17:08:32Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"85d57b4855","worker":"celery"},"annotations":{"deployment.kubernetes.io/desired-replicas":"2","deployment.kubernetes.io/max-replicas":"3","deployment.kubernetes.io/revision":"97","sumologic.com/sourceCategory":"prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-southwest-ticketing-worker","uid":"8007a9b8-7832-4bbb-86fb-02f498aad30e","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":2,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"85d57b4855"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"85d57b4855","worker":"celery"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}},{"name":"prometheus-metrics-db","emptyDir":{}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:5427252","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"southwest-ticketing-worker","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:5427252","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        python bin/start_celery_worker.py -n southwest_ticketing_worker@%h -P gevent
        --concurrency 20 -Q lola.southwest_ticketing"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"},{"name":"metrics-sidecar","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:5427252","command":["/bin/bash"],"args":["-c","gunicorn
        -c server/web/gunicorn_metrics.conf.py bin.start_metric_web:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7400,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"1Gi"},"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"livenessProbe":{"httpGet":{"path":"/metrics","port":"http","scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"affinity":{"podAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":55,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}}]},"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["harrison"]}]},"topologyKey":"kubernetes.io/hostname"}}]}},"schedulerName":"default-scheduler"}}},"status":{"replicas":2,"fullyLabeledReplicas":2,"readyReplicas":2,"availableReplicas":2,"observedGeneration":2}},{"metadata":{"name":"lola-server-southwest-ticketing-worker-b8477d889","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-southwest-ticketing-worker-b8477d889","uid":"08996994-59ae-4491-9093-de10d0e82539","resourceVersion":"104077325","generation":4,"creationTimestamp":"2020-03-02T16:34:46Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"b8477d889","worker":"celery"},"annotations":{"deployment.kubernetes.io/desired-replicas":"2","deployment.kubernetes.io/max-replicas":"3","deployment.kubernetes.io/revision":"94","sumologic.com/sourceCategory":"/prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-southwest-ticketing-worker","uid":"8007a9b8-7832-4bbb-86fb-02f498aad30e","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":0,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"b8477d889"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"b8477d889","worker":"celery"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"/prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}},{"name":"prometheus-metrics-db","emptyDir":{}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:ce6dfae","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"southwest-ticketing-worker","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:ce6dfae","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        python bin/start_celery_worker.py -n southwest_ticketing_worker@%h -P gevent
        --concurrency 20 -Q lola.southwest_ticketing"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"},{"name":"metrics-sidecar","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:ce6dfae","command":["/bin/bash"],"args":["-c","gunicorn
        -c server/web/gunicorn_metrics.conf.py bin.start_metric_web:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7400,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"1Gi"},"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"livenessProbe":{"httpGet":{"path":"/metrics","port":"http","scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"affinity":{"podAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":55,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}}]},"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["harrison"]}]},"topologyKey":"kubernetes.io/hostname"}}]}},"schedulerName":"default-scheduler"}}},"status":{"replicas":0,"observedGeneration":4}},{"metadata":{"name":"lola-server-southwest-ticketing-worker-fb8b64f7f","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-southwest-ticketing-worker-fb8b64f7f","uid":"b5837e98-b5ca-4663-9747-4e5e278c73ce","resourceVersion":"103696394","generation":4,"creationTimestamp":"2020-02-28T15:49:28Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"fb8b64f7f","worker":"celery"},"annotations":{"deployment.kubernetes.io/desired-replicas":"2","deployment.kubernetes.io/max-replicas":"3","deployment.kubernetes.io/revision":"93","sumologic.com/sourceCategory":"/prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-southwest-ticketing-worker","uid":"8007a9b8-7832-4bbb-86fb-02f498aad30e","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":0,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"fb8b64f7f"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"fb8b64f7f","worker":"celery"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"/prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}},{"name":"prometheus-metrics-db","emptyDir":{}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:12fb472","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"southwest-ticketing-worker","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:12fb472","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        python bin/start_celery_worker.py -n southwest_ticketing_worker@%h -P gevent
        --concurrency 20 -Q lola.southwest_ticketing"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"},{"name":"metrics-sidecar","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:12fb472","command":["/bin/bash"],"args":["-c","gunicorn
        -c server/web/gunicorn_metrics.conf.py bin.start_metric_web:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7400,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"1Gi"},"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"livenessProbe":{"httpGet":{"path":"/metrics","port":"http","scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"affinity":{"podAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":55,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}}]},"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["harrison"]}]},"topologyKey":"kubernetes.io/hostname"}}]}},"schedulerName":"default-scheduler"}}},"status":{"replicas":0,"observedGeneration":4}},{"metadata":{"name":"lola-server-travel-worker-5d558c44d7","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-travel-worker-5d558c44d7","uid":"9385f77c-34f3-4bac-86e2-253b69b1e0ee","resourceVersion":"104513765","generation":2,"creationTimestamp":"2020-03-04T17:08:33Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"5d558c44d7","worker":"celery"},"annotations":{"deployment.kubernetes.io/desired-replicas":"2","deployment.kubernetes.io/max-replicas":"3","deployment.kubernetes.io/revision":"97","sumologic.com/sourceCategory":"prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-travel-worker","uid":"f954568e-49e0-4a2f-b901-9bcd53e2c1c8","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":2,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"5d558c44d7"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"5d558c44d7","worker":"celery"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}},{"name":"prometheus-metrics-db","emptyDir":{}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:5427252","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"travel-worker","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:5427252","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        python bin/start_celery_worker.py -n travel_worker@%h -P gevent --concurrency
        20 -Q lola.travel,lola.travel_response"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"varlogbus","mountPath":"/var/log/bus"},{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"},{"name":"metrics-sidecar","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:5427252","command":["/bin/bash"],"args":["-c","gunicorn
        -c server/web/gunicorn_metrics.conf.py bin.start_metric_web:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7400,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"1Gi"},"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"livenessProbe":{"httpGet":{"path":"/metrics","port":"http","scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"affinity":{"podAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":55,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}}]},"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["harrison"]}]},"topologyKey":"kubernetes.io/hostname"}}]}},"schedulerName":"default-scheduler"}}},"status":{"replicas":2,"fullyLabeledReplicas":2,"readyReplicas":2,"availableReplicas":2,"observedGeneration":2}},{"metadata":{"name":"lola-server-travel-worker-67b556d7f8","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-travel-worker-67b556d7f8","uid":"b6a88977-8e0b-4799-b9e3-675e97a826f7","resourceVersion":"104513573","generation":4,"creationTimestamp":"2020-03-04T15:34:43Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"67b556d7f8","worker":"celery"},"annotations":{"deployment.kubernetes.io/desired-replicas":"2","deployment.kubernetes.io/max-replicas":"3","deployment.kubernetes.io/revision":"96","sumologic.com/sourceCategory":"/prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-travel-worker","uid":"f954568e-49e0-4a2f-b901-9bcd53e2c1c8","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":0,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"67b556d7f8"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"67b556d7f8","worker":"celery"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"/prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}},{"name":"prometheus-metrics-db","emptyDir":{}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:8bb1c4a","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"travel-worker","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:8bb1c4a","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        python bin/start_celery_worker.py -n travel_worker@%h -P gevent --concurrency
        20 -Q lola.travel,lola.travel_response"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"varlogbus","mountPath":"/var/log/bus"},{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"},{"name":"metrics-sidecar","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:8bb1c4a","command":["/bin/bash"],"args":["-c","gunicorn
        -c server/web/gunicorn_metrics.conf.py bin.start_metric_web:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7400,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"1Gi"},"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"livenessProbe":{"httpGet":{"path":"/metrics","port":"http","scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"affinity":{"podAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":55,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}}]},"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["harrison"]}]},"topologyKey":"kubernetes.io/hostname"}}]}},"schedulerName":"default-scheduler"}}},"status":{"replicas":0,"observedGeneration":4}},{"metadata":{"name":"lola-server-travel-worker-6cb6d757c7","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-travel-worker-6cb6d757c7","uid":"e3b6cd46-7c99-4813-95f0-10e165773758","resourceVersion":"103696265","generation":4,"creationTimestamp":"2020-02-28T15:49:28Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"6cb6d757c7","worker":"celery"},"annotations":{"deployment.kubernetes.io/desired-replicas":"2","deployment.kubernetes.io/max-replicas":"3","deployment.kubernetes.io/revision":"93","sumologic.com/sourceCategory":"/prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-travel-worker","uid":"f954568e-49e0-4a2f-b901-9bcd53e2c1c8","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":0,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"6cb6d757c7"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"6cb6d757c7","worker":"celery"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"/prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}},{"name":"prometheus-metrics-db","emptyDir":{}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:12fb472","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"travel-worker","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:12fb472","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        python bin/start_celery_worker.py -n travel_worker@%h -P gevent --concurrency
        20 -Q lola.travel,lola.travel_response"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"varlogbus","mountPath":"/var/log/bus"},{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"},{"name":"metrics-sidecar","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:12fb472","command":["/bin/bash"],"args":["-c","gunicorn
        -c server/web/gunicorn_metrics.conf.py bin.start_metric_web:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7400,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"1Gi"},"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"livenessProbe":{"httpGet":{"path":"/metrics","port":"http","scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"affinity":{"podAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":55,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}}]},"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["harrison"]}]},"topologyKey":"kubernetes.io/hostname"}}]}},"schedulerName":"default-scheduler"}}},"status":{"replicas":0,"observedGeneration":4}},{"metadata":{"name":"lola-server-travel-worker-7668c9bf6f","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-travel-worker-7668c9bf6f","uid":"c7835f78-3813-4ef6-9408-421ae93f42a0","resourceVersion":"104484746","generation":4,"creationTimestamp":"2020-03-03T15:24:39Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"7668c9bf6f","worker":"celery"},"annotations":{"deployment.kubernetes.io/desired-replicas":"2","deployment.kubernetes.io/max-replicas":"3","deployment.kubernetes.io/revision":"95","sumologic.com/sourceCategory":"/prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-travel-worker","uid":"f954568e-49e0-4a2f-b901-9bcd53e2c1c8","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":0,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"7668c9bf6f"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"7668c9bf6f","worker":"celery"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"/prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}},{"name":"prometheus-metrics-db","emptyDir":{}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:ddb3eea","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"travel-worker","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:ddb3eea","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        python bin/start_celery_worker.py -n travel_worker@%h -P gevent --concurrency
        20 -Q lola.travel,lola.travel_response"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"varlogbus","mountPath":"/var/log/bus"},{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"},{"name":"metrics-sidecar","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:ddb3eea","command":["/bin/bash"],"args":["-c","gunicorn
        -c server/web/gunicorn_metrics.conf.py bin.start_metric_web:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7400,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"1Gi"},"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"livenessProbe":{"httpGet":{"path":"/metrics","port":"http","scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"affinity":{"podAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":55,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}}]},"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["harrison"]}]},"topologyKey":"kubernetes.io/hostname"}}]}},"schedulerName":"default-scheduler"}}},"status":{"replicas":0,"observedGeneration":4}},{"metadata":{"name":"lola-server-travel-worker-79fbbb4558","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-travel-worker-79fbbb4558","uid":"e4dd0148-c365-40d9-9da9-1cfa4b07604d","resourceVersion":"102503720","generation":4,"creationTimestamp":"2020-02-27T17:15:31Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"79fbbb4558","worker":"celery"},"annotations":{"deployment.kubernetes.io/desired-replicas":"2","deployment.kubernetes.io/max-replicas":"3","deployment.kubernetes.io/revision":"92","sumologic.com/sourceCategory":"/prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-travel-worker","uid":"f954568e-49e0-4a2f-b901-9bcd53e2c1c8","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":0,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"79fbbb4558"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"79fbbb4558","worker":"celery"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"/prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}},{"name":"prometheus-metrics-db","emptyDir":{}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:49c24ed","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"travel-worker","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:49c24ed","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        python bin/start_celery_worker.py -n travel_worker@%h -P gevent --concurrency
        20 -Q lola.travel,lola.travel_response"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"varlogbus","mountPath":"/var/log/bus"},{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"},{"name":"metrics-sidecar","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:49c24ed","command":["/bin/bash"],"args":["-c","gunicorn
        -c server/web/gunicorn_metrics.conf.py bin.start_metric_web:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7400,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"1Gi"},"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"livenessProbe":{"httpGet":{"path":"/metrics","port":"http","scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"affinity":{"podAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":55,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}}]},"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["harrison"]}]},"topologyKey":"kubernetes.io/hostname"}}]}},"schedulerName":"default-scheduler"}}},"status":{"replicas":0,"observedGeneration":4}},{"metadata":{"name":"lola-server-travel-worker-fc94c974c","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-travel-worker-fc94c974c","uid":"7e061907-b938-450f-96fe-d7450e235178","resourceVersion":"104077352","generation":4,"creationTimestamp":"2020-03-02T16:34:46Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"fc94c974c","worker":"celery"},"annotations":{"deployment.kubernetes.io/desired-replicas":"2","deployment.kubernetes.io/max-replicas":"3","deployment.kubernetes.io/revision":"94","sumologic.com/sourceCategory":"/prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-travel-worker","uid":"f954568e-49e0-4a2f-b901-9bcd53e2c1c8","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":0,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"fc94c974c"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"fc94c974c","worker":"celery"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"/prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}},{"name":"prometheus-metrics-db","emptyDir":{}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:ce6dfae","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"travel-worker","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:ce6dfae","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        python bin/start_celery_worker.py -n travel_worker@%h -P gevent --concurrency
        20 -Q lola.travel,lola.travel_response"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"varlogbus","mountPath":"/var/log/bus"},{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"},{"name":"metrics-sidecar","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:ce6dfae","command":["/bin/bash"],"args":["-c","gunicorn
        -c server/web/gunicorn_metrics.conf.py bin.start_metric_web:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7400,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"1Gi"},"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"livenessProbe":{"httpGet":{"path":"/metrics","port":"http","scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"affinity":{"podAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":55,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}}]},"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["harrison"]}]},"topologyKey":"kubernetes.io/hostname"}}]}},"schedulerName":"default-scheduler"}}},"status":{"replicas":0,"observedGeneration":4}},{"metadata":{"name":"lola-server-web-547bb9dd8","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-web-547bb9dd8","uid":"bdaa7eb8-f806-4413-beda-dd08bdc1e27e","resourceVersion":"104077365","generation":8,"creationTimestamp":"2020-03-02T16:34:46Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"547bb9dd8","worker":"web"},"annotations":{"deployment.kubernetes.io/desired-replicas":"4","deployment.kubernetes.io/max-replicas":"5","deployment.kubernetes.io/revision":"94","sumologic.com/sourceCategory":"/prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-web","uid":"6f8c3c57-7351-4617-82a1-d914b802bb14","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":0,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"547bb9dd8"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"547bb9dd8","worker":"web"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"/prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:ce6dfae","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"web","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:ce6dfae","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        gunicorn --statsd-host=statsd-exporter.monitoring:9125 --statsd-prefix=lola-server.prod
        -c server/web/gunicorn.conf.py bin.start_web:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7200,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"7Gi"},"requests":{"memory":"2Gi"}},"volumeMounts":[{"name":"varlogbus","mountPath":"/var/log/bus"}],"livenessProbe":{"httpGet":{"path":"/status","port":7200,"scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":45,"dnsPolicy":"ClusterFirst","securityContext":{},"affinity":{"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":75,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["harrison"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}}]}},"schedulerName":"default-scheduler"}}},"status":{"replicas":0,"observedGeneration":8}},{"metadata":{"name":"lola-server-web-56695c9cbd","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-web-56695c9cbd","uid":"bce45a5e-d13b-4584-bcc4-2199745f86b6","resourceVersion":"104484900","generation":8,"creationTimestamp":"2020-03-03T15:24:39Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"56695c9cbd","worker":"web"},"annotations":{"deployment.kubernetes.io/desired-replicas":"4","deployment.kubernetes.io/max-replicas":"5","deployment.kubernetes.io/revision":"95","sumologic.com/sourceCategory":"/prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-web","uid":"6f8c3c57-7351-4617-82a1-d914b802bb14","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":0,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"56695c9cbd"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"56695c9cbd","worker":"web"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"/prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:ddb3eea","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"web","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:ddb3eea","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        gunicorn --statsd-host=statsd-exporter.monitoring:9125 --statsd-prefix=lola-server.prod
        -c server/web/gunicorn.conf.py bin.start_web:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7200,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"7Gi"},"requests":{"memory":"2Gi"}},"volumeMounts":[{"name":"varlogbus","mountPath":"/var/log/bus"}],"livenessProbe":{"httpGet":{"path":"/status","port":7200,"scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":45,"dnsPolicy":"ClusterFirst","securityContext":{},"affinity":{"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":75,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["harrison"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}}]}},"schedulerName":"default-scheduler"}}},"status":{"replicas":0,"observedGeneration":8}},{"metadata":{"name":"lola-server-web-59676dd998","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-web-59676dd998","uid":"71a351c3-52cc-4c2c-9842-2044c3da5cf5","resourceVersion":"102504092","generation":8,"creationTimestamp":"2020-02-27T17:15:31Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"59676dd998","worker":"web"},"annotations":{"deployment.kubernetes.io/desired-replicas":"4","deployment.kubernetes.io/max-replicas":"5","deployment.kubernetes.io/revision":"92","sumologic.com/sourceCategory":"/prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-web","uid":"6f8c3c57-7351-4617-82a1-d914b802bb14","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":0,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"59676dd998"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"59676dd998","worker":"web"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"/prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:49c24ed","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"web","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:49c24ed","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        gunicorn --statsd-host=statsd-exporter.monitoring:9125 --statsd-prefix=lola-server.prod
        -c server/web/gunicorn.conf.py bin.start_web:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7200,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"7Gi"},"requests":{"memory":"2Gi"}},"volumeMounts":[{"name":"varlogbus","mountPath":"/var/log/bus"}],"livenessProbe":{"httpGet":{"path":"/status","port":7200,"scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":45,"dnsPolicy":"ClusterFirst","securityContext":{},"affinity":{"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":75,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["harrison"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}}]}},"schedulerName":"default-scheduler"}}},"status":{"replicas":0,"observedGeneration":8}},{"metadata":{"name":"lola-server-web-74c6b7fbdb","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-web-74c6b7fbdb","uid":"9d31e687-1a3a-4335-bb89-7e66551d4bed","resourceVersion":"104513793","generation":8,"creationTimestamp":"2020-03-04T15:34:43Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"74c6b7fbdb","worker":"web"},"annotations":{"deployment.kubernetes.io/desired-replicas":"4","deployment.kubernetes.io/max-replicas":"5","deployment.kubernetes.io/revision":"96","sumologic.com/sourceCategory":"/prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-web","uid":"6f8c3c57-7351-4617-82a1-d914b802bb14","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":0,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"74c6b7fbdb"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"74c6b7fbdb","worker":"web"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"/prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:8bb1c4a","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"web","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:8bb1c4a","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        gunicorn --statsd-host=statsd-exporter.monitoring:9125 --statsd-prefix=lola-server.prod
        -c server/web/gunicorn.conf.py bin.start_web:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7200,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"7Gi"},"requests":{"memory":"2Gi"}},"volumeMounts":[{"name":"varlogbus","mountPath":"/var/log/bus"}],"livenessProbe":{"httpGet":{"path":"/status","port":7200,"scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":45,"dnsPolicy":"ClusterFirst","securityContext":{},"affinity":{"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":75,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["harrison"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}}]}},"schedulerName":"default-scheduler"}}},"status":{"replicas":0,"observedGeneration":8}},{"metadata":{"name":"lola-server-web-864cf559df","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-web-864cf559df","uid":"8b386eb6-cbf7-4c4a-adb4-8ac50996158e","resourceVersion":"104552558","generation":4,"creationTimestamp":"2020-03-04T17:08:32Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"864cf559df","worker":"web"},"annotations":{"deployment.kubernetes.io/desired-replicas":"4","deployment.kubernetes.io/max-replicas":"5","deployment.kubernetes.io/revision":"97","sumologic.com/sourceCategory":"prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-web","uid":"6f8c3c57-7351-4617-82a1-d914b802bb14","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":4,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"864cf559df"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"864cf559df","worker":"web"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:5427252","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"web","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:5427252","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        gunicorn --statsd-host=statsd-exporter.monitoring:9125 --statsd-prefix=lola-server.prod
        -c server/web/gunicorn.conf.py bin.start_web:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7200,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"7Gi"},"requests":{"memory":"2Gi"}},"volumeMounts":[{"name":"varlogbus","mountPath":"/var/log/bus"}],"livenessProbe":{"httpGet":{"path":"/status","port":7200,"scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":45,"dnsPolicy":"ClusterFirst","securityContext":{},"affinity":{"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":75,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["harrison"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}}]}},"schedulerName":"default-scheduler"}}},"status":{"replicas":4,"fullyLabeledReplicas":4,"readyReplicas":4,"availableReplicas":4,"observedGeneration":4}},{"metadata":{"name":"lola-server-web-f89f5dd64","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-web-f89f5dd64","uid":"3eb2e66d-1a00-4edb-8270-b6778da0a6ec","resourceVersion":"103696623","generation":8,"creationTimestamp":"2020-02-28T15:49:28Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"f89f5dd64","worker":"web"},"annotations":{"deployment.kubernetes.io/desired-replicas":"4","deployment.kubernetes.io/max-replicas":"5","deployment.kubernetes.io/revision":"93","sumologic.com/sourceCategory":"/prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-web","uid":"6f8c3c57-7351-4617-82a1-d914b802bb14","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":0,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"f89f5dd64"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"f89f5dd64","worker":"web"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"/prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:12fb472","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"web","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:12fb472","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        gunicorn --statsd-host=statsd-exporter.monitoring:9125 --statsd-prefix=lola-server.prod
        -c server/web/gunicorn.conf.py bin.start_web:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7200,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"7Gi"},"requests":{"memory":"2Gi"}},"volumeMounts":[{"name":"varlogbus","mountPath":"/var/log/bus"}],"livenessProbe":{"httpGet":{"path":"/status","port":7200,"scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":45,"dnsPolicy":"ClusterFirst","securityContext":{},"affinity":{"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":75,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["harrison"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}}]}},"schedulerName":"default-scheduler"}}},"status":{"replicas":0,"observedGeneration":8}},{"metadata":{"name":"lola-server-websockets-worker-5b5795cd85","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-websockets-worker-5b5795cd85","uid":"e56b1155-049e-4dfd-9f45-494d6607dc8e","resourceVersion":"103696298","generation":4,"creationTimestamp":"2020-02-28T15:49:28Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"5b5795cd85","worker":"celery"},"annotations":{"deployment.kubernetes.io/desired-replicas":"2","deployment.kubernetes.io/max-replicas":"3","deployment.kubernetes.io/revision":"93","sumologic.com/sourceCategory":"/prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-websockets-worker","uid":"c5c9b0b2-9a17-466d-ae5b-364e99657f62","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":0,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"5b5795cd85"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"5b5795cd85","worker":"celery"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"/prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}},{"name":"prometheus-metrics-db","emptyDir":{}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:12fb472","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"websockets-worker","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:12fb472","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        python bin/start_celery_worker.py -n websockets_worker@%h -P gevent --concurrency
        20 -Q lola.websockets"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"varlogbus","mountPath":"/var/log/bus"},{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"},{"name":"metrics-sidecar","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:12fb472","command":["/bin/bash"],"args":["-c","gunicorn
        -c server/web/gunicorn_metrics.conf.py bin.start_metric_web:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7400,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"1Gi"},"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"livenessProbe":{"httpGet":{"path":"/metrics","port":"http","scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"affinity":{"podAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":55,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}}]},"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["harrison"]}]},"topologyKey":"kubernetes.io/hostname"}}]}},"schedulerName":"default-scheduler"}}},"status":{"replicas":0,"observedGeneration":4}},{"metadata":{"name":"lola-server-websockets-worker-5b86c5654f","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-websockets-worker-5b86c5654f","uid":"87d77a4e-5dc8-4cd0-88b9-821f62c1f9ff","resourceVersion":"104484600","generation":4,"creationTimestamp":"2020-03-03T15:24:39Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"5b86c5654f","worker":"celery"},"annotations":{"deployment.kubernetes.io/desired-replicas":"2","deployment.kubernetes.io/max-replicas":"3","deployment.kubernetes.io/revision":"95","sumologic.com/sourceCategory":"/prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-websockets-worker","uid":"c5c9b0b2-9a17-466d-ae5b-364e99657f62","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":0,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"5b86c5654f"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"5b86c5654f","worker":"celery"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"/prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}},{"name":"prometheus-metrics-db","emptyDir":{}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:ddb3eea","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"websockets-worker","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:ddb3eea","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        python bin/start_celery_worker.py -n websockets_worker@%h -P gevent --concurrency
        20 -Q lola.websockets"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"varlogbus","mountPath":"/var/log/bus"},{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"},{"name":"metrics-sidecar","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:ddb3eea","command":["/bin/bash"],"args":["-c","gunicorn
        -c server/web/gunicorn_metrics.conf.py bin.start_metric_web:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7400,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"1Gi"},"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"livenessProbe":{"httpGet":{"path":"/metrics","port":"http","scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"affinity":{"podAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":55,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}}]},"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["harrison"]}]},"topologyKey":"kubernetes.io/hostname"}}]}},"schedulerName":"default-scheduler"}}},"status":{"replicas":0,"observedGeneration":4}},{"metadata":{"name":"lola-server-websockets-worker-5c49b98b55","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-websockets-worker-5c49b98b55","uid":"f130e4bc-dda6-4518-952e-22bff527b498","resourceVersion":"104077397","generation":4,"creationTimestamp":"2020-03-02T16:34:46Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"5c49b98b55","worker":"celery"},"annotations":{"deployment.kubernetes.io/desired-replicas":"2","deployment.kubernetes.io/max-replicas":"3","deployment.kubernetes.io/revision":"94","sumologic.com/sourceCategory":"/prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-websockets-worker","uid":"c5c9b0b2-9a17-466d-ae5b-364e99657f62","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":0,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"5c49b98b55"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"5c49b98b55","worker":"celery"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"/prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}},{"name":"prometheus-metrics-db","emptyDir":{}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:ce6dfae","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"websockets-worker","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:ce6dfae","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        python bin/start_celery_worker.py -n websockets_worker@%h -P gevent --concurrency
        20 -Q lola.websockets"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"varlogbus","mountPath":"/var/log/bus"},{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"},{"name":"metrics-sidecar","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:ce6dfae","command":["/bin/bash"],"args":["-c","gunicorn
        -c server/web/gunicorn_metrics.conf.py bin.start_metric_web:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7400,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"1Gi"},"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"livenessProbe":{"httpGet":{"path":"/metrics","port":"http","scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"affinity":{"podAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":55,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}}]},"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["harrison"]}]},"topologyKey":"kubernetes.io/hostname"}}]}},"schedulerName":"default-scheduler"}}},"status":{"replicas":0,"observedGeneration":4}},{"metadata":{"name":"lola-server-websockets-worker-5c5b47bb6f","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-websockets-worker-5c5b47bb6f","uid":"4d878aa4-95f1-486f-ac77-4c61fcdd8799","resourceVersion":"104513737","generation":2,"creationTimestamp":"2020-03-04T17:08:32Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"5c5b47bb6f","worker":"celery"},"annotations":{"deployment.kubernetes.io/desired-replicas":"2","deployment.kubernetes.io/max-replicas":"3","deployment.kubernetes.io/revision":"97","sumologic.com/sourceCategory":"prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-websockets-worker","uid":"c5c9b0b2-9a17-466d-ae5b-364e99657f62","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":2,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"5c5b47bb6f"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"5c5b47bb6f","worker":"celery"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}},{"name":"prometheus-metrics-db","emptyDir":{}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:5427252","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"websockets-worker","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:5427252","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        python bin/start_celery_worker.py -n websockets_worker@%h -P gevent --concurrency
        20 -Q lola.websockets"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"varlogbus","mountPath":"/var/log/bus"},{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"},{"name":"metrics-sidecar","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:5427252","command":["/bin/bash"],"args":["-c","gunicorn
        -c server/web/gunicorn_metrics.conf.py bin.start_metric_web:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7400,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"1Gi"},"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"livenessProbe":{"httpGet":{"path":"/metrics","port":"http","scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"affinity":{"podAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":55,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}}]},"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["harrison"]}]},"topologyKey":"kubernetes.io/hostname"}}]}},"schedulerName":"default-scheduler"}}},"status":{"replicas":2,"fullyLabeledReplicas":2,"readyReplicas":2,"availableReplicas":2,"observedGeneration":2}},{"metadata":{"name":"lola-server-websockets-worker-85c66748db","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-websockets-worker-85c66748db","uid":"99b201de-007d-43e7-acb3-8930cacc272e","resourceVersion":"104513590","generation":4,"creationTimestamp":"2020-03-04T15:34:43Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"85c66748db","worker":"celery"},"annotations":{"deployment.kubernetes.io/desired-replicas":"2","deployment.kubernetes.io/max-replicas":"3","deployment.kubernetes.io/revision":"96","sumologic.com/sourceCategory":"/prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-websockets-worker","uid":"c5c9b0b2-9a17-466d-ae5b-364e99657f62","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":0,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"85c66748db"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"85c66748db","worker":"celery"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"/prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}},{"name":"prometheus-metrics-db","emptyDir":{}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:8bb1c4a","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"websockets-worker","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:8bb1c4a","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        python bin/start_celery_worker.py -n websockets_worker@%h -P gevent --concurrency
        20 -Q lola.websockets"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"varlogbus","mountPath":"/var/log/bus"},{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"},{"name":"metrics-sidecar","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:8bb1c4a","command":["/bin/bash"],"args":["-c","gunicorn
        -c server/web/gunicorn_metrics.conf.py bin.start_metric_web:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7400,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"1Gi"},"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"livenessProbe":{"httpGet":{"path":"/metrics","port":"http","scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"affinity":{"podAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":55,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}}]},"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["harrison"]}]},"topologyKey":"kubernetes.io/hostname"}}]}},"schedulerName":"default-scheduler"}}},"status":{"replicas":0,"observedGeneration":4}},{"metadata":{"name":"lola-server-websockets-worker-dd959787d","namespace":"core-services","selfLink":"/apis/apps/v1/namespaces/core-services/replicasets/lola-server-websockets-worker-dd959787d","uid":"253c968c-7fa8-4850-8c1f-4b3251196a95","resourceVersion":"102503690","generation":4,"creationTimestamp":"2020-02-27T17:15:31Z","labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"dd959787d","worker":"celery"},"annotations":{"deployment.kubernetes.io/desired-replicas":"2","deployment.kubernetes.io/max-replicas":"3","deployment.kubernetes.io/revision":"92","sumologic.com/sourceCategory":"/prod/%{label:app}"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"lola-server-websockets-worker","uid":"c5c9b0b2-9a17-466d-ae5b-364e99657f62","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":0,"selector":{"matchLabels":{"app":"lola-server","owner":"engineering","pod-template-hash":"dd959787d"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"lola-server","owner":"engineering","pod-template-hash":"dd959787d","worker":"celery"},"annotations":{"iam.amazonaws.com/role":"arn:aws:iam::565166388327:role/k8s-prod-lola-server","kubectl.kubernetes.io/restartedAt":"2020-01-30T15:24:11-05:00","sumologic.com/sourceCategory":"/prod/%{label:app}"}},"spec":{"volumes":[{"name":"varlogbus","persistentVolumeClaim":{"claimName":"nfs"}},{"name":"prometheus-metrics-db","emptyDir":{}}],"initContainers":[{"name":"pre-deploy-check","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:49c24ed","command":["/bin/bash"],"args":["-c","python
        bin/cmdline.py pre_deploy"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"websockets-worker","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:49c24ed","command":["/bin/bash"],"args":["-c","AWS_XRAY_DAEMON_ADDRESS=\"${HOST_IP:=127.0.0.1}:2000\"
        python bin/start_celery_worker.py -n websockets_worker@%h -P gevent --concurrency
        20 -Q lola.websockets"],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"varlogbus","mountPath":"/var/log/bus"},{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"},{"name":"metrics-sidecar","image":"565166388327.dkr.ecr.us-east-1.amazonaws.com/lolatravel/lola-server:49c24ed","command":["/bin/bash"],"args":["-c","gunicorn
        -c server/web/gunicorn_metrics.conf.py bin.start_metric_web:init_and_create_flask_app\\(\\)"],"ports":[{"name":"http","containerPort":7400,"protocol":"TCP"}],"envFrom":[{"configMapRef":{"name":"lola-server-config-5gdf6tfdmt"}},{"secretRef":{"name":"lola-server-secrets"}}],"env":[{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}}],"resources":{"limits":{"memory":"1Gi"},"requests":{"memory":"128Mi"}},"volumeMounts":[{"name":"prometheus-metrics-db","mountPath":"/app/prometheus"}],"livenessProbe":{"httpGet":{"path":"/metrics","port":"http","scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"affinity":{"podAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":55,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["celery"]}]},"topologyKey":"kubernetes.io/hostname"}}]},"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["lola-server"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["travel-service"]},{"key":"worker","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"}},{"weight":50,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["harrison"]}]},"topologyKey":"kubernetes.io/hostname"}}]}},"schedulerName":"default-scheduler"}}},"status":{"replicas":0,"observedGeneration":4}}]}

        '
    headers:
      Content-Type:
      - application/json
      Date:
      - Thu, 05 Mar 2020 13:40:07 GMT
      Transfer-Encoding:
      - chunked
    status:
      code: 200
      message: OK
version: 1
