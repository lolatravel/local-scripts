interactions:
- request:
    body: null
    headers: {}
    method: GET
    uri: https://api.github.com/repos/lolatravel/lola-server/compare/74d5a0d...8fb51f8
  response:
    body:
      string: '{"url":"https://api.github.com/repos/lolatravel/lola-server/compare/74d5a0d...8fb51f8","html_url":"https://github.com/lolatravel/lola-server/compare/74d5a0d...8fb51f8","permalink_url":"https://github.com/lolatravel/lola-server/compare/lolatravel:74d5a0d...lolatravel:8fb51f8","diff_url":"https://github.com/lolatravel/lola-server/compare/74d5a0d...8fb51f8.diff","patch_url":"https://github.com/lolatravel/lola-server/compare/74d5a0d...8fb51f8.patch","base_commit":{"sha":"74d5a0d3bff1ad7ff19a0c4ed0d8ecf17800e484","node_id":"MDY6Q29tbWl0Mzk2NDUxNDQ6NzRkNWEwZDNiZmYxYWQ3ZmYxOWEwYzRlZDBkOGVjZjE3ODAwZTQ4NA==","commit":{"author":{"name":"lukewalshct","email":"luke@lola.com","date":"2020-02-21T15:18:37Z"},"committer":{"name":"GitHub","email":"noreply@github.com","date":"2020-02-21T15:18:37Z"},"message":"EN-1
        bumped lola auth (#6108)\n\n* bumped lola auth\n\n* removed kinesis models
        pubsub on app start\n\n* Revert \"removed kinesis models pubsub on app start\"\n\nThis
        reverts commit 4ea3f50947728eeae9f7575ca3977073d616d8a5.","tree":{"sha":"45461565c14944363563681a3dc6560fb2d9341d","url":"https://api.github.com/repos/lolatravel/lola-server/git/trees/45461565c14944363563681a3dc6560fb2d9341d"},"url":"https://api.github.com/repos/lolatravel/lola-server/git/commits/74d5a0d3bff1ad7ff19a0c4ed0d8ecf17800e484","comment_count":0,"verification":{"verified":true,"reason":"valid","signature":"-----BEGIN
        PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJeT/TOCRBK7hj4Ov3rIwAAdHIIADPbeDcMy6VK9btI+SVivN0O\nusCLaHY9jFpSQMFlvMKwfY9yMinEUPxOsaFMmuFF84Yv0WTrvpg2iG/J0LGaZ06p\n8xx0y282699L338+VSRt+yKRkSTM9WutIDDGAVMa4LHHi3mFGQObSye4cUXkX9Rl\nMtzNwNPrRQDLEd6aG3dHK/uYU82jHJhuMZzX6UZ/erDh/hReYYsI/MQh5nJmNFnF\nh0X+QyMdKV7tfnRaiclq7gSzTXxjnFIcsPCesym+7W5ISdlptog2/W9bIvDh7RAB\n7rXOmkjGmF9EDi9rQEBeOtwRWqiLNrbhtsBxzW8t4bpwBBQqlMpz6XZoXLAcXqE=\n=eTgL\n-----END
        PGP SIGNATURE-----\n","payload":"tree 45461565c14944363563681a3dc6560fb2d9341d\nparent
        a398d33e74159ce8f02925b5982254e24990253f\nauthor lukewalshct <luke@lola.com>
        1582298317 -0500\ncommitter GitHub <noreply@github.com> 1582298317 +0000\n\nEN-1
        bumped lola auth (#6108)\n\n* bumped lola auth\n\n* removed kinesis models
        pubsub on app start\n\n* Revert \"removed kinesis models pubsub on app start\"\n\nThis
        reverts commit 4ea3f50947728eeae9f7575ca3977073d616d8a5.\n"}},"url":"https://api.github.com/repos/lolatravel/lola-server/commits/74d5a0d3bff1ad7ff19a0c4ed0d8ecf17800e484","html_url":"https://github.com/lolatravel/lola-server/commit/74d5a0d3bff1ad7ff19a0c4ed0d8ecf17800e484","comments_url":"https://api.github.com/repos/lolatravel/lola-server/commits/74d5a0d3bff1ad7ff19a0c4ed0d8ecf17800e484/comments","author":{"login":"lukewalshct","id":11319953,"node_id":"MDQ6VXNlcjExMzE5OTUz","avatar_url":"https://avatars0.githubusercontent.com/u/11319953?v=4","gravatar_id":"","url":"https://api.github.com/users/lukewalshct","html_url":"https://github.com/lukewalshct","followers_url":"https://api.github.com/users/lukewalshct/followers","following_url":"https://api.github.com/users/lukewalshct/following{/other_user}","gists_url":"https://api.github.com/users/lukewalshct/gists{/gist_id}","starred_url":"https://api.github.com/users/lukewalshct/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukewalshct/subscriptions","organizations_url":"https://api.github.com/users/lukewalshct/orgs","repos_url":"https://api.github.com/users/lukewalshct/repos","events_url":"https://api.github.com/users/lukewalshct/events{/privacy}","received_events_url":"https://api.github.com/users/lukewalshct/received_events","type":"User","site_admin":false},"committer":{"login":"web-flow","id":19864447,"node_id":"MDQ6VXNlcjE5ODY0NDQ3","avatar_url":"https://avatars3.githubusercontent.com/u/19864447?v=4","gravatar_id":"","url":"https://api.github.com/users/web-flow","html_url":"https://github.com/web-flow","followers_url":"https://api.github.com/users/web-flow/followers","following_url":"https://api.github.com/users/web-flow/following{/other_user}","gists_url":"https://api.github.com/users/web-flow/gists{/gist_id}","starred_url":"https://api.github.com/users/web-flow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/web-flow/subscriptions","organizations_url":"https://api.github.com/users/web-flow/orgs","repos_url":"https://api.github.com/users/web-flow/repos","events_url":"https://api.github.com/users/web-flow/events{/privacy}","received_events_url":"https://api.github.com/users/web-flow/received_events","type":"User","site_admin":false},"parents":[{"sha":"a398d33e74159ce8f02925b5982254e24990253f","url":"https://api.github.com/repos/lolatravel/lola-server/commits/a398d33e74159ce8f02925b5982254e24990253f","html_url":"https://github.com/lolatravel/lola-server/commit/a398d33e74159ce8f02925b5982254e24990253f"}]},"merge_base_commit":{"sha":"74d5a0d3bff1ad7ff19a0c4ed0d8ecf17800e484","node_id":"MDY6Q29tbWl0Mzk2NDUxNDQ6NzRkNWEwZDNiZmYxYWQ3ZmYxOWEwYzRlZDBkOGVjZjE3ODAwZTQ4NA==","commit":{"author":{"name":"lukewalshct","email":"luke@lola.com","date":"2020-02-21T15:18:37Z"},"committer":{"name":"GitHub","email":"noreply@github.com","date":"2020-02-21T15:18:37Z"},"message":"EN-1
        bumped lola auth (#6108)\n\n* bumped lola auth\n\n* removed kinesis models
        pubsub on app start\n\n* Revert \"removed kinesis models pubsub on app start\"\n\nThis
        reverts commit 4ea3f50947728eeae9f7575ca3977073d616d8a5.","tree":{"sha":"45461565c14944363563681a3dc6560fb2d9341d","url":"https://api.github.com/repos/lolatravel/lola-server/git/trees/45461565c14944363563681a3dc6560fb2d9341d"},"url":"https://api.github.com/repos/lolatravel/lola-server/git/commits/74d5a0d3bff1ad7ff19a0c4ed0d8ecf17800e484","comment_count":0,"verification":{"verified":true,"reason":"valid","signature":"-----BEGIN
        PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJeT/TOCRBK7hj4Ov3rIwAAdHIIADPbeDcMy6VK9btI+SVivN0O\nusCLaHY9jFpSQMFlvMKwfY9yMinEUPxOsaFMmuFF84Yv0WTrvpg2iG/J0LGaZ06p\n8xx0y282699L338+VSRt+yKRkSTM9WutIDDGAVMa4LHHi3mFGQObSye4cUXkX9Rl\nMtzNwNPrRQDLEd6aG3dHK/uYU82jHJhuMZzX6UZ/erDh/hReYYsI/MQh5nJmNFnF\nh0X+QyMdKV7tfnRaiclq7gSzTXxjnFIcsPCesym+7W5ISdlptog2/W9bIvDh7RAB\n7rXOmkjGmF9EDi9rQEBeOtwRWqiLNrbhtsBxzW8t4bpwBBQqlMpz6XZoXLAcXqE=\n=eTgL\n-----END
        PGP SIGNATURE-----\n","payload":"tree 45461565c14944363563681a3dc6560fb2d9341d\nparent
        a398d33e74159ce8f02925b5982254e24990253f\nauthor lukewalshct <luke@lola.com>
        1582298317 -0500\ncommitter GitHub <noreply@github.com> 1582298317 +0000\n\nEN-1
        bumped lola auth (#6108)\n\n* bumped lola auth\n\n* removed kinesis models
        pubsub on app start\n\n* Revert \"removed kinesis models pubsub on app start\"\n\nThis
        reverts commit 4ea3f50947728eeae9f7575ca3977073d616d8a5.\n"}},"url":"https://api.github.com/repos/lolatravel/lola-server/commits/74d5a0d3bff1ad7ff19a0c4ed0d8ecf17800e484","html_url":"https://github.com/lolatravel/lola-server/commit/74d5a0d3bff1ad7ff19a0c4ed0d8ecf17800e484","comments_url":"https://api.github.com/repos/lolatravel/lola-server/commits/74d5a0d3bff1ad7ff19a0c4ed0d8ecf17800e484/comments","author":{"login":"lukewalshct","id":11319953,"node_id":"MDQ6VXNlcjExMzE5OTUz","avatar_url":"https://avatars0.githubusercontent.com/u/11319953?v=4","gravatar_id":"","url":"https://api.github.com/users/lukewalshct","html_url":"https://github.com/lukewalshct","followers_url":"https://api.github.com/users/lukewalshct/followers","following_url":"https://api.github.com/users/lukewalshct/following{/other_user}","gists_url":"https://api.github.com/users/lukewalshct/gists{/gist_id}","starred_url":"https://api.github.com/users/lukewalshct/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukewalshct/subscriptions","organizations_url":"https://api.github.com/users/lukewalshct/orgs","repos_url":"https://api.github.com/users/lukewalshct/repos","events_url":"https://api.github.com/users/lukewalshct/events{/privacy}","received_events_url":"https://api.github.com/users/lukewalshct/received_events","type":"User","site_admin":false},"committer":{"login":"web-flow","id":19864447,"node_id":"MDQ6VXNlcjE5ODY0NDQ3","avatar_url":"https://avatars3.githubusercontent.com/u/19864447?v=4","gravatar_id":"","url":"https://api.github.com/users/web-flow","html_url":"https://github.com/web-flow","followers_url":"https://api.github.com/users/web-flow/followers","following_url":"https://api.github.com/users/web-flow/following{/other_user}","gists_url":"https://api.github.com/users/web-flow/gists{/gist_id}","starred_url":"https://api.github.com/users/web-flow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/web-flow/subscriptions","organizations_url":"https://api.github.com/users/web-flow/orgs","repos_url":"https://api.github.com/users/web-flow/repos","events_url":"https://api.github.com/users/web-flow/events{/privacy}","received_events_url":"https://api.github.com/users/web-flow/received_events","type":"User","site_admin":false},"parents":[{"sha":"a398d33e74159ce8f02925b5982254e24990253f","url":"https://api.github.com/repos/lolatravel/lola-server/commits/a398d33e74159ce8f02925b5982254e24990253f","html_url":"https://github.com/lolatravel/lola-server/commit/a398d33e74159ce8f02925b5982254e24990253f"}]},"status":"ahead","ahead_by":2,"behind_by":0,"total_commits":2,"commits":[{"sha":"53687f5f68891635bc8f1f231fa9998a265b6edd","node_id":"MDY6Q29tbWl0Mzk2NDUxNDQ6NTM2ODdmNWY2ODg5MTYzNWJjOGYxZjIzMWZhOTk5OGEyNjViNmVkZA==","commit":{"author":{"name":"Dennis
        Doughty","email":"doughty@alum.mit.edu","date":"2020-02-21T18:23:30Z"},"committer":{"name":"GitHub","email":"noreply@github.com","date":"2020-02-21T18:23:30Z"},"message":"*
        Refactor the booking bot a little to make it easier to send multiple messages.
        (#6155)\n\n* Calculate savings and post to Slack as appropriate.","tree":{"sha":"9ff360c5dd6caac5a1b29bae05947043b4058d8d","url":"https://api.github.com/repos/lolatravel/lola-server/git/trees/9ff360c5dd6caac5a1b29bae05947043b4058d8d"},"url":"https://api.github.com/repos/lolatravel/lola-server/git/commits/53687f5f68891635bc8f1f231fa9998a265b6edd","comment_count":0,"verification":{"verified":true,"reason":"valid","signature":"-----BEGIN
        PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJeUCAiCRBK7hj4Ov3rIwAAdHIIABd6fhSd1OPoPFYoUwIdBn3Q\ngy/EhOL0j+XKpP2lU7ag70HAQ4R65zcqPgJP6hAZxjdFFfhm+G0MISh3SYbs9V1c\nAb/bQ40ROuL5BJppNL+QI6OifJYKqnFj+J/4uLMgtmwJBfhuD31WHil0hry3ehHN\ncr7WXwls/CD0u71R1ya/PNQLv1xB6eRQyu0/JqbKSDk6QGgXQ540wwJ++ofUpMdr\nveAEwsOdWbRrgFDXNTchcQ8ZbEMYPKQP7+zjpxkHZ54t9QCB2oGj6+wKSityzbFQ\noxXEawXEIvGgrNywYs6llb4kEXDuoSS3TWkhKcOOKC7TdV8bs4GoPv4e4TZ2cnw=\n=7xEr\n-----END
        PGP SIGNATURE-----\n","payload":"tree 9ff360c5dd6caac5a1b29bae05947043b4058d8d\nparent
        74d5a0d3bff1ad7ff19a0c4ed0d8ecf17800e484\nauthor Dennis Doughty <doughty@alum.mit.edu>
        1582309410 +0100\ncommitter GitHub <noreply@github.com> 1582309410 +0000\n\n*
        Refactor the booking bot a little to make it easier to send multiple messages.
        (#6155)\n\n* Calculate savings and post to Slack as appropriate."}},"url":"https://api.github.com/repos/lolatravel/lola-server/commits/53687f5f68891635bc8f1f231fa9998a265b6edd","html_url":"https://github.com/lolatravel/lola-server/commit/53687f5f68891635bc8f1f231fa9998a265b6edd","comments_url":"https://api.github.com/repos/lolatravel/lola-server/commits/53687f5f68891635bc8f1f231fa9998a265b6edd/comments","author":{"login":"ddoughty","id":2258578,"node_id":"MDQ6VXNlcjIyNTg1Nzg=","avatar_url":"https://avatars3.githubusercontent.com/u/2258578?v=4","gravatar_id":"","url":"https://api.github.com/users/ddoughty","html_url":"https://github.com/ddoughty","followers_url":"https://api.github.com/users/ddoughty/followers","following_url":"https://api.github.com/users/ddoughty/following{/other_user}","gists_url":"https://api.github.com/users/ddoughty/gists{/gist_id}","starred_url":"https://api.github.com/users/ddoughty/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddoughty/subscriptions","organizations_url":"https://api.github.com/users/ddoughty/orgs","repos_url":"https://api.github.com/users/ddoughty/repos","events_url":"https://api.github.com/users/ddoughty/events{/privacy}","received_events_url":"https://api.github.com/users/ddoughty/received_events","type":"User","site_admin":false},"committer":{"login":"web-flow","id":19864447,"node_id":"MDQ6VXNlcjE5ODY0NDQ3","avatar_url":"https://avatars3.githubusercontent.com/u/19864447?v=4","gravatar_id":"","url":"https://api.github.com/users/web-flow","html_url":"https://github.com/web-flow","followers_url":"https://api.github.com/users/web-flow/followers","following_url":"https://api.github.com/users/web-flow/following{/other_user}","gists_url":"https://api.github.com/users/web-flow/gists{/gist_id}","starred_url":"https://api.github.com/users/web-flow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/web-flow/subscriptions","organizations_url":"https://api.github.com/users/web-flow/orgs","repos_url":"https://api.github.com/users/web-flow/repos","events_url":"https://api.github.com/users/web-flow/events{/privacy}","received_events_url":"https://api.github.com/users/web-flow/received_events","type":"User","site_admin":false},"parents":[{"sha":"74d5a0d3bff1ad7ff19a0c4ed0d8ecf17800e484","url":"https://api.github.com/repos/lolatravel/lola-server/commits/74d5a0d3bff1ad7ff19a0c4ed0d8ecf17800e484","html_url":"https://github.com/lolatravel/lola-server/commit/74d5a0d3bff1ad7ff19a0c4ed0d8ecf17800e484"}]},{"sha":"8fb51f8d192b006e946fed65564cb906f62ff9ec","node_id":"MDY6Q29tbWl0Mzk2NDUxNDQ6OGZiNTFmOGQxOTJiMDA2ZTk0NmZlZDY1NTY0Y2I5MDZmNjJmZjllYw==","commit":{"author":{"name":"Marina
        Novikova","email":"mpnovikova@gmail.com","date":"2020-02-24T14:53:07Z"},"committer":{"name":"GitHub","email":"noreply@github.com","date":"2020-02-24T14:53:07Z"},"message":"Create
        new policy mutation (#6140)","tree":{"sha":"0de0d46d70c7953f5fc8489b7a7d46859a1bafbe","url":"https://api.github.com/repos/lolatravel/lola-server/git/trees/0de0d46d70c7953f5fc8489b7a7d46859a1bafbe"},"url":"https://api.github.com/repos/lolatravel/lola-server/git/commits/8fb51f8d192b006e946fed65564cb906f62ff9ec","comment_count":0,"verification":{"verified":true,"reason":"valid","signature":"-----BEGIN
        PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJeU+NTCRBK7hj4Ov3rIwAAdHIIAHHN/nTKPshhZxtr+RMNjA5j\np16VfMCPxZmrWl37efc1OpPeFJ0ynS8br0aDGcZ++BEcHuGabs+gNdGkijF7ejhH\n9BA+6HBoP8UfFhX+ai/P3EisMbmPjAPlpdbneruvEa/VBsco8BWCxFVl74/oM2BM\ntLrsoiFdGu2eFciccJSB8D6NKrf07GVOK3zWtIX5mTwTtqZdLWN6uMwc75WOBh4M\n21k0mYljYiy06IIoHpOEZfVL9Y8kLiaaYuqC8tG/54ekalRDkNsp9ly3eP/MwAap\n2i9cHGdS/b4BJ4AoHWzp3UXGEjh3/7R8sgFTM90qgc7pa8rx695wxf6SjZkl/TI=\n=LI8q\n-----END
        PGP SIGNATURE-----\n","payload":"tree 0de0d46d70c7953f5fc8489b7a7d46859a1bafbe\nparent
        53687f5f68891635bc8f1f231fa9998a265b6edd\nauthor Marina Novikova <mpnovikova@gmail.com>
        1582555987 -0500\ncommitter GitHub <noreply@github.com> 1582555987 +0000\n\nCreate
        new policy mutation (#6140)\n\n"}},"url":"https://api.github.com/repos/lolatravel/lola-server/commits/8fb51f8d192b006e946fed65564cb906f62ff9ec","html_url":"https://github.com/lolatravel/lola-server/commit/8fb51f8d192b006e946fed65564cb906f62ff9ec","comments_url":"https://api.github.com/repos/lolatravel/lola-server/commits/8fb51f8d192b006e946fed65564cb906f62ff9ec/comments","author":{"login":"mpnovikova","id":1108676,"node_id":"MDQ6VXNlcjExMDg2NzY=","avatar_url":"https://avatars2.githubusercontent.com/u/1108676?v=4","gravatar_id":"","url":"https://api.github.com/users/mpnovikova","html_url":"https://github.com/mpnovikova","followers_url":"https://api.github.com/users/mpnovikova/followers","following_url":"https://api.github.com/users/mpnovikova/following{/other_user}","gists_url":"https://api.github.com/users/mpnovikova/gists{/gist_id}","starred_url":"https://api.github.com/users/mpnovikova/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mpnovikova/subscriptions","organizations_url":"https://api.github.com/users/mpnovikova/orgs","repos_url":"https://api.github.com/users/mpnovikova/repos","events_url":"https://api.github.com/users/mpnovikova/events{/privacy}","received_events_url":"https://api.github.com/users/mpnovikova/received_events","type":"User","site_admin":false},"committer":{"login":"web-flow","id":19864447,"node_id":"MDQ6VXNlcjE5ODY0NDQ3","avatar_url":"https://avatars3.githubusercontent.com/u/19864447?v=4","gravatar_id":"","url":"https://api.github.com/users/web-flow","html_url":"https://github.com/web-flow","followers_url":"https://api.github.com/users/web-flow/followers","following_url":"https://api.github.com/users/web-flow/following{/other_user}","gists_url":"https://api.github.com/users/web-flow/gists{/gist_id}","starred_url":"https://api.github.com/users/web-flow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/web-flow/subscriptions","organizations_url":"https://api.github.com/users/web-flow/orgs","repos_url":"https://api.github.com/users/web-flow/repos","events_url":"https://api.github.com/users/web-flow/events{/privacy}","received_events_url":"https://api.github.com/users/web-flow/received_events","type":"User","site_admin":false},"parents":[{"sha":"53687f5f68891635bc8f1f231fa9998a265b6edd","url":"https://api.github.com/repos/lolatravel/lola-server/commits/53687f5f68891635bc8f1f231fa9998a265b6edd","html_url":"https://github.com/lolatravel/lola-server/commit/53687f5f68891635bc8f1f231fa9998a265b6edd"}]}],"files":[{"sha":"57e71374aa3a10152179d4bdcae0ebcb1085f989","filename":"bin/cli_ext/one_offs.py","status":"modified","additions":1,"deletions":2,"changes":3,"blob_url":"https://github.com/lolatravel/lola-server/blob/8fb51f8d192b006e946fed65564cb906f62ff9ec/bin/cli_ext/one_offs.py","raw_url":"https://github.com/lolatravel/lola-server/raw/8fb51f8d192b006e946fed65564cb906f62ff9ec/bin/cli_ext/one_offs.py","contents_url":"https://api.github.com/repos/lolatravel/lola-server/contents/bin/cli_ext/one_offs.py?ref=8fb51f8d192b006e946fed65564cb906f62ff9ec","patch":"@@
        -25,8 +25,6 @@\n from lola.models.core.trip import TripParticipant\n from
        lola.models.core.user import UserRelationship, AccountAssociation, Installation\n
        \n-from server.services.data.guidelines import set_group_flight_guidelines\n-\n
        logger = structlog.getLogger(\"lola.cmdline\")\n \n \n@@ -733,6 +731,7 @@
        def backfill_broken_replicated_models(dry_run=True, limit_date=\"2016-12-31\"):\n     def
        backfill_flight_guidelines(dry_run=True):\n         from server.services.scoring.flights.base
        import load_group_guidelines\n         from lola.models.core.group import
        Group\n+        from server.services.data.guidelines import set_group_flight_guidelines\n
        \n         for group in Group.select().iterator():\n             with Group.atomic():"},{"sha":"400db9ca6a5a9cfe596db009b5be15fcd170442e","filename":"config.py","status":"modified","additions":3,"deletions":0,"changes":3,"blob_url":"https://github.com/lolatravel/lola-server/blob/8fb51f8d192b006e946fed65564cb906f62ff9ec/config.py","raw_url":"https://github.com/lolatravel/lola-server/raw/8fb51f8d192b006e946fed65564cb906f62ff9ec/config.py","contents_url":"https://api.github.com/repos/lolatravel/lola-server/contents/config.py?ref=8fb51f8d192b006e946fed65564cb906f62ff9ec","patch":"@@
        -1102,6 +1102,9 @@ class Configuration(LolaEnv):\n     BOOKING_BOT_SUCCESS_SLACK_WEBHOOK
        = os.environ.get(\n         \"BOOKING_BOT_SUCCESS_SLACK_WEBHOOK\"\n     )\n+    BOOKING_BOT_SAVINGS_SLACK_WEBHOOK
        = os.environ.get(\n+        \"BOOKING_BOT_SAVINGS_SLACK_WEBHOOK\"\n+    )\n     BOOKING_BOT_FAILURE_SLACK_WEBHOOK
        = os.environ.get(\n         \"BOOKING_BOT_FAILURE_SLACK_WEBHOOK\"\n     )"},{"sha":"7d30f9f97ca687b589d4e0070945685bfb5c4d3f","filename":"server/services/bots/booking_bot.py","status":"modified","additions":99,"deletions":38,"changes":137,"blob_url":"https://github.com/lolatravel/lola-server/blob/8fb51f8d192b006e946fed65564cb906f62ff9ec/server/services/bots/booking_bot.py","raw_url":"https://github.com/lolatravel/lola-server/raw/8fb51f8d192b006e946fed65564cb906f62ff9ec/server/services/bots/booking_bot.py","contents_url":"https://api.github.com/repos/lolatravel/lola-server/contents/server/services/bots/booking_bot.py?ref=8fb51f8d192b006e946fed65564cb906f62ff9ec","patch":"@@
        -5,6 +5,9 @@\n import json\n import time\n \n+from lola.models.core.booking.booking_savings
        import BookingSavingsInfo\n+from lola.models.travel.constants import TravelCredentialKey\n+from
        lola.models.travel_reference import Provider\n from lola.utils import skey\n
        from redis import Redis\n \n@@ -77,7 +80,14 @@ def format_company(company,
        domain, gbt, user_email_domain):\n \n \n def format_success_slack_text(\n-    company,
        domain, gbt, traveler_string, trip, price, user_email_domain\n+    company,\n+    domain,\n+    gbt,\n+    traveler_string,\n+    trip,\n+    price,\n+    user_email_domain,\n+    savings_source=None,\n
        ):\n     # formats the slack text, three of the lines come preformatted\n     #
        to cut down on code duplication\n@@ -86,6 +96,8 @@ def format_success_slack_text(\n     bot_text
        = (\"{}\" \"{}\\n\" \"{}\\n\" \"{}\\n\").format(\n         company_string,
        traveler_string, trip, price\n     )\n+    if savings_source:\n+        bot_text
        = \"{}Savings source: {}\\n\".format(bot_text, savings_source)\n     return
        bot_text\n \n \n@@ -266,55 +278,104 @@ def post_booking_success_to_slack(booking_id,
        env=None):\n     if env.get(\"ENABLE_SLACK_BOOKINGS_BOT\"):\n         log.info(\"Processing
        booking success for booking_id to post to slack\")\n         booking = Booking.get(id=booking_id)\n+        post_booking_success_to_slack_internal(booking,
        log)\n \n-        if booking.group_id:\n-            group = Group.get(id=booking.group_id)\n-            group_name,
        group_domain = (group.name, group.domain)\n-            gbt = group.is_gbt_company\n-        else:\n-            group_name,
        group_domain, gbt = (None, None, None)\n+    else:\n+        log.info(\n+            \"Did
        not post booking_id to slack because the feature flag is disabled.\"\n+        )\n
        \n-        user = User.get(id=booking.user_id)\n \n-        traveler_string
        = format_traveler_string(booking.booking_travelers, user)\n+@lola_inject(env=LolaEnv)\n+def
        post_booking_success_to_slack_internal(booking, log=None, env=None):\n+    if
        not log:\n+        log = logger.bind(booking_id=booking.id)\n+    if booking.group_id:\n+        group
        = Group.get(id=booking.group_id)\n+        group_name, group_domain = (group.name,
        group.domain)\n+        gbt = group.is_gbt_company\n+    else:\n+        group_name,
        group_domain, gbt = (None, None, None)\n \n-        user_email_domain = parse_user_email(user)\n+    user
        = User.get(id=booking.user_id)\n \n-        if booking.component_type is ItineraryComponentType.flight:\n-            flight
        = get_flight_booking_info(booking_id)\n-            itinerary = format_flight_trip(flight.legs)\n-            trip
        = \"{}\".format(itinerary)\n+    traveler_string = format_traveler_string(booking.booking_travelers,
        user)\n \n-        elif booking.component_type is ItineraryComponentType.hotel:\n-            hotel_name
        = booking.booking_info.hotel_name\n-            trip = \"{}\".format(hotel_name)\n+    user_email_domain
        = parse_user_email(user)\n \n-        elif booking.component_type is ItineraryComponentType.car:\n-            agency_name
        = booking.rate.agency_name\n-            trip = \"{}\".format(agency_name)\n+    if
        booking.component_type is ItineraryComponentType.flight:\n+        flight
        = get_flight_booking_info(booking.id)\n+        itinerary = format_flight_trip(flight.legs)\n+        trip
        = \"{}\".format(itinerary)\n \n-        else:\n-            log.error(\n-                \"Component
        Type is not currently supported by bookingbot.\",\n-                component_type=booking.component_type,\n-            )\n-            return\n+    elif
        booking.component_type is ItineraryComponentType.hotel:\n+        hotel_name
        = booking.booking_info.hotel_name\n+        trip = \"{}\".format(hotel_name)\n
        \n-        slack_text = format_success_slack_text(\n-            group_name,\n-            group_domain,\n-            gbt,\n-            traveler_string,\n-            trip,\n-            booking.total_price,\n-            user_email_domain,\n-        )\n-        send_slack(slack_text,
        env.get(\"BOOKING_BOT_SUCCESS_SLACK_WEBHOOK\"), \"#7C2ABB\")\n+    elif booking.component_type
        is ItineraryComponentType.car:\n+        agency_name = booking.rate.agency_name\n+        trip
        = \"{}\".format(agency_name)\n \n     else:\n-        log.info(\n-            \"Did
        not post booking_id to slack because the feature flag is disabled.\"\n+        log.error(\n+            \"Component
        Type is not currently supported by bookingbot.\",\n+            component_type=booking.component_type,\n         )\n+        return\n+\n+    slack_text
        = format_success_slack_text(\n+        group_name,\n+        group_domain,\n+        gbt,\n+        traveler_string,\n+        trip,\n+        booking.total_price,\n+        user_email_domain,\n+    )\n+    hook
        = env.get(\"BOOKING_BOT_SUCCESS_SLACK_WEBHOOK\")\n+    if hook:\n+        #
        no need to error if the hook isn''t defined in this environment\n+        send_slack(slack_text,
        hook, \"#7C2ABB\")\n+\n+    try:\n+        savings_record = BookingSavingsInfo.get(booking=booking.id)\n+    except
        BookingSavingsInfo.DoesNotExist:\n+        savings_record = None\n+\n+    if
        savings_record:\n+        savings = savings_record.alt_price_total - booking.total_price\n+        if
        savings > 0:\n+            if booking.component_type == ItineraryComponentType.flight:\n+                source
        = (\n+                    \"GBT\"\n+                    if booking.booking_info.flight_credential_key\n+                    ==
        TravelCredentialKey.GBT\n+                    else \"??\"\n+                )\n+\n+            elif
        booking.component_type in (\n+                ItineraryComponentType.hotel,\n+                ItineraryComponentType.car,\n+            ):\n+                source
        = \"Priceline\" if booking.provider == Provider.PRICELINE else \"??\"\n+\n+            else:\n+                source
        = \"??\"\n+\n+            savings_text = format_success_slack_text(\n+                group_name,\n+                group_domain,\n+                gbt,\n+                traveler_string,\n+                trip,\n+                savings,\n+                user_email_domain,\n+                savings_source=source,\n+            )\n+            hook
        = env.get(\"BOOKING_BOT_SAVINGS_SLACK_WEBHOOK\")\n+            if hook:\n+                #
        no need to error if the hook isn''t defined in this environment\n+                send_slack(savings_text,
        hook, \"#7C2ABB\")\n \n \n @lola_task(booking_bot_queue)"},{"sha":"c5db9cdc399e247e00e418590f84e60e52702b6c","filename":"server/services/data/guidelines.py","status":"modified","additions":69,"deletions":8,"changes":77,"blob_url":"https://github.com/lolatravel/lola-server/blob/8fb51f8d192b006e946fed65564cb906f62ff9ec/server/services/data/guidelines.py","raw_url":"https://github.com/lolatravel/lola-server/raw/8fb51f8d192b006e946fed65564cb906f62ff9ec/server/services/data/guidelines.py","contents_url":"https://api.github.com/repos/lolatravel/lola-server/contents/server/services/data/guidelines.py?ref=8fb51f8d192b006e946fed65564cb906f62ff9ec","patch":"@@
        -17,6 +17,8 @@\n from lola.utils import InternalValidationException\n from
        lola.models.reference.international import ISOCurrencyCode\n \n+from server.services.group_service
        import get_group_service\n+\n \n def set_group_hotel_guidelines(\n     group_id,\n@@
        -119,18 +121,39 @@ def set_group_car_guidelines(\n     return guidelines\n
        \n \n-def policy_exists_for_group(group_id, category):\n-    return (\n-        GroupPolicyAssignment.select()\n-        .where(\n-            GroupPolicyAssignment.group_id
        == group_id,\n-            GroupPolicyAssignment.group_policy_assignment_category
        == category,\n+def policy_exists_for_group(group_id, category=None, name=None):\n+    \"\"\"\n+    :param
        group_id: Group ID\n+    :param category: (Optional) Group policies V1 were
        locked into 4 categories (Default, Manager, Executive, Director) this is deprecated
        now in favor of name\n+    :param name: (Optional) Group policies V2 can have
        any name. Each group policy can either have a name or category, but both params
        optional for backwards compatibility\n+    :return: Boolean\n+    \"\"\"\n+\n+    if
        name:\n+        return (\n+            GroupPolicyAssignment.select()\n+            .where(\n+                GroupPolicyAssignment.group_id
        == group_id,\n+                GroupPolicyAssignment.group_policy_name ==
        name,\n+            )\n+            .exists()\n         )\n-        .exists()\n-    )\n+\n+    if
        category:\n+        return (\n+            GroupPolicyAssignment.select()\n+            .where(\n+                GroupPolicyAssignment.group_id
        == group_id,\n+                GroupPolicyAssignment.group_policy_assignment_category
        == category,\n+            )\n+            .exists()\n+        )\n+\n+    return
        False\n \n \n def create_group_policy_assignment(group_id, group_policy_assignment_category):\n+    \"\"\"  Usage
        of this function should be deprecated in favor of create_group_policy_v2 defined
        below\"\"\"\n     with GroupPolicyAssignment.atomic():\n         group_policy_assignment
        = GroupPolicyAssignment.create(\n             group_id=group_id,\n@@ -164,6
        +187,18 @@ def delete_group_policy_assignment(group_policy_assignment_id):\n     return
        group_policy_assignment\n \n \n+def rename_group_policy_assignment(group_policy_assignment_id,
        group_policy_name):\n+    with GroupPolicyAssignment.atomic():\n+        group_policy_assignment
        = GroupPolicyAssignment.get(\n+            id=group_policy_assignment_id\n+        )\n+        #
        just in case it''s V1 policy that need to be renamed\n+        group_policy_assignment.group_policy_assignment_category
        = None\n+        group_policy_assignment.group_policy_name = group_policy_name\n+        group_policy_assignment.save()\n+    return
        group_policy_assignment\n+\n+\n def get_user_assigned_policy_id(user_id):\n     group_association
        = (\n         GroupAssociation.select().where(GroupAssociation.user_id ==
        user_id).dicts()\n@@ -248,3 +283,29 @@ def copy_policy_guidelines(user_id,
        group_id, original_policy_id, new_policy_id)\n             new_policy_id,\n             user_id,\n         )\n+\n+\n+def
        create_group_policy_v2(\n+    group_id, group_policy_name, group_policy_user_ids,
        group_policy_manager_ids\n+):\n+    \"\"\"\n+    :param group_id: ID of group
        for which policy is being created\n+    :param group_policy_name:  Name of
        the new policy\n+    :param group_policy_user_ids: List of user IDs managed
        under this policy\n+    :param group_policy_manager_ids: List of manager user
        IDs who are managing the policy\n+    :return: GroupPolicyAssignment where
        id is the ID of newly created group policy\n+    \"\"\"\n+    group_policy
        = GroupPolicyAssignment.create(\n+        group_id=group_id, group_policy_name=group_policy_name\n+    )\n+    group_service
        = get_group_service()\n+\n+    if len(group_policy_user_ids):\n+        #
        It should be still possible to create a policy without users and add users
        later\n+        group_service.update_group_association_policy_assignment_multiple(\n+            group_id,
        group_policy_user_ids, group_policy.id\n+        )\n+\n+    # TODO: associate
        managers with newly created policy here, also send emails they are managers
        now\n+\n+    return group_policy"},{"sha":"745158c1aa583bda86eb997aed1a9e78843d489d","filename":"server/services/graphql/mutations/group.py","status":"modified","additions":4,"deletions":6,"changes":10,"blob_url":"https://github.com/lolatravel/lola-server/blob/8fb51f8d192b006e946fed65564cb906f62ff9ec/server/services/graphql/mutations/group.py","raw_url":"https://github.com/lolatravel/lola-server/raw/8fb51f8d192b006e946fed65564cb906f62ff9ec/server/services/graphql/mutations/group.py","contents_url":"https://api.github.com/repos/lolatravel/lola-server/contents/server/services/graphql/mutations/group.py?ref=8fb51f8d192b006e946fed65564cb906f62ff9ec","patch":"@@
        -1,6 +1,5 @@\n from __future__ import absolute_import, division, print_function\n
        \n-import graphene\n import structlog\n from graphene import (\n     ID,\n@@
        -18,7 +17,6 @@\n )\n from lola.auth.context import current_user\n from lola.models.core.access.mixins
        import get_authenticated_user\n-from lola.models.core.access_revocation import
        AccessRevocationAuditLog\n from lola.models.core.group import AcquisitionPipelineCategory\n
        from lola.models.core.group import CustomerRegistration as CustomerRegistrationModel\n
        from lola.models.core.group import Group as GroupModel\n@@ -33,8 +31,6 @@\n
        from lola.models.core.partners import GBTCompany\n from lola.models.core.recommendations.base
        import Recommendation\n from lola.models.core.recommendations.types import
        RecommendationType\n-from lola.models.fields import EnumCharField\n-from lola.models.graphql.peewee
        import EnumString\n from lola.models.reference.restaurants.base import Restaurant\n
        from lola.models.travel.flights.constants import CabinType as CabinTypeEnum\n
        from lola.models.travel.hotels import Hotel\n@@ -46,12 +42,13 @@\n )\n from
        peewee import DoesNotExist\n \n-from server.db import get_db\n from server.services.gbt_content_service
        import get_grant_gbt_content_service\n from server.services.graphql.mutations.guidelines
        import (\n     AssignUsersGroupPolicy,\n     CreateGroupPolicyAssignment,\n     DeleteGroupPolicyAssignment,\n+    EditGroupPolicyV2Name,\n+    CreateGroupPolicyV2,\n     SetGroupCarGuidelines,\n     SetGroupFlightGuidelines,\n     SetGroupHotelGuidelines,\n@@
        -79,7 +76,6 @@\n )\n from server.services.graphql.nodes.guidelines import
        GroupHotelGuidelines\n from server.services.graphql.nodes.resolvers import
        resolve_enum\n-from server.services.graphql.nodes.user import User\n from
        server.services.graphql.security import check_employee_access, check_group_access\n
        from server.services.graphql.types.enums import CabinType, Gender, GroupAssociationRole\n
        from server.services.graphql.utils import cast_int_param, get_int_param\n@@
        -1322,5 +1318,7 @@ class Meta:\n     create_group_policy_assignment = CreateGroupPolicyAssignment.Field()\n     delete_group_policy_assignment
        = DeleteGroupPolicyAssignment.Field()\n     assign_users_group_policy = AssignUsersGroupPolicy.Field()\n+    edit_group_policy_name
        = EditGroupPolicyV2Name.Field()\n+    create_group_policy_v2 = CreateGroupPolicyV2.Field()\n     revoke_group_access
        = RevokeGroupAccess.Field()\n     restore_group_access = RestoreGroupAccess.Field()"},{"sha":"0cf5fd049dc20e30ec154ad155384f60cb08cb2e","filename":"server/services/graphql/mutations/guidelines.py","status":"modified","additions":107,"deletions":3,"changes":110,"blob_url":"https://github.com/lolatravel/lola-server/blob/8fb51f8d192b006e946fed65564cb906f62ff9ec/server/services/graphql/mutations/guidelines.py","raw_url":"https://github.com/lolatravel/lola-server/raw/8fb51f8d192b006e946fed65564cb906f62ff9ec/server/services/graphql/mutations/guidelines.py","contents_url":"https://api.github.com/repos/lolatravel/lola-server/contents/server/services/graphql/mutations/guidelines.py?ref=8fb51f8d192b006e946fed65564cb906f62ff9ec","patch":"@@
        -1,7 +1,7 @@\n from __future__ import absolute_import, division, print_function\n
        \n from graphene import Mutation, String, Int, Boolean, Field, ID, InputObjectType,
        List\n-from lola.auth.context import current_user\n+from lola.auth.context
        import current_user, current_group_id\n from lola.models.core.group_policy
        import (\n     GroupPolicyAssignmentCategories,\n     GroupPolicyAssignment,\n@@
        -38,6 +38,8 @@\n     delete_group_policy_assignment,\n     check_group_policy_assignment_can_be_applied,\n     copy_policy_guidelines,\n+    rename_group_policy_assignment,\n+    create_group_policy_v2,\n
        )\n from server.services.graphql.nodes.guidelines import (\n     GroupHotelGuidelines,\n@@
        -50,12 +52,17 @@\n \n \n class CreateGroupPolicyAssignment(Mutation):\n+    \"\"\"
        DEPRECATED: use CreateGroupPolicyV2 instead \"\"\"\n+\n     class Arguments:\n         group_id
        = ID()\n         copy_group_policy_id = ID(\n-            description=\"The
        ID of the policy guidelines that you want to copy\"\n+            required=False,\n+            description=\"The
        ID of the policy guidelines that you want to copy\",\n+        )\n+        group_policy_assignment_category
        = String(\n+            required=False, description=\"deprecated in favor
        of group_policy_name\"\n         )\n-        group_policy_assignment_category
        = String()\n \n     ok = Boolean()\n     group_policy_assignment = Field(GroupPolicyAssignmentNode)\n@@
        -106,6 +113,48 @@ def mutate(\n         )\n \n \n+class EditGroupPolicyV2Name(Mutation):\n+    class
        Arguments:\n+        group_policy_assignment_id = ID(required=True)\n+        group_policy_name
        = String(required=True)\n+\n+    ok = Boolean()\n+    group_policy_assignment
        = Field(GroupPolicyAssignmentNode)\n+\n+    @staticmethod\n+    def mutate(root,
        info, group_policy_assignment_id, group_policy_name):\n+        group_id =
        current_group_id()\n+        check_group_admin_access(group_id)\n+        clean_group_policy_assignment_id
        = cast_int_param(group_policy_assignment_id)\n+        clean_group_policy_name
        = (\n+            u\"{}\".format(group_policy_name).encode(\"utf-8\").strip()\n+        )\n+\n+        group_policy_assignment
        = GroupPolicyAssignment.get(\n+            id=clean_group_policy_assignment_id\n+        )\n+        if
        (\n+            group_policy_assignment.group_policy_assignment_category\n+            ==
        GroupPolicyAssignmentCategories.DEFAULT\n+        ):\n+            raise InternalValidationException(key=\"CANNOT_RENAME_DEFAULT_GROUP_POLICY\")\n+\n+        if
        policy_exists_for_group(group_id=group_id, name=clean_group_policy_name):\n+            raise
        InternalValidationException(\n+                message=\"A CreateGroupPolicyAssignment
        for group_id {} and \"\n+                \"group_policy_name {} already exists.\".format(\n+                    group_id,
        clean_group_policy_name\n+                ),\n+                key=\"ALREADY_EXISTS\",\n+            )\n+\n+        result
        = rename_group_policy_assignment(\n+            group_policy_assignment.id,
        clean_group_policy_name\n+        )\n+\n+        return EditGroupPolicyV2Name(ok=True,
        group_policy_assignment=result)\n+\n+\n class AssignUsersGroupPolicy(Mutation):\n     class
        Arguments:\n         group_id = ID(required=True)\n@@ -159,6 +208,61 @@ def
        mutate(root, info, group_id, user_ids, group_policy_assignment_id):\n         )\n
        \n \n+class CreateGroupPolicyV2(Mutation):\n+    class Arguments:\n+        group_policy_name
        = String(\n+            required=True, description=\"Name of the new group
        policy\"\n+        )\n+        group_policy_user_ids = List(\n+            ID,
        required=True, description=\"List of user IDs managed under this policy\"\n+        )\n+\n+        #
        TODO: required needs to be flipped to True once manager functionality is shipped\n+        group_policy_manager_ids
        = List(\n+            ID,\n+            required=False,\n+            description=\"List
        of user IDs who are managers of this policy\",\n+        )\n+\n+    ok = Boolean()\n+    group_policy_assignment
        = Field(GroupPolicyAssignmentNode)\n+\n+    @staticmethod\n+    def mutate(\n+        root,
        info, group_policy_name, group_policy_user_ids, group_policy_manager_ids\n+    ):\n+        group_id
        = current_group_id()\n+        check_group_admin_access(group_id)\n+        clean_group_policy_name
        = (\n+            u\"{}\".format(group_policy_name).encode(\"utf-8\").strip()\n+        )\n+\n+        clean_group_policy_user_ids
        = [\n+            cast_int_param(uid) for uid in group_policy_user_ids\n+        ]\n+        clean_group_policy_manager_ids
        = [\n+            cast_int_param(mid) for mid in group_policy_manager_ids\n+        ]\n+\n+        if
        policy_exists_for_group(group_id=group_id, name=clean_group_policy_name):\n+            raise
        InternalValidationException(\n+                message=\"A CreateGroupPolicyAssignment
        for group_id {} and \"\n+                \"group_policy_name {} already exists.\".format(\n+                    group_id,
        clean_group_policy_name\n+                ),\n+                key=\"ALREADY_EXISTS\",\n+            )\n+\n+        group_policy
        = create_group_policy_v2(\n+            group_id=group_id,\n+            group_policy_name=group_policy_name,\n+            group_policy_user_ids=clean_group_policy_user_ids,\n+            group_policy_manager_ids=clean_group_policy_manager_ids,\n+        )\n+\n+        return
        CreateGroupPolicyV2(ok=True, group_policy_assignment=group_policy)\n+\n+\n
        class DeleteGroupPolicyAssignment(Mutation):\n     class Arguments:\n         group_id
        = ID(required=True)"},{"sha":"afb76add3633b906a3893c8d2191239be3a3d3f7","filename":"server/services/graphql/nodes/group.py","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/lolatravel/lola-server/blob/8fb51f8d192b006e946fed65564cb906f62ff9ec/server/services/graphql/nodes/group.py","raw_url":"https://github.com/lolatravel/lola-server/raw/8fb51f8d192b006e946fed65564cb906f62ff9ec/server/services/graphql/nodes/group.py","contents_url":"https://api.github.com/repos/lolatravel/lola-server/contents/server/services/graphql/nodes/group.py?ref=8fb51f8d192b006e946fed65564cb906f62ff9ec","patch":"@@
        -1062,7 +1062,8 @@ def resolve_policy_assignments(source, info, policy_loader):\n         def
        create_default_policy_assignment(group_id):\n             # Create a default
        group policy\n             default_policy_assignment = create_group_policy_assignment(\n-                group_id,
        GroupPolicyAssignmentCategories.DEFAULT\n+                group_id=group_id,\n+                group_policy_assignment_category=GroupPolicyAssignmentCategories.DEFAULT,\n             )\n             #
        Get existing guidelines and copy/assign to the default policy\n             car_g
        = GroupCarGuidelinesModel.get_current_guideline(group_id, dict=False)"},{"sha":"ff7f5074c6bd3cf3cc46efb1cbfcdfbd270b4726","filename":"server/services/graphql/nodes/guidelines.py","status":"modified","additions":7,"deletions":7,"changes":14,"blob_url":"https://github.com/lolatravel/lola-server/blob/8fb51f8d192b006e946fed65564cb906f62ff9ec/server/services/graphql/nodes/guidelines.py","raw_url":"https://github.com/lolatravel/lola-server/raw/8fb51f8d192b006e946fed65564cb906f62ff9ec/server/services/graphql/nodes/guidelines.py","contents_url":"https://api.github.com/repos/lolatravel/lola-server/contents/server/services/graphql/nodes/guidelines.py?ref=8fb51f8d192b006e946fed65564cb906f62ff9ec","patch":"@@
        -36,8 +36,6 @@\n     OutOfGuidelinesReason,\n )\n \n-GroupPolicyAssignmentEnums
        = GrapheneEnum.from_enum(GroupPolicyAssignmentCategories)\n-\n \n class GroupHotelGuidelines(ObjectType):\n     group
        = Field(\n@@ -293,8 +291,11 @@ class GroupCarBookingGuidelinesInfo(ObjectType):\n
        \n class GroupPolicyAssignment(ObjectType):\n     id = ID(description=\"The
        id of the group policy\", required=True)\n-    group_policy_assignment_category
        = GroupPolicyAssignmentEnums(\n-        description=\"The category of the
        group policy\", required=True\n+    group_policy_assignment_category = String(\n+        required=False,
        description=\"The category of the group policy if present\"\n+    )\n+    group_policy_name
        = String(\n+        description=\"Group policy name if present\", required=False\n     )\n     users
        = List(User, description=\"List of users in the policy\")\n     hotel_guidelines
        = Field(\n@@ -344,6 +345,5 @@ def resolve_users(source, info, user_loader,
        assoc_loader):\n         )\n \n     def resolve_group_policy_assignment_category(source,
        info):\n-        return GroupPolicyAssignmentCategories(\n-            source.group_policy_assignment_category\n-        ).value\n+        if
        source.group_policy_assignment_category:\n+            return source.group_policy_assignment_category.value"},{"sha":"2e398e21b67113f2448ef9ab127e6b4175c249eb","filename":"server/services/group_service.py","status":"modified","additions":12,"deletions":0,"changes":12,"blob_url":"https://github.com/lolatravel/lola-server/blob/8fb51f8d192b006e946fed65564cb906f62ff9ec/server/services/group_service.py","raw_url":"https://github.com/lolatravel/lola-server/raw/8fb51f8d192b006e946fed65564cb906f62ff9ec/server/services/group_service.py","contents_url":"https://api.github.com/repos/lolatravel/lola-server/contents/server/services/group_service.py?ref=8fb51f8d192b006e946fed65564cb906f62ff9ec","patch":"@@
        -2494,6 +2494,18 @@ def update_group_association_policy_assignment(\n \n         return
        group_association\n \n+    @staticmethod\n+    def update_group_association_policy_assignment_multiple(\n+        group_id,
        user_ids, group_policy_assignment_id\n+    ):\n+        GroupAssociation.update(\n+            group_policy_assignment_id=group_policy_assignment_id\n+        ).where(\n+            GroupAssociation.group_id
        == group_id, GroupAssociation.user_id << user_ids\n+        ).execute()\n+\n+        return\n+\n     def
        set_allowed_blacklisted_countries(self, group_id, country_codes):\n         #
        type: (int, list[str]) -> None\n         \"\"\""},{"sha":"1dacd758c29d91fb5e249c68f2a36765f5d670db","filename":"tests/mock_services/slack/mock_client.py","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/lolatravel/lola-server/blob/8fb51f8d192b006e946fed65564cb906f62ff9ec/tests/mock_services/slack/mock_client.py","raw_url":"https://github.com/lolatravel/lola-server/raw/8fb51f8d192b006e946fed65564cb906f62ff9ec/tests/mock_services/slack/mock_client.py","contents_url":"https://api.github.com/repos/lolatravel/lola-server/contents/tests/mock_services/slack/mock_client.py?ref=8fb51f8d192b006e946fed65564cb906f62ff9ec","patch":"@@
        -17,6 +17,7 @@ class MockSlackClient(SingletonClass, MockHttpClient):\n     SLACK_TEST_URL
        = \"https://unit_test_slack_bot.com\"\n     SLACK_WEBHOOKS = [\n         \"BOOKING_BOT_SUCCESS_SLACK_WEBHOOK\",\n+        \"BOOKING_BOT_SAVINGS_SLACK_WEBHOOK\",\n         \"BOOKING_BOT_FAILURE_SLACK_WEBHOOK\",\n         \"BOOKING_BOT_NON_CRITICAL_SLACK_WEBHOOK\",\n         \"CANCELLATION_FAILURE_SLACK_WEBHOOK\","}]}'
    headers:
      Access-Control-Allow-Origin: '*'
      Access-Control-Expose-Headers: ETag, Link, Location, Retry-After, X-GitHub-OTP,
        X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset, X-OAuth-Scopes,
        X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type, Deprecation,
        Sunset
      Cache-Control: private, max-age=60, s-maxage=60
      Content-Encoding: gzip
      Content-Security-Policy: default-src 'none'
      Content-Type: application/json; charset=utf-8
      Date: Thu, 05 Mar 2020 13:40:00 GMT
      ETag: W/"dbce89b99ced0b587607d0d2f0b326f9"
      Last-Modified: Mon, 24 Feb 2020 14:53:07 GMT
      Referrer-Policy: origin-when-cross-origin, strict-origin-when-cross-origin
      Server: GitHub.com
      Status: 200 OK
      Strict-Transport-Security: max-age=31536000; includeSubdomains; preload
      Transfer-Encoding: chunked
      Vary: Accept-Encoding, Accept, X-Requested-With
      X-Accepted-OAuth-Scopes: ''
      X-Content-Type-Options: nosniff
      X-Frame-Options: deny
      X-GitHub-Media-Type: github.v3; format=json
      X-GitHub-Request-Id: C597:3B3B:6A822D:CD844A:5E61012F
      X-OAuth-Scopes: repo
      X-RateLimit-Limit: '5000'
      X-RateLimit-Remaining: '4835'
      X-RateLimit-Reset: '1583418082'
      X-XSS-Protection: 1; mode=block
    status:
      code: 200
      message: OK
    url: https://api.github.com/repos/lolatravel/lola-server/compare/74d5a0d...8fb51f8
- request:
    body: null
    headers: {}
    method: GET
    uri: https://api.github.com/repos/lolatravel/lola-server/pulls/6140
  response:
    body:
      string: '{"url":"https://api.github.com/repos/lolatravel/lola-server/pulls/6140","id":377204240,"node_id":"MDExOlB1bGxSZXF1ZXN0Mzc3MjA0MjQw","html_url":"https://github.com/lolatravel/lola-server/pull/6140","diff_url":"https://github.com/lolatravel/lola-server/pull/6140.diff","patch_url":"https://github.com/lolatravel/lola-server/pull/6140.patch","issue_url":"https://api.github.com/repos/lolatravel/lola-server/issues/6140","number":6140,"state":"closed","locked":false,"title":"TVM-610
        Make group policy editable","user":{"login":"mpnovikova","id":1108676,"node_id":"MDQ6VXNlcjExMDg2NzY=","avatar_url":"https://avatars2.githubusercontent.com/u/1108676?v=4","gravatar_id":"","url":"https://api.github.com/users/mpnovikova","html_url":"https://github.com/mpnovikova","followers_url":"https://api.github.com/users/mpnovikova/followers","following_url":"https://api.github.com/users/mpnovikova/following{/other_user}","gists_url":"https://api.github.com/users/mpnovikova/gists{/gist_id}","starred_url":"https://api.github.com/users/mpnovikova/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mpnovikova/subscriptions","organizations_url":"https://api.github.com/users/mpnovikova/orgs","repos_url":"https://api.github.com/users/mpnovikova/repos","events_url":"https://api.github.com/users/mpnovikova/events{/privacy}","received_events_url":"https://api.github.com/users/mpnovikova/received_events","type":"User","site_admin":false},"body":"Added
        new create group policy mutation with name users and managers, modified existing
        mutations to accommodate editable group policy name\r\n\r\n### Summary\r\n\r\nAdded
        3 new bugs\r\n\r\n### Checklist\r\n\r\n- [x] Squashed commits\r\n- [ ] Wrote
        a test or ran the app to exercise this code\r\n- [ ] Considered/added new
        metrics\r\n- [ ] Considered the effect on existing metrics\r\n\r\n### Prior
        to Merging\r\n\r\n- [ ] Added a descriptive line to the [upcoming release](https://github.com/lolatravel/lola-server/releases)\r\n      that
        references any related jira tickets.\r\n","created_at":"2020-02-19T14:33:22Z","updated_at":"2020-02-24T14:53:17Z","closed_at":"2020-02-24T14:53:08Z","merged_at":"2020-02-24T14:53:08Z","merge_commit_sha":"8fb51f8d192b006e946fed65564cb906f62ff9ec","assignee":null,"assignees":[],"requested_reviewers":[],"requested_teams":[],"labels":[{"id":1712700165,"node_id":"MDU6TGFiZWwxNzEyNzAwMTY1","url":"https://api.github.com/repos/lolatravel/lola-server/labels/automerge","name":"automerge","color":"bcbef4","default":false,"description":""}],"milestone":null,"commits_url":"https://api.github.com/repos/lolatravel/lola-server/pulls/6140/commits","review_comments_url":"https://api.github.com/repos/lolatravel/lola-server/pulls/6140/comments","review_comment_url":"https://api.github.com/repos/lolatravel/lola-server/pulls/comments{/number}","comments_url":"https://api.github.com/repos/lolatravel/lola-server/issues/6140/comments","statuses_url":"https://api.github.com/repos/lolatravel/lola-server/statuses/4379a45e70769207c1a8786e56350506ceafc7b9","head":{"label":"lolatravel:TVM-610-create-group-policy","ref":"TVM-610-create-group-policy","sha":"4379a45e70769207c1a8786e56350506ceafc7b9","user":{"login":"lolatravel","id":13453237,"node_id":"MDEyOk9yZ2FuaXphdGlvbjEzNDUzMjM3","avatar_url":"https://avatars3.githubusercontent.com/u/13453237?v=4","gravatar_id":"","url":"https://api.github.com/users/lolatravel","html_url":"https://github.com/lolatravel","followers_url":"https://api.github.com/users/lolatravel/followers","following_url":"https://api.github.com/users/lolatravel/following{/other_user}","gists_url":"https://api.github.com/users/lolatravel/gists{/gist_id}","starred_url":"https://api.github.com/users/lolatravel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lolatravel/subscriptions","organizations_url":"https://api.github.com/users/lolatravel/orgs","repos_url":"https://api.github.com/users/lolatravel/repos","events_url":"https://api.github.com/users/lolatravel/events{/privacy}","received_events_url":"https://api.github.com/users/lolatravel/received_events","type":"Organization","site_admin":false},"repo":{"id":39645144,"node_id":"MDEwOlJlcG9zaXRvcnkzOTY0NTE0NA==","name":"lola-server","full_name":"lolatravel/lola-server","private":true,"owner":{"login":"lolatravel","id":13453237,"node_id":"MDEyOk9yZ2FuaXphdGlvbjEzNDUzMjM3","avatar_url":"https://avatars3.githubusercontent.com/u/13453237?v=4","gravatar_id":"","url":"https://api.github.com/users/lolatravel","html_url":"https://github.com/lolatravel","followers_url":"https://api.github.com/users/lolatravel/followers","following_url":"https://api.github.com/users/lolatravel/following{/other_user}","gists_url":"https://api.github.com/users/lolatravel/gists{/gist_id}","starred_url":"https://api.github.com/users/lolatravel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lolatravel/subscriptions","organizations_url":"https://api.github.com/users/lolatravel/orgs","repos_url":"https://api.github.com/users/lolatravel/repos","events_url":"https://api.github.com/users/lolatravel/events{/privacy}","received_events_url":"https://api.github.com/users/lolatravel/received_events","type":"Organization","site_admin":false},"html_url":"https://github.com/lolatravel/lola-server","description":"Main
        lola server to the iPhone app, agent console, etc","fork":false,"url":"https://api.github.com/repos/lolatravel/lola-server","forks_url":"https://api.github.com/repos/lolatravel/lola-server/forks","keys_url":"https://api.github.com/repos/lolatravel/lola-server/keys{/key_id}","collaborators_url":"https://api.github.com/repos/lolatravel/lola-server/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/lolatravel/lola-server/teams","hooks_url":"https://api.github.com/repos/lolatravel/lola-server/hooks","issue_events_url":"https://api.github.com/repos/lolatravel/lola-server/issues/events{/number}","events_url":"https://api.github.com/repos/lolatravel/lola-server/events","assignees_url":"https://api.github.com/repos/lolatravel/lola-server/assignees{/user}","branches_url":"https://api.github.com/repos/lolatravel/lola-server/branches{/branch}","tags_url":"https://api.github.com/repos/lolatravel/lola-server/tags","blobs_url":"https://api.github.com/repos/lolatravel/lola-server/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/lolatravel/lola-server/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/lolatravel/lola-server/git/refs{/sha}","trees_url":"https://api.github.com/repos/lolatravel/lola-server/git/trees{/sha}","statuses_url":"https://api.github.com/repos/lolatravel/lola-server/statuses/{sha}","languages_url":"https://api.github.com/repos/lolatravel/lola-server/languages","stargazers_url":"https://api.github.com/repos/lolatravel/lola-server/stargazers","contributors_url":"https://api.github.com/repos/lolatravel/lola-server/contributors","subscribers_url":"https://api.github.com/repos/lolatravel/lola-server/subscribers","subscription_url":"https://api.github.com/repos/lolatravel/lola-server/subscription","commits_url":"https://api.github.com/repos/lolatravel/lola-server/commits{/sha}","git_commits_url":"https://api.github.com/repos/lolatravel/lola-server/git/commits{/sha}","comments_url":"https://api.github.com/repos/lolatravel/lola-server/comments{/number}","issue_comment_url":"https://api.github.com/repos/lolatravel/lola-server/issues/comments{/number}","contents_url":"https://api.github.com/repos/lolatravel/lola-server/contents/{+path}","compare_url":"https://api.github.com/repos/lolatravel/lola-server/compare/{base}...{head}","merges_url":"https://api.github.com/repos/lolatravel/lola-server/merges","archive_url":"https://api.github.com/repos/lolatravel/lola-server/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/lolatravel/lola-server/downloads","issues_url":"https://api.github.com/repos/lolatravel/lola-server/issues{/number}","pulls_url":"https://api.github.com/repos/lolatravel/lola-server/pulls{/number}","milestones_url":"https://api.github.com/repos/lolatravel/lola-server/milestones{/number}","notifications_url":"https://api.github.com/repos/lolatravel/lola-server/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/lolatravel/lola-server/labels{/name}","releases_url":"https://api.github.com/repos/lolatravel/lola-server/releases{/id}","deployments_url":"https://api.github.com/repos/lolatravel/lola-server/deployments","created_at":"2015-07-24T16:33:17Z","updated_at":"2020-03-04T20:45:38Z","pushed_at":"2020-03-05T13:13:30Z","git_url":"git://github.com/lolatravel/lola-server.git","ssh_url":"git@github.com:lolatravel/lola-server.git","clone_url":"https://github.com/lolatravel/lola-server.git","svn_url":"https://github.com/lolatravel/lola-server","homepage":"","size":69303,"stargazers_count":2,"watchers_count":2,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":0,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":500,"license":null,"forks":0,"open_issues":500,"watchers":2,"default_branch":"master"}},"base":{"label":"lolatravel:master","ref":"master","sha":"53687f5f68891635bc8f1f231fa9998a265b6edd","user":{"login":"lolatravel","id":13453237,"node_id":"MDEyOk9yZ2FuaXphdGlvbjEzNDUzMjM3","avatar_url":"https://avatars3.githubusercontent.com/u/13453237?v=4","gravatar_id":"","url":"https://api.github.com/users/lolatravel","html_url":"https://github.com/lolatravel","followers_url":"https://api.github.com/users/lolatravel/followers","following_url":"https://api.github.com/users/lolatravel/following{/other_user}","gists_url":"https://api.github.com/users/lolatravel/gists{/gist_id}","starred_url":"https://api.github.com/users/lolatravel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lolatravel/subscriptions","organizations_url":"https://api.github.com/users/lolatravel/orgs","repos_url":"https://api.github.com/users/lolatravel/repos","events_url":"https://api.github.com/users/lolatravel/events{/privacy}","received_events_url":"https://api.github.com/users/lolatravel/received_events","type":"Organization","site_admin":false},"repo":{"id":39645144,"node_id":"MDEwOlJlcG9zaXRvcnkzOTY0NTE0NA==","name":"lola-server","full_name":"lolatravel/lola-server","private":true,"owner":{"login":"lolatravel","id":13453237,"node_id":"MDEyOk9yZ2FuaXphdGlvbjEzNDUzMjM3","avatar_url":"https://avatars3.githubusercontent.com/u/13453237?v=4","gravatar_id":"","url":"https://api.github.com/users/lolatravel","html_url":"https://github.com/lolatravel","followers_url":"https://api.github.com/users/lolatravel/followers","following_url":"https://api.github.com/users/lolatravel/following{/other_user}","gists_url":"https://api.github.com/users/lolatravel/gists{/gist_id}","starred_url":"https://api.github.com/users/lolatravel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lolatravel/subscriptions","organizations_url":"https://api.github.com/users/lolatravel/orgs","repos_url":"https://api.github.com/users/lolatravel/repos","events_url":"https://api.github.com/users/lolatravel/events{/privacy}","received_events_url":"https://api.github.com/users/lolatravel/received_events","type":"Organization","site_admin":false},"html_url":"https://github.com/lolatravel/lola-server","description":"Main
        lola server to the iPhone app, agent console, etc","fork":false,"url":"https://api.github.com/repos/lolatravel/lola-server","forks_url":"https://api.github.com/repos/lolatravel/lola-server/forks","keys_url":"https://api.github.com/repos/lolatravel/lola-server/keys{/key_id}","collaborators_url":"https://api.github.com/repos/lolatravel/lola-server/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/lolatravel/lola-server/teams","hooks_url":"https://api.github.com/repos/lolatravel/lola-server/hooks","issue_events_url":"https://api.github.com/repos/lolatravel/lola-server/issues/events{/number}","events_url":"https://api.github.com/repos/lolatravel/lola-server/events","assignees_url":"https://api.github.com/repos/lolatravel/lola-server/assignees{/user}","branches_url":"https://api.github.com/repos/lolatravel/lola-server/branches{/branch}","tags_url":"https://api.github.com/repos/lolatravel/lola-server/tags","blobs_url":"https://api.github.com/repos/lolatravel/lola-server/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/lolatravel/lola-server/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/lolatravel/lola-server/git/refs{/sha}","trees_url":"https://api.github.com/repos/lolatravel/lola-server/git/trees{/sha}","statuses_url":"https://api.github.com/repos/lolatravel/lola-server/statuses/{sha}","languages_url":"https://api.github.com/repos/lolatravel/lola-server/languages","stargazers_url":"https://api.github.com/repos/lolatravel/lola-server/stargazers","contributors_url":"https://api.github.com/repos/lolatravel/lola-server/contributors","subscribers_url":"https://api.github.com/repos/lolatravel/lola-server/subscribers","subscription_url":"https://api.github.com/repos/lolatravel/lola-server/subscription","commits_url":"https://api.github.com/repos/lolatravel/lola-server/commits{/sha}","git_commits_url":"https://api.github.com/repos/lolatravel/lola-server/git/commits{/sha}","comments_url":"https://api.github.com/repos/lolatravel/lola-server/comments{/number}","issue_comment_url":"https://api.github.com/repos/lolatravel/lola-server/issues/comments{/number}","contents_url":"https://api.github.com/repos/lolatravel/lola-server/contents/{+path}","compare_url":"https://api.github.com/repos/lolatravel/lola-server/compare/{base}...{head}","merges_url":"https://api.github.com/repos/lolatravel/lola-server/merges","archive_url":"https://api.github.com/repos/lolatravel/lola-server/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/lolatravel/lola-server/downloads","issues_url":"https://api.github.com/repos/lolatravel/lola-server/issues{/number}","pulls_url":"https://api.github.com/repos/lolatravel/lola-server/pulls{/number}","milestones_url":"https://api.github.com/repos/lolatravel/lola-server/milestones{/number}","notifications_url":"https://api.github.com/repos/lolatravel/lola-server/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/lolatravel/lola-server/labels{/name}","releases_url":"https://api.github.com/repos/lolatravel/lola-server/releases{/id}","deployments_url":"https://api.github.com/repos/lolatravel/lola-server/deployments","created_at":"2015-07-24T16:33:17Z","updated_at":"2020-03-04T20:45:38Z","pushed_at":"2020-03-05T13:13:30Z","git_url":"git://github.com/lolatravel/lola-server.git","ssh_url":"git@github.com:lolatravel/lola-server.git","clone_url":"https://github.com/lolatravel/lola-server.git","svn_url":"https://github.com/lolatravel/lola-server","homepage":"","size":69303,"stargazers_count":2,"watchers_count":2,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":0,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":500,"license":null,"forks":0,"open_issues":500,"watchers":2,"default_branch":"master"}},"_links":{"self":{"href":"https://api.github.com/repos/lolatravel/lola-server/pulls/6140"},"html":{"href":"https://github.com/lolatravel/lola-server/pull/6140"},"issue":{"href":"https://api.github.com/repos/lolatravel/lola-server/issues/6140"},"comments":{"href":"https://api.github.com/repos/lolatravel/lola-server/issues/6140/comments"},"review_comments":{"href":"https://api.github.com/repos/lolatravel/lola-server/pulls/6140/comments"},"review_comment":{"href":"https://api.github.com/repos/lolatravel/lola-server/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/lolatravel/lola-server/pulls/6140/commits"},"statuses":{"href":"https://api.github.com/repos/lolatravel/lola-server/statuses/4379a45e70769207c1a8786e56350506ceafc7b9"}},"author_association":"CONTRIBUTOR","merged":true,"mergeable":null,"rebaseable":null,"mergeable_state":"unknown","merged_by":{"login":"kodiakhq[bot]","id":49736102,"node_id":"MDM6Qm90NDk3MzYxMDI=","avatar_url":"https://avatars1.githubusercontent.com/in/29196?v=4","gravatar_id":"","url":"https://api.github.com/users/kodiakhq%5Bbot%5D","html_url":"https://github.com/apps/kodiakhq","followers_url":"https://api.github.com/users/kodiakhq%5Bbot%5D/followers","following_url":"https://api.github.com/users/kodiakhq%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/kodiakhq%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/kodiakhq%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kodiakhq%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/kodiakhq%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/kodiakhq%5Bbot%5D/repos","events_url":"https://api.github.com/users/kodiakhq%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/kodiakhq%5Bbot%5D/received_events","type":"Bot","site_admin":false},"comments":1,"review_comments":32,"maintainer_can_modify":false,"commits":1,"additions":202,"deletions":27,"changed_files":7}'
    headers:
      Access-Control-Allow-Origin: '*'
      Access-Control-Expose-Headers: ETag, Link, Location, Retry-After, X-GitHub-OTP,
        X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset, X-OAuth-Scopes,
        X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type, Deprecation,
        Sunset
      Cache-Control: private, max-age=60, s-maxage=60
      Content-Encoding: gzip
      Content-Security-Policy: default-src 'none'
      Content-Type: application/json; charset=utf-8
      Date: Thu, 05 Mar 2020 13:40:00 GMT
      ETag: W/"3042ce40cfa81e5a9cd6aa71dfb8ddc7"
      Last-Modified: Tue, 25 Feb 2020 18:18:43 GMT
      Referrer-Policy: origin-when-cross-origin, strict-origin-when-cross-origin
      Server: GitHub.com
      Status: 200 OK
      Strict-Transport-Security: max-age=31536000; includeSubdomains; preload
      Transfer-Encoding: chunked
      Vary: Accept-Encoding, Accept, X-Requested-With
      X-Accepted-OAuth-Scopes: ''
      X-Content-Type-Options: nosniff
      X-Frame-Options: deny
      X-GitHub-Media-Type: github.v3; format=json
      X-GitHub-Request-Id: C598:23A1:40ACFF:9902BD:5E610130
      X-OAuth-Scopes: repo
      X-RateLimit-Limit: '5000'
      X-RateLimit-Remaining: '4834'
      X-RateLimit-Reset: '1583418082'
      X-XSS-Protection: 1; mode=block
    status:
      code: 200
      message: OK
    url: https://api.github.com/repos/lolatravel/lola-server/pulls/6140
- request:
    body: null
    headers: {}
    method: GET
    uri: https://api.github.com/repos/lolatravel/lola-server/pulls/6155
  response:
    body:
      string: '{"url":"https://api.github.com/repos/lolatravel/lola-server/pulls/6155","id":378406511,"node_id":"MDExOlB1bGxSZXF1ZXN0Mzc4NDA2NTEx","html_url":"https://github.com/lolatravel/lola-server/pull/6155","diff_url":"https://github.com/lolatravel/lola-server/pull/6155.diff","patch_url":"https://github.com/lolatravel/lola-server/pull/6155.patch","issue_url":"https://api.github.com/repos/lolatravel/lola-server/issues/6155","number":6155,"state":"closed","locked":false,"title":"HIIT-70
        Post savings to #savings channel","user":{"login":"ddoughty","id":2258578,"node_id":"MDQ6VXNlcjIyNTg1Nzg=","avatar_url":"https://avatars3.githubusercontent.com/u/2258578?v=4","gravatar_id":"","url":"https://api.github.com/users/ddoughty","html_url":"https://github.com/ddoughty","followers_url":"https://api.github.com/users/ddoughty/followers","following_url":"https://api.github.com/users/ddoughty/following{/other_user}","gists_url":"https://api.github.com/users/ddoughty/gists{/gist_id}","starred_url":"https://api.github.com/users/ddoughty/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddoughty/subscriptions","organizations_url":"https://api.github.com/users/ddoughty/orgs","repos_url":"https://api.github.com/users/ddoughty/repos","events_url":"https://api.github.com/users/ddoughty/events{/privacy}","received_events_url":"https://api.github.com/users/ddoughty/received_events","type":"User","site_admin":false},"body":"###
        Summary\r\n\r\n* Refactor the booking bot a little to make it easier to send
        multiple messages.\r\n* Calculate savings and post to Slack as appropriate.\r\n\r\nDepends
        on new env variable being deployed but won''t break if it''s not there.\r\n\r\nhttps://lola.atlassian.net/browse/HIIT-70\r\n\r\n###
        Checklist\r\n\r\n- [x] Squashed commits\r\n- [x] Wrote a test or ran the app
        to exercise this code\r\n- [ ] Considered/added new metrics\r\n- [ ] Considered
        the effect on existing metrics\r\n\r\n### Prior to Merging\r\n\r\n- [ ] Added
        a descriptive line to the [upcoming release](https://github.com/lolatravel/lola-server/releases)\r\n      that
        references any related jira tickets.\r\n\r\n<img width=\"724\" alt=\"Screenshot
        2020-02-21 13 15 43\" src=\"https://user-images.githubusercontent.com/2258578/75060191-5c6d5a80-54ac-11ea-8321-58cee7f5d125.png\">\r\n","created_at":"2020-02-21T18:09:04Z","updated_at":"2020-02-21T18:23:37Z","closed_at":"2020-02-21T18:23:31Z","merged_at":"2020-02-21T18:23:31Z","merge_commit_sha":"53687f5f68891635bc8f1f231fa9998a265b6edd","assignee":null,"assignees":[],"requested_reviewers":[],"requested_teams":[],"labels":[{"id":1712700165,"node_id":"MDU6TGFiZWwxNzEyNzAwMTY1","url":"https://api.github.com/repos/lolatravel/lola-server/labels/automerge","name":"automerge","color":"bcbef4","default":false,"description":""}],"milestone":null,"commits_url":"https://api.github.com/repos/lolatravel/lola-server/pulls/6155/commits","review_comments_url":"https://api.github.com/repos/lolatravel/lola-server/pulls/6155/comments","review_comment_url":"https://api.github.com/repos/lolatravel/lola-server/pulls/comments{/number}","comments_url":"https://api.github.com/repos/lolatravel/lola-server/issues/6155/comments","statuses_url":"https://api.github.com/repos/lolatravel/lola-server/statuses/6271aad6695c331046425170831212bf8e88d9f3","head":{"label":"lolatravel:enhancement/200221/savings_bot","ref":"enhancement/200221/savings_bot","sha":"6271aad6695c331046425170831212bf8e88d9f3","user":{"login":"lolatravel","id":13453237,"node_id":"MDEyOk9yZ2FuaXphdGlvbjEzNDUzMjM3","avatar_url":"https://avatars3.githubusercontent.com/u/13453237?v=4","gravatar_id":"","url":"https://api.github.com/users/lolatravel","html_url":"https://github.com/lolatravel","followers_url":"https://api.github.com/users/lolatravel/followers","following_url":"https://api.github.com/users/lolatravel/following{/other_user}","gists_url":"https://api.github.com/users/lolatravel/gists{/gist_id}","starred_url":"https://api.github.com/users/lolatravel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lolatravel/subscriptions","organizations_url":"https://api.github.com/users/lolatravel/orgs","repos_url":"https://api.github.com/users/lolatravel/repos","events_url":"https://api.github.com/users/lolatravel/events{/privacy}","received_events_url":"https://api.github.com/users/lolatravel/received_events","type":"Organization","site_admin":false},"repo":{"id":39645144,"node_id":"MDEwOlJlcG9zaXRvcnkzOTY0NTE0NA==","name":"lola-server","full_name":"lolatravel/lola-server","private":true,"owner":{"login":"lolatravel","id":13453237,"node_id":"MDEyOk9yZ2FuaXphdGlvbjEzNDUzMjM3","avatar_url":"https://avatars3.githubusercontent.com/u/13453237?v=4","gravatar_id":"","url":"https://api.github.com/users/lolatravel","html_url":"https://github.com/lolatravel","followers_url":"https://api.github.com/users/lolatravel/followers","following_url":"https://api.github.com/users/lolatravel/following{/other_user}","gists_url":"https://api.github.com/users/lolatravel/gists{/gist_id}","starred_url":"https://api.github.com/users/lolatravel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lolatravel/subscriptions","organizations_url":"https://api.github.com/users/lolatravel/orgs","repos_url":"https://api.github.com/users/lolatravel/repos","events_url":"https://api.github.com/users/lolatravel/events{/privacy}","received_events_url":"https://api.github.com/users/lolatravel/received_events","type":"Organization","site_admin":false},"html_url":"https://github.com/lolatravel/lola-server","description":"Main
        lola server to the iPhone app, agent console, etc","fork":false,"url":"https://api.github.com/repos/lolatravel/lola-server","forks_url":"https://api.github.com/repos/lolatravel/lola-server/forks","keys_url":"https://api.github.com/repos/lolatravel/lola-server/keys{/key_id}","collaborators_url":"https://api.github.com/repos/lolatravel/lola-server/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/lolatravel/lola-server/teams","hooks_url":"https://api.github.com/repos/lolatravel/lola-server/hooks","issue_events_url":"https://api.github.com/repos/lolatravel/lola-server/issues/events{/number}","events_url":"https://api.github.com/repos/lolatravel/lola-server/events","assignees_url":"https://api.github.com/repos/lolatravel/lola-server/assignees{/user}","branches_url":"https://api.github.com/repos/lolatravel/lola-server/branches{/branch}","tags_url":"https://api.github.com/repos/lolatravel/lola-server/tags","blobs_url":"https://api.github.com/repos/lolatravel/lola-server/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/lolatravel/lola-server/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/lolatravel/lola-server/git/refs{/sha}","trees_url":"https://api.github.com/repos/lolatravel/lola-server/git/trees{/sha}","statuses_url":"https://api.github.com/repos/lolatravel/lola-server/statuses/{sha}","languages_url":"https://api.github.com/repos/lolatravel/lola-server/languages","stargazers_url":"https://api.github.com/repos/lolatravel/lola-server/stargazers","contributors_url":"https://api.github.com/repos/lolatravel/lola-server/contributors","subscribers_url":"https://api.github.com/repos/lolatravel/lola-server/subscribers","subscription_url":"https://api.github.com/repos/lolatravel/lola-server/subscription","commits_url":"https://api.github.com/repos/lolatravel/lola-server/commits{/sha}","git_commits_url":"https://api.github.com/repos/lolatravel/lola-server/git/commits{/sha}","comments_url":"https://api.github.com/repos/lolatravel/lola-server/comments{/number}","issue_comment_url":"https://api.github.com/repos/lolatravel/lola-server/issues/comments{/number}","contents_url":"https://api.github.com/repos/lolatravel/lola-server/contents/{+path}","compare_url":"https://api.github.com/repos/lolatravel/lola-server/compare/{base}...{head}","merges_url":"https://api.github.com/repos/lolatravel/lola-server/merges","archive_url":"https://api.github.com/repos/lolatravel/lola-server/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/lolatravel/lola-server/downloads","issues_url":"https://api.github.com/repos/lolatravel/lola-server/issues{/number}","pulls_url":"https://api.github.com/repos/lolatravel/lola-server/pulls{/number}","milestones_url":"https://api.github.com/repos/lolatravel/lola-server/milestones{/number}","notifications_url":"https://api.github.com/repos/lolatravel/lola-server/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/lolatravel/lola-server/labels{/name}","releases_url":"https://api.github.com/repos/lolatravel/lola-server/releases{/id}","deployments_url":"https://api.github.com/repos/lolatravel/lola-server/deployments","created_at":"2015-07-24T16:33:17Z","updated_at":"2020-03-04T20:45:38Z","pushed_at":"2020-03-05T13:13:30Z","git_url":"git://github.com/lolatravel/lola-server.git","ssh_url":"git@github.com:lolatravel/lola-server.git","clone_url":"https://github.com/lolatravel/lola-server.git","svn_url":"https://github.com/lolatravel/lola-server","homepage":"","size":69303,"stargazers_count":2,"watchers_count":2,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":0,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":500,"license":null,"forks":0,"open_issues":500,"watchers":2,"default_branch":"master"}},"base":{"label":"lolatravel:master","ref":"master","sha":"74d5a0d3bff1ad7ff19a0c4ed0d8ecf17800e484","user":{"login":"lolatravel","id":13453237,"node_id":"MDEyOk9yZ2FuaXphdGlvbjEzNDUzMjM3","avatar_url":"https://avatars3.githubusercontent.com/u/13453237?v=4","gravatar_id":"","url":"https://api.github.com/users/lolatravel","html_url":"https://github.com/lolatravel","followers_url":"https://api.github.com/users/lolatravel/followers","following_url":"https://api.github.com/users/lolatravel/following{/other_user}","gists_url":"https://api.github.com/users/lolatravel/gists{/gist_id}","starred_url":"https://api.github.com/users/lolatravel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lolatravel/subscriptions","organizations_url":"https://api.github.com/users/lolatravel/orgs","repos_url":"https://api.github.com/users/lolatravel/repos","events_url":"https://api.github.com/users/lolatravel/events{/privacy}","received_events_url":"https://api.github.com/users/lolatravel/received_events","type":"Organization","site_admin":false},"repo":{"id":39645144,"node_id":"MDEwOlJlcG9zaXRvcnkzOTY0NTE0NA==","name":"lola-server","full_name":"lolatravel/lola-server","private":true,"owner":{"login":"lolatravel","id":13453237,"node_id":"MDEyOk9yZ2FuaXphdGlvbjEzNDUzMjM3","avatar_url":"https://avatars3.githubusercontent.com/u/13453237?v=4","gravatar_id":"","url":"https://api.github.com/users/lolatravel","html_url":"https://github.com/lolatravel","followers_url":"https://api.github.com/users/lolatravel/followers","following_url":"https://api.github.com/users/lolatravel/following{/other_user}","gists_url":"https://api.github.com/users/lolatravel/gists{/gist_id}","starred_url":"https://api.github.com/users/lolatravel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lolatravel/subscriptions","organizations_url":"https://api.github.com/users/lolatravel/orgs","repos_url":"https://api.github.com/users/lolatravel/repos","events_url":"https://api.github.com/users/lolatravel/events{/privacy}","received_events_url":"https://api.github.com/users/lolatravel/received_events","type":"Organization","site_admin":false},"html_url":"https://github.com/lolatravel/lola-server","description":"Main
        lola server to the iPhone app, agent console, etc","fork":false,"url":"https://api.github.com/repos/lolatravel/lola-server","forks_url":"https://api.github.com/repos/lolatravel/lola-server/forks","keys_url":"https://api.github.com/repos/lolatravel/lola-server/keys{/key_id}","collaborators_url":"https://api.github.com/repos/lolatravel/lola-server/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/lolatravel/lola-server/teams","hooks_url":"https://api.github.com/repos/lolatravel/lola-server/hooks","issue_events_url":"https://api.github.com/repos/lolatravel/lola-server/issues/events{/number}","events_url":"https://api.github.com/repos/lolatravel/lola-server/events","assignees_url":"https://api.github.com/repos/lolatravel/lola-server/assignees{/user}","branches_url":"https://api.github.com/repos/lolatravel/lola-server/branches{/branch}","tags_url":"https://api.github.com/repos/lolatravel/lola-server/tags","blobs_url":"https://api.github.com/repos/lolatravel/lola-server/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/lolatravel/lola-server/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/lolatravel/lola-server/git/refs{/sha}","trees_url":"https://api.github.com/repos/lolatravel/lola-server/git/trees{/sha}","statuses_url":"https://api.github.com/repos/lolatravel/lola-server/statuses/{sha}","languages_url":"https://api.github.com/repos/lolatravel/lola-server/languages","stargazers_url":"https://api.github.com/repos/lolatravel/lola-server/stargazers","contributors_url":"https://api.github.com/repos/lolatravel/lola-server/contributors","subscribers_url":"https://api.github.com/repos/lolatravel/lola-server/subscribers","subscription_url":"https://api.github.com/repos/lolatravel/lola-server/subscription","commits_url":"https://api.github.com/repos/lolatravel/lola-server/commits{/sha}","git_commits_url":"https://api.github.com/repos/lolatravel/lola-server/git/commits{/sha}","comments_url":"https://api.github.com/repos/lolatravel/lola-server/comments{/number}","issue_comment_url":"https://api.github.com/repos/lolatravel/lola-server/issues/comments{/number}","contents_url":"https://api.github.com/repos/lolatravel/lola-server/contents/{+path}","compare_url":"https://api.github.com/repos/lolatravel/lola-server/compare/{base}...{head}","merges_url":"https://api.github.com/repos/lolatravel/lola-server/merges","archive_url":"https://api.github.com/repos/lolatravel/lola-server/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/lolatravel/lola-server/downloads","issues_url":"https://api.github.com/repos/lolatravel/lola-server/issues{/number}","pulls_url":"https://api.github.com/repos/lolatravel/lola-server/pulls{/number}","milestones_url":"https://api.github.com/repos/lolatravel/lola-server/milestones{/number}","notifications_url":"https://api.github.com/repos/lolatravel/lola-server/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/lolatravel/lola-server/labels{/name}","releases_url":"https://api.github.com/repos/lolatravel/lola-server/releases{/id}","deployments_url":"https://api.github.com/repos/lolatravel/lola-server/deployments","created_at":"2015-07-24T16:33:17Z","updated_at":"2020-03-04T20:45:38Z","pushed_at":"2020-03-05T13:13:30Z","git_url":"git://github.com/lolatravel/lola-server.git","ssh_url":"git@github.com:lolatravel/lola-server.git","clone_url":"https://github.com/lolatravel/lola-server.git","svn_url":"https://github.com/lolatravel/lola-server","homepage":"","size":69303,"stargazers_count":2,"watchers_count":2,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":0,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":500,"license":null,"forks":0,"open_issues":500,"watchers":2,"default_branch":"master"}},"_links":{"self":{"href":"https://api.github.com/repos/lolatravel/lola-server/pulls/6155"},"html":{"href":"https://github.com/lolatravel/lola-server/pull/6155"},"issue":{"href":"https://api.github.com/repos/lolatravel/lola-server/issues/6155"},"comments":{"href":"https://api.github.com/repos/lolatravel/lola-server/issues/6155/comments"},"review_comments":{"href":"https://api.github.com/repos/lolatravel/lola-server/pulls/6155/comments"},"review_comment":{"href":"https://api.github.com/repos/lolatravel/lola-server/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/lolatravel/lola-server/pulls/6155/commits"},"statuses":{"href":"https://api.github.com/repos/lolatravel/lola-server/statuses/6271aad6695c331046425170831212bf8e88d9f3"}},"author_association":"CONTRIBUTOR","merged":true,"mergeable":null,"rebaseable":null,"mergeable_state":"unknown","merged_by":{"login":"kodiakhq[bot]","id":49736102,"node_id":"MDM6Qm90NDk3MzYxMDI=","avatar_url":"https://avatars1.githubusercontent.com/in/29196?v=4","gravatar_id":"","url":"https://api.github.com/users/kodiakhq%5Bbot%5D","html_url":"https://github.com/apps/kodiakhq","followers_url":"https://api.github.com/users/kodiakhq%5Bbot%5D/followers","following_url":"https://api.github.com/users/kodiakhq%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/kodiakhq%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/kodiakhq%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kodiakhq%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/kodiakhq%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/kodiakhq%5Bbot%5D/repos","events_url":"https://api.github.com/users/kodiakhq%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/kodiakhq%5Bbot%5D/received_events","type":"Bot","site_admin":false},"comments":0,"review_comments":0,"maintainer_can_modify":false,"commits":1,"additions":103,"deletions":38,"changed_files":3}'
    headers:
      Access-Control-Allow-Origin: '*'
      Access-Control-Expose-Headers: ETag, Link, Location, Retry-After, X-GitHub-OTP,
        X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset, X-OAuth-Scopes,
        X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type, Deprecation,
        Sunset
      Cache-Control: private, max-age=60, s-maxage=60
      Content-Encoding: gzip
      Content-Security-Policy: default-src 'none'
      Content-Type: application/json; charset=utf-8
      Date: Thu, 05 Mar 2020 13:40:01 GMT
      ETag: W/"116e8ba8b60e090a3aef3745d6aceb59"
      Last-Modified: Wed, 04 Mar 2020 13:11:09 GMT
      Referrer-Policy: origin-when-cross-origin, strict-origin-when-cross-origin
      Server: GitHub.com
      Status: 200 OK
      Strict-Transport-Security: max-age=31536000; includeSubdomains; preload
      Transfer-Encoding: chunked
      Vary: Accept-Encoding, Accept, X-Requested-With
      X-Accepted-OAuth-Scopes: ''
      X-Content-Type-Options: nosniff
      X-Frame-Options: deny
      X-GitHub-Media-Type: github.v3; format=json
      X-GitHub-Request-Id: C599:7545:1FF77C:52EA78:5E610130
      X-OAuth-Scopes: repo
      X-RateLimit-Limit: '5000'
      X-RateLimit-Remaining: '4833'
      X-RateLimit-Reset: '1583418083'
      X-XSS-Protection: 1; mode=block
    status:
      code: 200
      message: OK
    url: https://api.github.com/repos/lolatravel/lola-server/pulls/6155
version: 1
